!function(e){function t(t){for(var a,s,i=t[0],u=t[1],l=t[2],d=0,f=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);for(c&&c(t);f.length;)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var u=n[i];0!==r[u]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={0:0},o=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="./";var i=window.webpackJsonp=window.webpackJsonp||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=u;o.push(["Vtdi",1]),n()}({"+W/w":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e){case"farm_activity":return"Activity";case"farm_harvest":return"Harvest";case"farm_input":return"Input";case"farm_observation":return"Observation";case"farm_seeding":return"Seeding";default:throw new Error("Invalid type")}}},"+eex":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n("f8sa"),o=(a=r)&&a.__esModule?a:{default:a};t.default={name:"MenuBar",components:{IconMoreVert:o.default},props:{more:{type:Boolean,default:!0}},data:function(){return{showMore:!1}},methods:{openMoreMenu:function(e){e.stopPropagation(),this.showMore=!0,document.addEventListener("click",this.handleClickOutside)},handleClickOutside:function(e){var t=document.getElementById("more-menu");null===t||t.contains(e.target)||(this.showMore=!1)}},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)}}},"+gRR":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("oCYn")),r=i(n("8jTM")),o=i(n("J8r6")),s=i(n("aG/g"));function i(e){return e&&e.__esModule?e:{default:e}}n("5H+A"),n("eWlR"),a.default.config.productionTip=!1,t.default=function(e,t){return void 0!==t&&t.length>0&&t.forEach((function(e){return a.default.use(e,{store:o.default,router:r.default})})),new a.default({el:e,store:o.default,router:r.default,components:{App:s.default},template:"<App/>"})}},"+klp":function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-6 15h-2v-2h2v2zm0-4h-2V8h2v6zm-1-9c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"}})])}),[],!1,null,null,null);t.default=r.exports},"+mU5":function(e,t,n){"use strict";n.r(t);var a=n("ONIP"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},"+t6u":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n("gDS+"),o=(a=r)&&a.__esModule?a:{default:a};t.mergeGeometries=function(e){var t=e.filter((function(e){return!!e}));if(0===t.length)return"";if(1===t.length)return t[0];var n=t.map(s.parse),a=n.reduce((function(e,t){if(!t)return e;if("GeometryCollection"!==t.type)return e.geometries.some((function(e){return u(e,t)}))?e:{type:"GeometryCollection",geometries:e.geometries.concat(t)};var n=t.geometries.filter((function(t){return!e.geometries.some((function(e){return u(e,t)}))}));return{type:"GeometryCollection",geometries:e.geometries.concat(n)}}),{type:"GeometryCollection",geometries:[]});return(0,s.stringify)(a)},t.removeGeometry=function(e,t){if(!e||"GEOMETRYCOLLECTION EMPTY"===e)return"";if(!t||"GEOMETRYCOLLECTION EMPTY"===t)return e;var n=(0,s.parse)(e),a=(0,s.parse)(t);if("GeometryCollection"!==n.type&&"GeometryCollection"!==a.type)return u(n,a)?"":e;if("GeometryCollection"===n.type&&"GeometryCollection"!==a.type){var r={type:"GeometryCollection",geometries:n.geometries.filter((function(e){return!u(e,a)}))};return r.geometries.length>0?(0,s.stringify)(r):""}if("GeometryCollection"===n.type&&"GeometryCollection"===a.type){var o={type:"GeometryCollection",geometries:n.geometries.filter((function(e){return!a.geometries.some((function(t){return u(e,t)}))}))};return o.geometries.length>0?(0,s.stringify)(o):""}if("GeometryCollection"!==n.type&&"GeometryCollection"===a.type){return a.geometries.some((function(e){return u(n,e)}))?"":e}throw new Error("Format(s) not recognized as valid WKT.")},t.isNearby=function(e,t,n){var a=(0,s.parse)(t),r=(0,i.circle)(e,n,{units:"kilometers"}),o=(0,i.polygon)(a.coordinates);return null!==(0,i.intersect)(r,o)};var s=n("Mkpm"),i=n("WVt+");function u(e,t){return(0,o.default)(e.coordinates)===(0,o.default)(t.coordinates)}},"0VQf":function(e,t,n){"use strict";n.r(t);var a=n("UiWD"),r=n("PoNo");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("qF9E");var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,"693d47c4",null);t.default=i.exports},"2A+E":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("wkee")),r=i(n("OTyp")),o=i(n("iVBF")),s=i(n("HQ1J"));function i(e){return e&&e.__esModule?e:{default:e}}t.default={name:"AllLogsMenuBar",components:{MenuBar:a.default,IconCloudUpload:r.default,IconFilter:o.default,IconMenu:s.default}}},"2mNX":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-check"},[n("input",{attrs:{type:"checkbox",id:e.id,name:e.id},domProps:{checked:e.selected}}),e._v(" "),n("label",{class:[{selected:e.selected},{small:e.small}],attrs:{for:e.id},on:{click:function(t){e.$emit("input",e.checkChecked(e.id))}}},[e._v("\n    "+e._s(e.label)+"\n  ")])])},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},"3sS4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("wkee")),r=o(n("8HxT"));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:"EditMapMenuBar",components:{MenuBar:a.default,IconArrowBack:r.default},props:["logs","id"],computed:{logLink:function(){return{name:"edit-log",params:{id:this.id,tab:"SECOND"}}}}}},"4DoL":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-item form-group col",attrs:{id:"date-form"}},[n("label",{staticClass:"control-label",attrs:{for:"date"}},[e._v("Date")]),e._v(" "),n("input",{staticClass:"form-control",attrs:{id:"date",type:"date"},domProps:{value:e.time.date},on:{input:function(t){return e.updateDate(t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-item form-group col",attrs:{id:"hour-form"}},[n("label",{staticClass:"control-label",attrs:{for:"hour"}},[e._v("Hour")]),e._v(" "),n("input",{staticClass:"form-control",attrs:{id:"hour",type:"number",min:"1",max:"12"},domProps:{value:e.time.hour},on:{input:function(t){return e.updateHour(t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-item form-group col",attrs:{id:"minute-form"}},[n("label",{staticClass:"control-label",attrs:{for:"minute"}},[e._v("Min")]),e._v(" "),n("input",{staticClass:"form-control",attrs:{id:"minute",type:"number",min:"00",max:"59"},domProps:{value:e.time.minute},on:{input:function(t){return e.updateMinute(t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-item form-group col",attrs:{id:"am-pm-form"}},[n("label",{staticClass:"control-label",attrs:{for:"am-pm"}}),e._v(" "),n("div",{staticClass:"form-item form-group",attrs:{id:"am-pm"}},[n("div",{staticClass:"form-check"},[n("input",{staticClass:"form-check-input",attrs:{id:"is-am",name:"am-pm",type:"radio",value:"am"},domProps:{checked:e.time.am},on:{input:function(t){return e.updateAmPm(t.target.checked)}}}),e._v(" "),n("label",{staticClass:"form-check-label",attrs:{for:"is-am"}},[e._v("AM")])]),e._v(" "),n("div",{staticClass:"form-check"},[n("input",{staticClass:"form-check-input",attrs:{id:"is-pm",name:"am-pm",type:"radio",value:"pm"},domProps:{checked:!e.time.am},on:{input:function(t){return e.updateAmPm(!t.target.checked)}}}),e._v(" "),n("label",{staticClass:"form-check-label",attrs:{for:"is-pm"}},[e._v("PM")])])])])])},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},"4gjd":function(e,t,n){"use strict";n.r(t);var a=n("4DoL"),r=n("Fp97");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("wWkD");var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,null,null);t.default=i.exports},"5BCv":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("router-view",{attrs:{name:"menubar",logs:e.logs},on:{toggleDrawer:function(t){return e.$emit("toggleDrawer")},deleteCurrentLog:function(t){return e.openDeleteDialog(t)},syncAll:e.syncAll,resetDisplayFilters:e.resetDisplayFilters}}),e._v(" "),n("router-view",{attrs:{logs:e.logs,areas:e.areas,assets:e.assets,useGeolocation:e.useGeolocation,units:e.units,categories:e.categories,equipment:e.equipment,userId:e.userId,logDisplayFilters:e.logDisplayFilters,systemOfMeasurement:e.systemOfMeasurement},on:{deleteLog:function(t){return e.openDeleteDialog(t)},addToExcludedTypes:function(t){return e.addToExcludedTypes(t)},removeFromExcludedTypes:function(t){return e.removeFromExcludedTypes(t)},addToExcludedCategories:function(t){return e.addToExcludedCategories(t)},removeFromExcludedCategories:function(t){return e.removeFromExcludedCategories(t)},setDateFilter:function(t){return e.setDateFilter(t)}}}),e._v(" "),e.showDeleteDialog?n("div",{staticClass:"modal",attrs:{id:"delete-dialog",tabindex:"-1",role:"dialog"}},[n("div",{staticClass:"modal-filter"}),e._v(" "),n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e._v("Confirm Deletion")]),e._v(" "),n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.cancelDelete}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]),e._v(" "),n("div",{staticClass:"modal-body"},[e._v("\n          Are sure you'd like to delete the log \""+e._s(e.logs[e.logIndexToDelete].name.data)+'"? \n          '),e.logs[e.logIndexToDelete].wasPushedToServer?n("span",[e._v("\n            Deleting it on this device will not remove the log from the server.\n          ")]):n("span",[e._v("\n            It has not yet been synced to the server and cannot be recovered after it's deleted.\n          ")])]),e._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.cancelDelete}},[e._v("\n          Cancel\n        ")]),e._v(" "),n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return e.confirmDelete()}}},[e._v("\n          Delete\n        ")])])])])]):e._e()],1)},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},"5FK+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(n("9TKf")),r=l(n("fDWo")),o=l(n("InZg")),s=l(n("hdPq")),i=l(n("efym")),u=l(n("RmFW"));function l(e){return e&&e.__esModule?e:{default:e}}t.default={version:2,name:"farmos",stores:[{name:"logs",keyPath:"localID",autoIncrement:!1,upgrades:a.default},{name:"assets",keyPath:"id",autoIncrement:!1,upgrades:r.default},{name:"areas",keyPath:"tid",autoIncrement:!1,upgrades:o.default},{name:"units",keyPath:"tid",autoIncrement:!1,upgrades:s.default},{name:"categories",keyPath:"tid",autoIncrement:!1,upgrades:i.default},{name:"equipment",keyPath:"id",autoIncrement:!1,upgrades:u.default}]}},"5FMb":function(e,t,n){"use strict";var a=function(){var e=this.$createElement;return(this._self._c||e)("Map",{attrs:{id:"map",overrideStyles:{height:"calc(100vh - 3rem)"},drawing:!0,options:{controls:function(e){return e.filter((function(e){return"FullScreen"!==e.constructor.name}))},units:this.systemOfMeasurement},wkt:{title:"movement",wkt:this.logs[this.currentLogIndex].movement.data.geometry,color:"orange"},geojson:{title:"areas",url:this.areaGeoJSON,color:"grey"}},on:{"update-wkt":this.updateMovement}})},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},"5H+A":function(e,t,n){},"5N10":function(e,t,n){"use strict";var a=n("WWDh");n.n(a).a},"6JTb":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(n("YEIV")),r=u(n("QbLZ")),o=u(n("sk9p")),s=u(n("oF3Q")),i=u(n("EJiy"));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return{install:function(t,n){var u=n.store,l=n.router,c=e.drawer,d=e.filters,f=e.name,m=e.routes;u.commit("updateModule",{name:f,filters:d}),t.component(f+"-drawer-items",(0,r.default)({},c,{name:f+"-drawer-items"})),l.addRoutes(function e(t,n,u){return Array.isArray(u)?u.map((function(u){var l=u.path,c=u.name,d=u.component,f=u.components,m=u.children,h=u.meta,g=u.params,p=u.props,v=u.query;return{path:l,name:c,component:"object"!==(void 0===d?"undefined":(0,i.default)(d))?void 0:t.component(d.name,d),components:"object"!==(void 0===f?"undefined":(0,i.default)(f))?void 0:(0,s.default)(f).reduce((function(e,n){var s=(0,o.default)(n,2),i=s[0],u=s[1];return(0,r.default)({},e,(0,a.default)({},i,t.component(u.name,u)))}),{}),children:e(t,n,m),meta:(0,r.default)({},h,{module:n}),params:g,props:p,query:v}})):void 0}(t,f,m))}}}},"6Luc":function(e,t,n){"use strict";var a=function(){var e=this.$createElement;return(this._self._c||e)("div",{style:[this.defaultStyles,this.overrideStyles],attrs:{id:this.id}})},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},"6NWd":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"html",attrs:{id:"app"}},[n("transition",{attrs:{name:"filter"}},[e.showDrawer?n("div",{staticClass:"modal-filter",on:{click:function(t){e.showDrawer=!e.showDrawer}}}):e._e()]),e._v(" "),n("transition",{attrs:{name:"drawer"}},[e.showDrawer?n("div",{staticClass:"drawer container-fluid"},[n("header",{staticClass:"drawer-header row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"arrow-back",on:{click:function(t){e.showDrawer=!e.showDrawer}}},[n("icon-arrow-back")],1),e._v(" "),e.isLoggedIn?n("div",{staticClass:"user-info"},[n("h2",[e._v(e._s(e.farmName))]),e._v(" "),n("p",[e._v(e._s(e.farmUrl.replace(/(^\w+:|^)\/\//,"")))]),e._v(" "),n("p",[e._v(e._s(e.username))])]):n("div",{staticClass:"user-info"},[n("h2",[e._v("Welcome to farmOS")]),e._v(" "),n("p",[e._v("Login for more options.")])])])]),e._v(" "),n("module-menu-items",{attrs:{modules:e.modules},nativeOn:{click:function(t){e.showDrawer=!e.showDrawer}}}),e._v(" "),n("drawer-list",[n("drawer-list-item",{attrs:{clickable:!1}},[n("label",{attrs:{for:"location-switch"}},[e._v("Share My Location ")]),e._v(" "),n("input",{staticClass:"toggle-check",attrs:{id:"location-switch",type:"checkbox"},domProps:{checked:e.useGeolocation},on:{input:function(t){return e.setUseGeolocation(t.target.checked)}}})]),e._v(" "),n("drawer-list-item",{attrs:{clickable:!1}},[e._v("Version: "+e._s(e.version))]),e._v(" "),e.isLoggedIn?e._e():n("router-link",{attrs:{to:"/login"}},[n("drawer-list-item",{on:{click:function(t){e.showDrawer=!e.showDrawer}}},[e._v("Login")])],1),e._v(" "),e.isLoggedIn?n("router-link",{attrs:{to:"/logout"}},[n("drawer-list-item",{on:{click:function(t){e.showDrawer=!e.showDrawer}}},[e._v("Logout")])],1):e._e()],1)],1):e._e()]),e._v(" "),n("main",[n("section",[e._l(e.errors,(function(t,a){return n("div",{key:"err-"+e.errors.indexOf(t)},[t.show?n("div",{staticClass:"alert alert-warning alert-dismissable"},[n("span",{domProps:{innerHTML:e._s(t.message)}}),e._v(" "),n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return e.closeError(a)}}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]):e._e()])})),e._v(" "),n("div",{staticClass:"region region-content"},[n("div",{staticClass:"block block-system"},[n("router-view",{attrs:{name:"menubar"},on:{toggleDrawer:function(t){e.showDrawer=!e.showDrawer}}}),e._v(" "),n("router-view",{attrs:{useGeolocation:e.useGeolocation,userId:e.userId,systemOfMeasurement:e.systemOfMeasurement,logs:e.logs,areas:e.areas,assets:e.assets,units:e.units,categories:e.categories,equipment:e.equipment},on:{toggleDrawer:function(t){e.showDrawer=!e.showDrawer}}})],1)])],2)])],1)},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},"6nSO":function(e,t,n){"use strict";n.r(t);var a=n("98m3"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},"7XZL":function(e,t,n){},"7faE":function(e,t,n){"use strict";var a=n("TbpJ");n.n(a).a},"7jTW":function(e,t,n){},"7sLs":function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}})])}),[],!1,null,null,null);t.default=r.exports},"84RJ":function(e,t,n){"use strict";n.r(t);var a=n("OKhj"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},"8DBe":function(e,t,n){"use strict";n.r(t);var a=n("+eex"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},"8HxT":function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}})])}),[],!1,null,null,null);t.default=r.exports},"8IFN":function(e,t,n){"use strict";var a=n("jHBc");n.n(a).a},"8PM6":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("menu-bar",{scopedSlots:e._u([{key:"left-menu",fn:function(){return[n("router-link",{attrs:{to:{name:"logs"},tag:"li"}},[n("icon-arrow-back")],1),e._v(" "),n("li",[e._v("Edit Log")])]},proxy:!0},{key:"right-menu",fn:function(){return[e.logs[e.currentLogIndex]&&e.logs[e.currentLogIndex].remoteUri?n("a",{attrs:{href:e.logs[e.currentLogIndex].remoteUri}},[n("li",[n("icon-open-in-new")],1)]):e._e(),e._v(" "),n("li",{on:{click:function(t){return e.$emit("deleteCurrentLog",e.currentLogIndex)}}},[n("icon-delete")],1)]},proxy:!0},{key:"more-menu",fn:function(){return[""!==e.logs[e.currentLogIndex].remoteUri?n("a",{attrs:{href:e.logs[e.currentLogIndex].remoteUri}},[n("li",[e._v("Open in browser")])]):e._e(),e._v(" "),n("li",{on:{click:function(t){return e.$emit("deleteCurrentLog")}}},[e._v("\n      Delete from device\n    ")])]},proxy:!0}])})},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},"8jGb":function(e,t,n){"use strict";n.r(t);n("Pi16");var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{staticClass:"spinner",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("g",[t("circle",{staticClass:"path",attrs:{cx:"12",cy:"12",r:"10",fill:"none","stroke-width":"3"}})])])}),[],!1,null,"c7231fb4",null);t.default=r.exports},"8jTM":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("oCYn")),r=i(n("jE9Z")),o=i(n("ZTW0")),s=i(n("kS0b"));function i(e){return e&&e.__esModule?e:{default:e}}a.default.use(r.default);var u=new r.default({routes:[{path:"/",redirect:"/logs"},{path:"/login",name:"Login",component:o.default},{path:"/logout",name:"Logout",component:s.default}]});u.beforeEach((function(e,t,n){"/login"===t.path&&"/logout"===e.path&&n("/"),n()})),t.default=u},"98m3":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("L2JU");var a,r=n("8jGb"),o=(a=r)&&a.__esModule?a:{default:a};t.default={components:{iconSpinner:o.default},name:"Login",data:function(){return{valuesEntered:!1,authPending:!1,username:"",password:"",farmosUrl:""}},methods:{checkValues:function(){var e=""!==this.username,t=""!==this.username,n=""!==this.password;e&&t&&n&&(this.valuesEntered=!0)},submitCredentials:function(){var e=this,t={farmosUrl:this.farmosUrl,username:this.username,password:this.password,router:this.$router};this.authPending=!0,this.$store.dispatch("didSubmitCredentials",t).then((function(){e.authPending=!1,e.$store.commit("setLoginStatus",!0),e.$store.dispatch("updateUserAndSiteInfo")}))},onDeviceReady:function(){this.loadUserInfo()},loadUserInfo:function(){this.farmosUrl=window.localStorage.getItem("host").replace(/(^\w+:|^)\/\//,""),this.username=window.localStorage.getItem("username"),this.password=window.localStorage.getItem("password"),this.checkValues()}},created:function(){document.addEventListener("deviceready",this.onDeviceReady(),!1),this.loadUserInfo()}}},"9TKf":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("QbLZ")),r=o(n("4d7F"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=[{version:1,onUpgrade:function(e){return new r.default((function(t,n){var a=e.target.result;try{a.createObjectStore("logs",{keyPath:"local_id",autoIncrement:!0}),t()}catch(e){n(e)}}))}},{version:2,onUpgrade:function(e){var t=e.target.result,n=e.target.transaction.objectStore("logs"),o=t.createObjectStore("logs-temp",{keyPath:"localID",autoIncrement:!1});return new r.default((function(e,t){var r=n.getAll();r.onsuccess=function(t){var n=t.target.result.map((function(e){var t=(0,a.default)({},e,{localID:e.local_id,modules:["my-logs"]});return delete t.local_id,t}));e(n)},r.onerror=t})).then((function(e){return r.default.all(e.map((function(e){return new r.default((function(t,n){var a=o.put(e);a.onsuccess=t,a.onerror=n}))})))})).then((function(){t.deleteObjectStore("logs"),o.name="logs"}))}}]},"9jqQ":function(e,t,n){"use strict";var a=n("xpj1");n.n(a).a},AzjE:function(e,t,n){},B6UC:function(e,t,n){},Blcz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("wkee")),r=i(n("8HxT")),o=i(n("HdXD")),s=i(n("GvTb"));function i(e){return e&&e.__esModule?e:{default:e}}t.default={name:"EditLogsMenuBar",components:{MenuBar:a.default,IconArrowBack:r.default,IconDelete:o.default,IconOpenInNew:s.default},props:["logs","id"],computed:{currentLogIndex:function(){var e=this,t=this.logs.findIndex((function(t){return t.localID===+e.id}));return t>=0?t:0}}}},CN6I:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateLocalID=t.clearStore=t.deleteRecord=t.saveRecord=t.getRecords=t.openDatabase=void 0;var a=u(n("4d7F")),r=u(n("YEIV")),o=u(n("QbLZ")),s=u(n("5FK+")),i=n("yI/5");function u(e){return e&&e.__esModule?e:{default:e}}var l=s.default.stores.reduce((function(e,t){return(0,o.default)({},e,(0,r.default)({},t.name,0))}),{});t.openDatabase=function(){return new a.default((function(e,t){var n=indexedDB.open(s.default.name,s.default.version);n.onerror=function(e){return t(e.target.error)},n.onsuccess=function(){return e(n.result)},n.onupgradeneeded=function(e){return s.default.stores.map((function(t){return t.upgrades.reduce((0,i.filterAndSort)(e.oldVersion),[])})).forEach((function(t){return(0,i.runUpgrades)(e)(t)}))}}))},t.getRecords=function(e,t,n){return new a.default((function(a,r){var o=e.transaction(t,"readonly").objectStore(t);if(n){var s=o.openCursor(),i=[];s.onerror=function(e){return r(e)},s.onsuccess=function(e){var t=e.target.result;t?(n(t.value)&&i.push(t.value),t.continue()):a(i)}}else{var u=o.getAll();u.onerror=function(e){return r(e.target.error)},u.onsuccess=function(e){return a(e.target.result)}}}))},t.saveRecord=function(e,t,n){return new a.default((function(a,r){var o=e.transaction(t,"readwrite").objectStore(t).put(n);o.onerror=function(e){return r(new Error(e.target.error))},o.onsuccess=function(e){return a(e.target.result)}}))},t.deleteRecord=function(e,t,n){return new a.default((function(a,r){var o=e.transaction(t,"readwrite").objectStore(t).delete(n);o.onsuccess=function(e){return a(e.target.result)},o.onerror=function(e){return r(e.target.error)}}))},t.clearStore=function(e,t){return new a.default((function(n,a){var r=e.transaction(t,"readwrite").objectStore(t).clear();r.onsuccess=function(e){return n(e.target.result)},r.onerror=function(e){return a(e.target.error)}}))},t.generateLocalID=function(e,t){var n=1;return new a.default((function(a,r){var o=e.transaction(t,"readonly").objectStore(t).openCursor(null,"prevunique");o.onerror=function(e){return r(new Error(e.target.erorr))},o.onsuccess=function(e){if(!(n>1)){var r=void 0,o=e.target.result;o?(o.continue(),r=l[t]>o.value.localID?l[t]+1:o.value.localID+1):r=l[t]+1,l[t]=r,n+=1,a(r)}}}))}},ETFt:function(e,t,n){"use strict";n.r(t);var a=n("J9/i"),r=n("84RJ");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("b0Aw");var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,"a347a80c",null);t.default=i.exports},Ffyi:function(e,t,n){"use strict";n.r(t);var a=n("g553"),r=n("duu2");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("hcZS");var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,"7e4579c4",null);t.default=i.exports},FhkT:function(e,t,n){"use strict";n.r(t);var a=n("2A+E"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},FmYw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Logout",methods:{goBack:function(){this.$router.back()},logout:function(){this.$store.dispatch("logout"),this.$store.dispatch("deleteAllCachedLogs"),this.$store.dispatch("deleteAllCachedAssets"),this.$store.dispatch("deleteAllCachedAreas"),this.$store.dispatch("deleteAllCachedUnits"),this.$store.dispatch("deleteAllCachedEquipment"),this.$store.dispatch("deleteAllCachedCategories"),this.$store.dispatch("deleteCachedUserAndSiteInfo"),this.$store.commit("setLoginStatus",!1),this.$router.push({path:"/login"})}}}},Fp97:function(e,t,n){"use strict";n.r(t);var a=n("G4pV"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},G4pV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"DateAndTimeForm",props:["timestamp"],data:function(){return{time:{date:"",hour:"12",minute:"00",am:!0}}},created:function(){this.time.date=this.unixToDateString(this.timestamp);var e=new Date(1e3*this.timestamp),t=e.getHours();this.time.hour=0===t?12:t%12,this.time.minute=e.getMinutes(),this.time.am=t<12},methods:{unixToDateString:function(e){var t=new Date(1e3*e),n=function(e){return e<10?"0"+e:e},a=n(t.getMonth()+1),r=n(t.getDate());return t.getFullYear()+"-"+a+"-"+r},dateAndTimeToUnix:function(e,t,n,a){var r=+e.split("-")[0],o=+e.split("-")[1]-1,s=+e.split("-")[2],i=void 0;return i=a&&12==+t?0:a||12==+t?+t:+t+12,Math.floor(new Date(r,o,s,i,n).getTime()/1e3).toString()},updateDate:function(e){var t=this.dateAndTimeToUnix(e,this.time.hour,this.time.minute,this.time.am);this.$emit("input",t)},updateHour:function(e){var t=this.dateAndTimeToUnix(this.time.date,e,this.time.minute,this.time.am);this.$emit("input",t)},updateMinute:function(e){var t=this.dateAndTimeToUnix(this.time.date,this.time.hour,e,this.time.am);this.$emit("input",t)},updateAmPm:function(e){var t=this.dateAndTimeToUnix(this.time.date,this.time.hour,this.time.minute,e);this.$emit("input",t)}},watch:{timestamp:function(e){this.time.date=this.unixToDateString(e);var t=new Date(1e3*e),n=t.getHours();this.time.hour=0===n?12:n%12,this.time.minute=t.getMinutes(),this.time.am=n<12}}}},Gn6g:function(e,t,n){},Gq5i:function(e,t,n){"use strict";var a=n("B6UC");n.n(a).a},GuV8:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("menu-bar",{attrs:{more:!1},scopedSlots:e._u([{key:"left-menu",fn:function(){return[n("router-link",{attrs:{to:e.logLink,tag:"li"}},[n("icon-arrow-back")],1),e._v(" "),n("li",[e._v("Map")])]},proxy:!0}])})},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},GvTb:function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}})])}),[],!1,null,null,null);t.default=r.exports},HQ1J:function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}})])}),[],!1,null,null,null);t.default=r.exports},HdXD:function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}}),t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})])}),[],!1,null,null,null);t.default=r.exports},InZg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n("4d7F"),o=(a=r)&&a.__esModule?a:{default:a};t.default=[{version:1,onUpgrade:function(e){return new o.default((function(t,n){var a=e.target.result;try{a.createObjectStore("areas",{keyPath:"tid"}),t()}catch(e){n(e)}}))}}]},IqgE:function(e,t,n){},J7Jb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("4d7F")),r=o(n("vzJi"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){var e=localStorage.getItem("host"),t=localStorage.getItem("username"),n=localStorage.getItem("password");return(0,r.default)(e,t,n)};t.default={actions:{didSubmitCredentials:function(e,t){var n=e.commit,o="https://"+t.farmosUrl,s=t.username,i=t.password,u=t.router,l=window.localStorage;return new a.default((function(e){(0,r.default)(o,s,i).authenticate().then((function(t){if(l.setItem("host",o),l.setItem("username",s),l.setItem("password",i),l.setItem("token",t),window.history.length>1)return window.history.back(),void e();u.push("/"),e()})).catch((function(){var a="http://"+t.farmosUrl;(0,r.default)(a,s,i).authenticate().then((function(t){if(l.setItem("host",a),l.setItem("username",s),l.setItem("password",i),l.setItem("token",t),window.history.length>1)return window.history.back(),void e();u.push("/"),e()})).catch((function(t){!function(e){if(403===e.status){var t={message:'The username or password you entered was incorrect. Please try again, or <a href="'+(o+"/user/password")+'">reset your password</a>.',errorCode:e.statusText,level:"warning",show:!0};n("logError",t)}else{var a={message:"Unable to reach the server. Please check that you have the correct URL and that your device has a network connection. Status: "+e.message,errorCode:e.statusText,level:"warning",show:!0};n("logError",a)}}(t),e()}))}))}))},logout:function(){s().logout().then((function(){}))},updateUserAndSiteInfo:function(e){var t=e.commit;localStorage.getItem("username")&&s().info().then((function(e){var n,a;t("changeFarmName",e.name),t("changeFarmUrl",e.url),t("changeUsername",e.user.name),t("changeEmail",e.user.mail),t("changeUid",e.user.uid),t("changeMapboxAPIKey",e.mapbox_api_key),t("changeSystemOfMeasurement",e.system_of_measurement),t("setLoginStatus",!0),localStorage.setItem("farmName",e.name),localStorage.setItem("username",e.user.name),localStorage.setItem("email",e.user.mail),localStorage.setItem("uid",e.user.uid),n="mapboxAPIKey",(a=e.mapbox_api_key)?localStorage.setItem(n,a):localStorage.removeItem(n),localStorage.setItem("systemOfMeasurement",e.system_of_measurement),localStorage.setItem("isLoggedIn",!0)}))},loadCachedUserAndSiteInfo:function(e){var t=e.commit;t("changeUsername",localStorage.getItem("username")),t("changeEmail",localStorage.getItem("email")),t("changeUid",localStorage.getItem("uid")),t("changeMapboxAPIKey",localStorage.getItem("mapboxAPIKey")),t("changeSystemOfMeasurement",localStorage.getItem("systemOfMeasurement")),t("setLoginStatus",localStorage.getItem("isLoggedIn")),t("changeFarmName",localStorage.getItem("farmName")),t("changeFarmUrl",localStorage.getItem("host")),localStorage.getItem("useGeolocation")&&("true"===localStorage.getItem("useGeolocation")?t("setUseGeolocation",!0):t("setUseGeolocation",!1))},deleteCachedUserAndSiteInfo:function(e){var t=e.commit;t("changeFarmName",""),t("changeFarmUrl",""),t("changeUsername",""),t("changeEmail",""),t("changeUid",""),t("changeMapboxAPIKey",""),t("changeSystemOfMeasurement","metric"),t("setLoginStatus",!1),localStorage.clear()}}}},J8r6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n("oCYn")),r=f(n("L2JU")),o=f(n("sXfw")),s=f(n("L61C")),i=f(n("sdek")),u=f(n("z+16")),l=f(n("Rrcy")),c=f(n("J7Jb")),d=f(n("i1sA"));function f(e){return e&&e.__esModule?e:{default:e}}a.default.use(r.default);var m=new r.default.Store({modules:{shell:o.default,farm:s.default,idb:i.default,http:l.default,auth:c.default,cam:d.default}}),h=(0,u.default)(m);m.subscribe(h),t.default=m},"J9/i":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tab-container"},[n("div",{staticClass:"tab-bar"},[n("div",{staticClass:"tab",class:{selected:"FIRST"===e.tabSelected},on:{click:function(t){e.tabSelected="FIRST"}}},[n("h5",[e._v("GENERAL")])]),e._v(" "),n("div",{staticClass:"tab",class:{selected:"SECOND"===e.tabSelected},on:{click:function(t){e.tabSelected="SECOND"}}},[n("h5",[e._v("MOVEMENT")])])]),e._v(" "),n("div",{staticClass:"tab-indicator",class:[{first:"FIRST"===e.tabSelected},{second:"SECOND"===e.tabSelected}]}),e._v(" "),n("div",{staticClass:"container-fluid tab-content first",class:{selected:"FIRST"===e.tabSelected}},[n("br"),e._v(" "),n("div",{staticClass:"form-item form-group"},[n("toggle-check",{attrs:{label:"Done",labelPosition:"after",checked:e.logs[e.currentLogIndex].done.data},on:{input:function(t){return e.updateCurrentLog("done",t)}}})],1),e._v(" "),n("div",{staticClass:"form-item form-item-name form-group"},[n("label",{staticClass:"control-label",attrs:{for:"name"}},[e._v("Name")]),e._v(" "),n("input",{staticClass:"form-control",attrs:{placeholder:"Enter name",type:"text",autofocus:""},domProps:{value:e.logs[e.currentLogIndex].name.data},on:{input:function(t){return e.updateCurrentLog("name",t.target.value)}}})]),e._v(" "),n("date-and-time-form",{attrs:{timestamp:e.logs[e.currentLogIndex].timestamp.data},on:{input:function(t){return e.updateCurrentLog("timestamp",t)}}}),e._v(" "),n("div",{staticClass:"form-item form-item-name form-group"},[n("label",{staticClass:"control-label ",attrs:{for:"type"}},[e._v("Log Type")]),e._v(" "),void 0===e.logs[e.currentLogIndex].id?n("div",{staticClass:"input-group"},[n("select",{staticClass:"custom-select col-sm-3 ",domProps:{value:e.logs[e.currentLogIndex].type.data},on:{input:function(t){return e.updateCurrentLog("type",t.target.value)}}},e._l(e.logTypes,(function(t,a){return n("option",{key:t+"-"+a,domProps:{value:a}},[e._v("\n              "+e._s(t)+"\n            ")])})),0)]):e._e(),e._v(" "),void 0!==e.logs[e.currentLogIndex].id?n("div",{staticClass:"form-item"},[n("p",[e._v(" "+e._s(e.logTypes[e.logs[e.currentLogIndex].type.data])+" ")])]):e._e()]),e._v(" "),n("div",{staticClass:"form-item form-item-name form-group"},[n("label",{staticClass:"control-label ",attrs:{for:"notes"}},[e._v("Notes")]),e._v(" "),n("textarea",{staticClass:"form-control",attrs:{placeholder:"Enter notes",type:"text"},domProps:{value:e.logs[e.currentLogIndex].notes.data},on:{input:function(t){return e.updateCurrentLog("notes",t.target.value)}}})]),e._v(" "),n("h4",[e._v("Log Categories")]),e._v(" "),n("div",{staticClass:"form-item form-group",attrs:{id:"categories"}},[!e.showAllCategories&&e.logs[e.currentLogIndex].log_category.data.length<1?n("p",[e._v("No categories selected")]):e._e(),e._v(" "),e._l(e.categories,(function(t){return e.showAllCategories||e.logs[e.currentLogIndex].log_category.data.some((function(e){return t.tid===e.id}))?n("select-box",{key:"category-"+t.tid+"-"+t.name,attrs:{small:"",id:"category-"+t.tid+"-"+t.name,selected:e.logs[e.currentLogIndex].log_category.data.some((function(e){return t.tid===e.id})),label:t.name},on:{input:function(n){n?e.addCategory(t.tid):e.removeCategory(e.logs[e.currentLogIndex].log_category.data.findIndex((function(e){return t.tid===e.id})))}}}):e._e()})),e._v(" "),n("div",{staticClass:"show-hide"},[e.showAllCategories?e._e():n("div",{on:{click:function(t){e.showAllCategories=!e.showAllCategories}}},[n("p",[n("icon-expand-more"),e._v("Show More")],1)]),e._v(" "),e.showAllCategories?n("div",{on:{click:function(t){e.showAllCategories=!e.showAllCategories}}},[n("p",[n("icon-expand-less"),e._v("Show Less")],1)]):e._e()])],2),e._v(" "),n("h4",[e._v("Quantities")]),e._v(" "),n("label",{staticClass:"control-label ",attrs:{for:"quantity"}},[e._v("Add new or edit existing quantity")]),e._v(" "),n("div",{staticClass:"form-item form-item-name form-group"},[n("select",{staticClass:"custom-select col-sm-3 ",attrs:{placeholder:"Quantity measure"},domProps:{value:e.logs[e.currentLogIndex].quantity.data.length>0?e.logs[e.currentLogIndex].quantity.data[e.logs[e.currentLogIndex].quantity.data.length-1].measure:""},on:{input:function(t){return e.updateNewQuant("measure",t.target.value)}}},e._l(e.quantMeasures,(function(t){return n("option",{domProps:{value:t}},[e._v("\n            "+e._s(t)+"\n          ")])})),0),e._v(" "),n("input",{staticClass:"form-control",attrs:{placeholder:"Quantity value",type:"number"},domProps:{value:e.logs[e.currentLogIndex].quantity.data.length>0?e.logs[e.currentLogIndex].quantity.data[e.logs[e.currentLogIndex].quantity.data.length-1].value:0},on:{input:function(t){return e.updateNewQuant("value",t.target.value)}}}),e._v(" "),n("select",{staticClass:"custom-select col-sm-3 ",attrs:{placeholder:"Quantity unit"},on:{input:function(t){return e.updateNewQuant("unit",t.target.value)}}},e._l(e.units,(function(t){return n("option",{domProps:{value:t.tid}},[e._v("\n            "+e._s(e.units?t.name:"")+"\n          ")])})),0),e._v(" "),n("input",{staticClass:"form-control",attrs:{placeholder:"Quantity label",type:"text"},domProps:{value:e.logs[e.currentLogIndex].quantity.data.length>0?e.logs[e.currentLogIndex].quantity.data[e.logs[e.currentLogIndex].quantity.data.length-1].label:""},on:{input:function(t){return e.updateNewQuant("label",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-item form-group"},[e.logs[e.currentLogIndex].quantity.data.length>0?n("ul",{staticClass:"list-group"},e._l(e.logs[e.currentLogIndex].quantity.data,(function(t,a){return n("li",{key:"quantity-"+a+"-"+Math.floor(1e6*Math.random()),staticClass:"list-group-item"},[e._v("\n          "+e._s(t.value)+" "+e._s(e.quantUnitNames.length>0?e.quantUnitNames[a]:"")+" "+e._s(t.label)+"\n          "),n("span",{staticClass:"remove-list-item",on:{click:function(t){return e.removeQuant(a)}}},[e._v("\n            ✕\n          ")])])})),0):e._e()]),e._v(" "),n("div",{staticClass:"form-item form-group"},[n("button",{staticClass:"btn btn-success",attrs:{type:"button",name:"addNewQuantity"},on:{click:e.addQuant}},[e._v("\n        Add another quantity\n      ")])]),e._v(" "),n("h4",[e._v("Assets")]),e._v(" "),n("Autocomplete",{class:{invalid:e.assetsRequired()},attrs:{objects:e.filteredAssets,searchKey:"name",searchId:"id",label:e.assetsRequired()?"Seedings must include assets!":"Add assets to the log"},on:{results:function(t){return e.addAsset(t)}}},[n("template",{slot:"empty"},[n("div",{staticClass:"empty-slot"},[n("em",[e._v("No assets found.")]),e._v(" "),n("br"),e._v(" "),n("button",{staticClass:"btn btn-light",attrs:{type:"button",name:"button"},on:{click:e.forceSync}},[e._v("\n            Sync Now\n          ")])])])],2),e._v(" "),n("div",{staticClass:"form-item form-item-name form-group"},[n("ul",{staticClass:"list-group"},e._l(e.selectedAssets,(function(t,a){return n("li",{key:"log-"+a+"-"+Math.floor(1e6*Math.random()),staticClass:"list-group-item"},[e._v("\n          "+e._s(t.name)+"\n          "),n("span",{staticClass:"remove-list-item",on:{click:function(n){return e.removeAsset(t)}}},[e._v("\n            ✕\n          ")])])})),0)]),e._v(" "),n("div",{staticClass:"form-item form-item-name form-group"},[n("label",{staticClass:"control-label ",attrs:{for:"type"}},[e._v("Equipment")]),e._v(" "),n("div",{staticClass:"input-group"},[n("select",{staticClass:"custom-select col-sm-3 ",on:{input:function(t){return e.addEquipment(t.target.value)}}},[n("option",{attrs:{value:""}}),e._v(" "),e._l(e.equipment,(function(t){return n("option",{domProps:{value:t.id}},[e._v("\n            "+e._s(t?t.name:"")+"\n          ")])}))],2)])]),e._v(" "),n("div",{staticClass:"form-item form-group"},[e.logs[e.currentLogIndex].equipment?n("ul",{staticClass:"list-group"},e._l(e.logs[e.currentLogIndex].equipment.data,(function(t,a){return n("li",{key:"log-"+a+"-"+Math.floor(1e6*Math.random()),staticClass:"list-group-item"},[e._v("\n          "+e._s(e.equipmentNames.length>0?e.equipmentNames[a]:"")+"\n          "),n("span",{staticClass:"remove-list-item",on:{click:function(t){return e.removeEquipment(a)}}},[e._v("\n            ✕\n          ")])])})),0):e._e()]),e._v(" "),"farm_seeding"!==e.logs[e.currentLogIndex].type.data?n("div",{attrs:{id:"areas-and-location"}},[n("h4",[e._v("Areas & Location")]),e._v(" "),e.useGeolocation?n("div",{staticClass:"form-item form-item-name form-group"},[n("div",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.useLocalAreas,expression:"useLocalAreas"}],staticClass:"form-check-input",attrs:{type:"radio",id:"dontUseGeo",name:"geoRadioGroup",checked:""},domProps:{value:!1,checked:e._q(e.useLocalAreas,!1)},on:{change:function(t){e.useLocalAreas=!1}}}),e._v(" "),n("label",{staticClass:"form-check-label",attrs:{for:"dontUseGeo"}},[e._v("Search areas")])]),e._v(" "),n("div",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.useLocalAreas,expression:"useLocalAreas"}],staticClass:"form-check-input",attrs:{type:"radio",id:"doUseGeo",name:"geoRadioGroup"},domProps:{value:!0,checked:e._q(e.useLocalAreas,!0)},on:{change:function(t){e.useLocalAreas=!0}}}),e._v(" "),n("label",{staticClass:"form-check-label",attrs:{for:"doUseGeo"}},[e._v("Use my location")])])]):e._e(),e._v(" "),e.useLocalAreas?n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"areaSelector"}},[e._v("Farm areas near your current location")]),e._v(" "),n("select",{staticClass:"form-control",attrs:{name:"areas"},on:{input:function(t){return e.addArea(t.target.value)}}},[e.localAreas.length<1?n("option",{attrs:{value:""}},[e._v("No other areas nearby")]):e._e(),e._v(" "),e.localAreas.length>0?n("option",{attrs:{value:"",selected:""}},[e._v("-- Select an Area --")]):e._e(),e._v(" "),e._l(e.localAreas,(function(t){return e.localAreas.length>0?n("option",{key:"area-"+t.tid,domProps:{value:t.tid}},[e._v("\n            "+e._s(t.name)+"\n          ")]):e._e()}))],2)]):e._e(),e._v(" "),e.useLocalAreas?e._e():n("Autocomplete",{attrs:{objects:e.filteredAreas,searchKey:"name",searchId:"tid",label:"Add areas to the log"},on:{results:function(t){return e.addArea(t)}}},[n("template",{slot:"empty"},[n("div",{staticClass:"empty-slot"},[n("em",[e._v("No areas found.")]),e._v(" "),n("br"),e._v(" "),n("button",{staticClass:"btn btn-light",attrs:{type:"button",name:"button"},on:{click:e.forceSync}},[e._v("\n              Sync Now\n            ")])])])],2),e._v(" "),n("div",{staticClass:"form-item form-item-name form-group"},[n("ul",{staticClass:"list-group"},e._l(e.selectedAreas,(function(t,a){return n("li",{key:"log-"+a+"-"+Math.floor(1e6*Math.random()),staticClass:"list-group-item"},[e._v("\n            "+e._s(t.name)+"\n            "),n("span",{staticClass:"remove-list-item",on:{click:function(n){return e.removeArea(t)}}},[e._v("\n              ✕\n            ")])])})),0)]),e._v(" "),e.useGeolocation?n("div",{staticClass:"form-item form-item-name form-group"},[n("button",{staticClass:"btn btn-success btn-navbar",attrs:{disabled:!1,title:"Add my GPS location to the log",type:"button"},on:{click:e.addLocation}},[e._v("\n          Add my GPS location to the log\n        ")])]):e._e(),e._v(" "),n("div",{staticClass:"form-item form-item-name form-group"},[n("ul",{staticClass:"list-group"},[e._l(e.logs[e.currentLogIndex].geofield.data,(function(t){return e.showGeofieldData(t)?n("li",{staticClass:"list-group-item"},[e._v("\n            "+e._s(t.geom)+"\n            "),n("span",{staticClass:"remove-list-item",on:{click:function(t){return e.updateCurrentLog("geofield",[])}}},[e._v("\n              ✕\n            ")])]):e._e()})),e._v(" "),e.isWorking?n("li",{staticClass:"list-item-group"},[n("icon-spinner")],1):e._e()],2)])],1):e._e(),e._v(" "),n("h4",[e._v("Images")]),e._v(" "),n("div",{staticClass:"form-item form-item-name form-group"},[n("button",{staticClass:"btn btn-info btn-navbar navbar-right",attrs:{disabled:!1,title:"Take picture with camera",type:"button"},on:{click:e.getPhoto}},[e._v("\n        Take picture with camera\n      ")])]),e._v(" "),n("div",{staticClass:"form-item form-item-name form-group"},[n("div",{staticClass:"input-group "},[n("label",{staticClass:"custom-file-label",attrs:{for:"customFile"}},[e._v("\n          Select photo from file\n        ")]),e._v(" "),n("input",{ref:"photo",staticClass:"custom-file-input",attrs:{type:"file"},on:{change:function(t){return e.loadPhoto(t.target.files)}}})])]),e._v(" "),n("div",{staticClass:"form-item form-item-name form-group"},e._l(e.imageUrls,(function(t){return n("img",{key:"preview-"+e.imageUrls.indexOf(t),staticClass:"preview",attrs:{src:t}})})),0)],1),e._v(" "),n("div",{staticClass:"container-fluid tab-content second",class:{selected:"SECOND"===e.tabSelected}},[n("br"),e._v(" "),n("Autocomplete",{class:{invalid:e.assetsRequired()},attrs:{objects:e.filteredAssets,searchKey:"name",searchId:"id",label:e.assetsRequired()?"Seedings must include assets!":"Add assets to be moved"},on:{results:function(t){return e.addAsset(t)}}},[n("template",{slot:"empty"},[n("div",{staticClass:"empty-slot"},[n("em",[e._v("No assets found.")]),e._v(" "),n("br"),e._v(" "),n("button",{staticClass:"btn btn-light",attrs:{type:"button",name:"button"},on:{click:e.forceSync}},[e._v("\n            Sync Now\n          ")])])])],2),e._v(" "),n("div",{staticClass:"form-item form-item-name form-group"},[n("ul",{staticClass:"list-group"},e._l(e.selectedAssets,(function(t,a){return n("li",{key:"asset-"+a+"-"+Math.floor(1e6*Math.random()),staticClass:"list-group-item"},[e._v("\n          "+e._s(t.name)+"\n          "),n("span",{staticClass:"remove-list-item",on:{click:function(n){return e.removeAsset(t)}}},[e._v("\n            ✕\n          ")])])})),0)]),e._v(" "),n("Autocomplete",{attrs:{objects:e.filteredMovementAreas,searchKey:"name",searchId:"tid",label:"Movement to"},on:{results:function(t){return e.addMovementArea(t)}}},[n("template",{slot:"empty"},[n("div",{staticClass:"empty-slot"},[n("em",[e._v("No areas found.")]),e._v(" "),n("br"),e._v(" "),n("button",{staticClass:"btn btn-light",attrs:{type:"button",name:"button"},on:{click:e.forceSync}},[e._v("\n            Sync Now\n          ")])])])],2),e._v(" "),n("div",{staticClass:"form-item form-item-name form-group"},[n("ul",{staticClass:"list-group"},e._l(e.selectedMovementAreas,(function(t,a){return n("li",{key:"log-"+a+"-"+Math.floor(1e6*Math.random()),staticClass:"list-group-item"},[e._v("\n          "+e._s(t.name)+"\n          "),n("span",{staticClass:"remove-list-item",on:{click:function(n){return e.removeMovementArea(t)}}},[e._v("\n            ✕\n          ")])])})),0)]),e._v(" "),n("router-link",{attrs:{to:{name:"edit-map"}}},[n("Map",{attrs:{id:"map",overrideStyles:{height:"90vw"},drawing:!1,options:{controls:function(e){return e.filter((function(e){return"Attribution"===e.constructor.name}))},interactions:!1},wkt:{title:"movement",wkt:e.logs[e.currentLogIndex].movement.data.geometry,color:"orange"},geojson:{title:"areas",url:e.areaGeoJSON,color:"grey"}}})],1),e._v(" "),n("br")],1)])},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},JlXC:function(e,t,n){"use strict";var a=n("MPDz");n.n(a).a},L61C:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(n("4d7F")),r=s(n("QbLZ")),o=s(n("t6MY"));function s(e){return e&&e.__esModule?e:{default:e}}var i=function(e,t){return function(n,a){if(Array.isArray(a)){var r=a.filter((function(a){return!n[e].some((function(e){return a[t]===e[t]}))}));n[e]=n[e].concat(r)}else n[e].some((function(e){return e[t]===a[t]}))||(n[e]=n[e].concat(a))}};t.default={state:{logs:[],assets:[],areas:[],units:[],categories:[],equipment:[]},mutations:{addLogs:i("logs","localID"),addAssets:i("assets","id"),addAreas:i("areas","tid"),addUnits:i("units","tid"),addCategories:i("categories","tid"),addEquipment:i("equipment","id"),updateLog:function(e,t){var n=t.props,a=void 0!==t.index?t.index:e.logs.findIndex((function(e){return e.localID===n.localID})),s=o.default.create((0,r.default)({},e.logs[a],n));e.logs.splice(a,1,s)},updateAllLogs:function(e,t){e.logs=e.logs.map((function(e){return t(e)}))},deleteLog:function(e,t){var n=t.index;e.logs.splice(n,1)},deleteAllAssets:function(e){e.assets=[]},deleteAllAreas:function(e){e.areas=[]},deleteAllUnits:function(e){e.units=[]},deleteAllCategories:function(e){e.categories=[]},deleteAllEquipment:function(e){e.equipment=[]},filterLogs:function(e,t){var n=e.logs.filter(t);e.logs=n}},actions:{initializeLog:function(e,t){var n=e.commit,s=e.dispatch,i=e.rootState,u=t.modules||[i.shell.currentModule];return new a.default((function(e,a){s("generateLogID").then((function(a){var s=o.default.create((0,r.default)({},t,{localID:a,modules:u}));n("addLogs",s),e(a)})).catch(a)}))}}}},LauP:function(e,t,n){"use strict";n.r(t);var a=n("Pg46"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},M6Kt:function(e,t,n){"use strict";var a=n("Gn6g");n.n(a).a},MPDz:function(e,t,n){},MzHl:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"login"}},[n("div",{staticClass:"input-group"},[e._m(0),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.farmosUrl,expression:"farmosUrl"}],staticClass:"form-control",attrs:{placeholder:"Enter your farmOS URL",autofocus:"",type:"url",autocomplete:"url"},domProps:{value:e.farmosUrl},on:{input:[function(t){t.target.composing||(e.farmosUrl=t.target.value)},e.checkValues]}})]),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{placeholder:"Enter your username",type:"text",autocomplete:"username"},domProps:{value:e.username},on:{input:[function(t){t.target.composing||(e.username=t.target.value)},e.checkValues]}})]),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{placeholder:"Enter your password",type:"password",autocomplete:"current-password"},domProps:{value:e.password},on:{input:[function(t){t.target.composing||(e.password=t.target.value)},e.checkValues]}})]),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"input-group login-submit"},[e.authPending?n("div",[n("icon-spinner")],1):n("button",{staticClass:"btn btn-success btn-navbar",attrs:{disabled:!this.valuesEntered,title:"Submit credentials",type:"button"},on:{click:e.submitCredentials}},[e._v("\n      Submit credentials\n    ")])]),e._v(" "),n("br"),e._v(" "),e._m(1)])},r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("https://")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Need a server? Check out "),t("a",{attrs:{href:"https://farmos.org/hosting/"}},[this._v("hosting options")]),this._v(".")])}];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},NVlx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n("dHxB")),r=f(n("x2qs")),o=f(n("qWsX")),s=f(n("ETFt")),i=f(n("hKAu")),u=f(n("iUy7")),l=f(n("RtUe")),c=f(n("0VQf")),d=f(n("jqhR"));function f(e){return e&&e.__esModule?e:{default:e}}var m=[{path:"/logs",component:a.default,children:[{path:"",name:"logs",components:{default:r.default,menubar:o.default}},{path:":id",name:"edit-log",components:{default:s.default,menubar:i.default},props:{default:!0,menubar:!0}},{path:":id/map",name:"edit-map",components:{default:u.default,menubar:l.default},props:{default:!0,menubar:!0}},{path:"filter",name:"filter-logs",components:{default:c.default,menubar:d.default}}]}];t.default=m},NYZL:function(e,t,n){"use strict";var a=n("IqgE");n.n(a).a},NzpZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"FilterLogs",props:["categories","logDisplayFilters"],methods:{updateExcludedLogType:function(e,t){t?this.$emit("removeFromExcludedTypes",e):this.$emit("addToExcludedTypes",e)},updateExcludedLogCategory:function(e,t){t?this.$emit("removeFromExcludedCategories",e):this.$emit("addToExcludedCategories",e)},setDateFilter:function(e){this.$emit("setDateFilter",e)},checkChecked:function(e){return!document.getElementById(e).checked}}}},OKhj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=h(n("YEIV")),r=h(n("gDS+")),o=h(n("uwuV")),s=h(n("zBQ/")),i=h(n("ssaN")),u=h(n("8jGb")),l=h(n("oL7M")),c=h(n("eUst")),d=h(n("X4Sr")),f=h(n("4gjd")),m=n("+t6u");function h(e){return e&&e.__esModule?e:{default:e}}t.default={name:"EditLog",components:{Autocomplete:o.default,IconExpandLess:s.default,IconExpandMore:i.default,IconSpinner:u.default,Map:l.default,ToggleCheck:c.default,SelectBox:d.default,DateAndTimeForm:f.default},data:function(){return{tabSelected:"FIRST",imageUrls:[],useLocalAreas:!1,isWorking:!1,localAreas:[],showAllCategories:!1,logTypes:{farm_observation:"Observation",farm_activity:"Activity",farm_input:"Input",farm_harvest:"Harvest",farm_seeding:"Seeding"},quantMeasures:["count","length","weight","area","volume","time","temperature","water_content","value","rating","ratio","probability"]}},props:["id","logs","areas","assets","useGeolocation","units","categories","equipment"],beforeMount:function(){this.$router.currentRoute.params.tab&&(this.tabSelected=this.$router.currentRoute.params.tab)},methods:{forceSync:function(){if(null!==localStorage.getItem("host"))return this.$store.dispatch("updateAssets"),void this.$store.dispatch("updateAreas");this.$router.push("/login")},updateCurrentLog:function(e,t){var n,o=(Date.now()/1e3).toFixed(0),s="string"==typeof t?t:(0,r.default)(t),i=(n={},(0,a.default)(n,e,{data:s,changed:o}),(0,a.default)(n,"isCachedLocally",!1),(0,a.default)(n,"wasPushedToServer",!1),n);this.$store.commit("updateLog",{index:this.currentLogIndex,props:i})},updateNewQuant:function(e,t){var n=this.logs[this.currentLogIndex].quantity.data.length;if(0===n&&this.addQuant(),"unit"===e){var a={id:t,resource:"taxonomy_term"};this.logs[this.currentLogIndex].quantity.data[n-1][e]=a}else this.logs[this.currentLogIndex].quantity.data[n-1][e]=t;var r={quantity:this.logs[this.currentLogIndex].quantity,isCachedLocally:!1,wasPushedToServer:!1};this.$store.commit("updateLog",{index:this.currentLogIndex,props:r})},addCategory:function(e){var t={id:e,resource:"taxonomy_term"},n=this.logs[this.currentLogIndex].log_category.data.concat(t);this.updateCurrentLog("log_category",n)},addEquipment:function(e){if(""!==e){var t={id:e,resource:"farm_asset"},n=this.logs[this.currentLogIndex].equipment.data.concat(t);this.updateCurrentLog("equipment",n)}},addAsset:function(e){var t={id:e,resource:"farm_asset"},n=this.logs[this.currentLogIndex].asset.data.concat(t);this.updateCurrentLog("asset",n)},addMovementArea:function(e){var t={id:e,resource:"taxonomy_term"},n=this.areas.find((function(t){return t.tid===e})).geofield[0]?this.areas.find((function(t){return t.tid===e})).geofield[0].geom:null,a=this.logs[this.currentLogIndex].movement.data.geometry,r=(0,m.mergeGeometries)([n,a]),o={area:this.logs[this.currentLogIndex].movement.data.area.concat(t),geometry:r};this.updateCurrentLog("movement",o)},addArea:function(e){if(""!==e){var t={id:e,resource:"taxonomy_term"},n=this.logs[this.currentLogIndex].area.data.concat(t);this.updateCurrentLog("area",n)}},addQuant:function(){this.logs[this.currentLogIndex].quantity.data.push({measure:"weight",value:0,unit:{id:0,resource:"taxonomy_term"},label:""})},removeAsset:function(e){var t=this.logs[this.currentLogIndex].asset.data.filter((function(t){return t.id!==e.id}));this.updateCurrentLog("asset",t)},removeArea:function(e){var t=this.logs[this.currentLogIndex].area.data.filter((function(t){return t.id!==e.tid}));this.updateCurrentLog("area",t)},removeMovementArea:function(e){var t=this.logs[this.currentLogIndex].movement.data.area.filter((function(t){return t.id!==e.tid})),n=this.logs[this.currentLogIndex].movement.data.geometry,a=null;e.geofield[0]&&(a=e.geofield[0].geom);var r={geometry:(0,m.removeGeometry)(n,a),area:t};this.updateCurrentLog("movement",r)},removeQuant:function(e){var t=this.logs[this.currentLogIndex].quantity.data;t.splice(e,1),this.updateCurrentLog("quantity",t)},removeCategory:function(e){var t=this.logs[this.currentLogIndex].log_category.data;t.splice(e,1),this.updateCurrentLog("category",t)},removeEquipment:function(e){var t=this.logs[this.currentLogIndex].equipment.data;t.splice(e,1),this.updateCurrentLog("equipment",t)},getPhoto:function(){return this.$store.dispatch("getPhotoFromCamera",this.currentLogIndex)},loadPhoto:function(e){for(var t=0;t<e.length;t+=1)this.imageUrls.push(window.URL.createObjectURL(e[t])),this.$store.dispatch("loadPhotoBlob",{file:e[t],index:this.currentLogIndex})},addLocation:function(){this.isWorking=!0,navigator.geolocation.getCurrentPosition(function(e){var t=this.logs[this.currentLogIndex].geofield.data.concat({geom:"POINT ("+e.coords.longitude+" "+e.coords.latitude+")"});this.updateCurrentLog("geofield",t),this.isWorking=!1}.bind(this),function(e){var t={message:e.message,level:"warning",show:!1};this.$store.commit("logError",t),this.isWorking=!1}.bind(this),{enableHighAccuracy:!0,timeout:5e3})},getAttached:function(e,t,n){var a=[];return t.forEach((function(t){e.forEach((function(e){t[n]===e.id&&a.push(t)}))})),a},assetsRequired:function(){return"farm_seeding"===this.logs[this.currentLogIndex].type.data&&this.selectedAssets<1},showGeofieldData:function(e){var t=this.logs[this.currentLogIndex];return t.geofield&&t.geofield.data.length>0&&!e.geom.includes("POLYGON")}},computed:{currentLogIndex:function(){var e=this,t=this.logs.findIndex((function(t){return t.localID===+e.id}));return t>=0?t:0},filteredAssets:function(){if(this.logs[this.currentLogIndex].asset){var e=this.logs[this.currentLogIndex].asset.data;return this.assets.filter((function(t){return!e.some((function(e){return t.id===e.id}))}))}return this.assets},filteredAreas:function(){if(this.logs[this.currentLogIndex].area){var e=this.logs[this.currentLogIndex].area.data;return this.areas.filter((function(t){return!e.some((function(e){return t.tid===e.id}))}))}return this.areas},filteredMovementAreas:function(){if(this.logs[this.currentLogIndex].movement.data.area){var e=this.logs[this.currentLogIndex].movement.data.area;return this.areas.filter((function(t){return!e.some((function(e){return t.tid===e.id}))}))}return this.areas},selectedAssets:function(){if(this.logs[this.currentLogIndex].asset)return this.getAttached(this.logs[this.currentLogIndex].asset.data,this.assets,"id")},selectedAreas:function(){if(this.logs[this.currentLogIndex].area)return this.getAttached(this.logs[this.currentLogIndex].area.data,this.areas,"tid")},selectedMovementAreas:function(){if(this.logs[this.currentLogIndex].movement.data.area)return this.getAttached(this.logs[this.currentLogIndex].movement.data.area,this.areas,"tid")},quantUnitNames:function(){var e=this;if(this.units.length>0&&this.logs[this.currentLogIndex].quantity.data.length>0){var t=[];return this.logs[this.currentLogIndex].quantity.data.forEach((function(n){n.unit&&e.units.forEach((function(e){parseInt(e.tid,10)===parseInt(n.unit.id,10)&&t.push(e.name)}))})),t}return[]},categoryNames:function(){var e=this;if(this.categories.length>0&&this.logs[this.currentLogIndex].log_category.data.length>0){var t=[];return this.logs[this.currentLogIndex].log_category.data.forEach((function(n){e.categories.forEach((function(e){parseInt(e.tid,10)===parseInt(n.id,10)&&t.push(e.name)}))})),t}return[]},equipmentNames:function(){var e=this;if(this.equipment.length>0&&this.logs[this.currentLogIndex].equipment&&this.logs[this.currentLogIndex].equipment.data.length>0){var t=[];return this.logs[this.currentLogIndex].equipment.data.forEach((function(n){e.equipment.forEach((function(e){parseInt(e.id,10)===parseInt(n.id,10)&&t.push(e.name)}))})),t}return[]},areaGeoJSON:function(){return localStorage.getItem("host")+"/farm/areas/geojson/all"}},watch:{useLocalAreas:function(){if(this.useLocalAreas){navigator.geolocation.getCurrentPosition(function(e){this.localAreas=this.filteredAreas.filter((function(t){return(0,m.isNearby)([e.coords.longitude,e.coords.latitude],t.geofield[0].geom,e.coords.accuracy/1e3)}))}.bind(this),function(e){var t={message:e.message,level:"warning",show:!1};this.$store.commit("logError",t)}.bind(this),{enableHighAccuracy:!0,timeout:5e3})}}}}},ONIP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n("oL7M"),o=(a=r)&&a.__esModule?a:{default:a};t.default={name:"EditMap",components:{Map:o.default},props:["logs","id","systemOfMeasurement"],computed:{areaGeoJSON:function(){return localStorage.getItem("host")+"/farm/areas/geojson/all"},currentLogIndex:function(){var e=this,t=this.logs.findIndex((function(t){return t.localID===+e.id}));return t>=0?t:0}},methods:{updateMovement:function(e){var t={movement:{data:{area:this.logs[this.currentLogIndex].movement.data.area,geometry:e},changed:(Date.now()/1e3).toFixed(0)},isCachedLocally:!1,wasPushedToServer:!1};this.$store.commit("updateLog",{index:this.currentLogIndex,props:t})}}}},OTyp:function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}})])}),[],!1,null,null,null);t.default=r.exports},OuTb:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"navbar navbar-light fixed-top"},[n("ul",{staticClass:"left-menu"},[e._t("left-menu")],2),e._v(" "),n("ul",{staticClass:"right-menu"},[e._t("right-menu"),e._v(" "),e.more?n("li",{attrs:{id:"more-trigger"},on:{click:e.openMoreMenu}},[n("icon-more-vert")],1):e._e()],2),e._v(" "),e.showMore?n("ul",{attrs:{id:"more-menu"}},[e._t("more-menu")],2):e._e()])},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},Pg46:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Autocomplete",props:["objects","searchKey","searchId","label"],data:function(){return{search:"",searchResults:[],counter:0,isOpen:!1}},methods:{openResults:function(){this.isOpen=!0},doSearch:function(e){var t=[];if(""!==e)for(var n=e.toLowerCase(),a=0;a<this.objects.length;a+=1){var r=this.objects[a];r.name.toLowerCase().includes(n)&&t.length<10&&t.push(r)}this.searchResults=t,this.search=e},selectSearchResult:function(e){""!==e&&(this.$emit("results",e),this.search="",this.doSearch(this.search))},onArrowDown:function(){this.counter<this.searchResults.length-1&&(this.counter=this.counter+1)},onArrowUp:function(e){e.preventDefault(),this.counter>0&&(this.counter=this.counter-1)},onEnter:function(){var e=this.searchResults[this.counter][this.searchId];this.selectSearchResult(e)},handleClickOutside:function(e){this.$el.contains(e.target)||(this.isOpen=!1,this.arrowCounter=-1)}},mounted:function(){document.addEventListener("click",this.handleClickOutside)},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)}}},Pi16:function(e,t,n){"use strict";var a=n("zuT/");n.n(a).a},PoNo:function(e,t,n){"use strict";n.r(t);var a=n("NzpZ"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},QNn5:function(e,t,n){"use strict";n.r(t);var a=n("gjnb"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},QYYL:function(e,t,n){"use strict";n.r(t);var a=n("o83v"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},Qsy8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=h(n("wd/R")),r=h(n("+W/w")),o=h(n("7sLs")),s=h(n("tGHH")),i=h(n("XRp1")),u=h(n("+klp")),l=h(n("tuT/")),c=h(n("OTyp")),d=h(n("HdXD")),f=h(n("Tk+X")),m=h(n("nav2"));function h(e){return e&&e.__esModule?e:{default:e}}t.default={name:"AllLogs",props:["logs","userId","assets","logDisplayFilters","areas"],components:{IconAddCircle:o.default,IconAssignment:s.default,IconAssignmentDone:i.default,IconAssignmentLate:u.default,IconCloudDone:l.default,IconCloudUpload:c.default,IconDelete:d.default,IconEdit:f.default,IconSync:m.default},methods:{showDate:function(e){return a.default.unix(e).format("MMM DD YYYY")},mapTidsToAreas:function(e){var t=this;return e.area&&this.areas.length>0?e.area.data.map((function(e){return t.areas.find((function(t){return+t.tid==+e.id}))})):[]},mapIdsToAssets:function(e){var t=this;return e.asset&&this.assets.length>0?e.asset.data.map((function(e){return t.assets.find((function(t){return+t.id==+e.id}))})):[]},getLogType:function(e){try{return(0,r.default)(e)}catch(e){return console.error(e),""}},passesFilters:function(e){var t,n,a,r=this;return!(this.logDisplayFilters.excludedTypes.includes(e.type.data)||0===e.log_category.data.length&&r.logDisplayFilters.excludedCategories.includes(-1)||e.log_category.data.some((function(e){return r.logDisplayFilters.excludedCategories.some((function(t){return+t==+e.id}))}))||(t=r.logDisplayFilters.date,n=new Date,a=void 0,"TODAY"===t&&(n.setDate(n.getDate()-1),a=n.valueOf()/1e3|0),"THIS_WEEK"===t&&(n.setDate(n.getDate()-7),a=n.valueOf()/1e3|0),"THIS_MONTH"===t&&(n.setMonth(n.getMonth()-1),a=n.valueOf()/1e3|0),"THIS_YEAR"===t&&(n.setYear(n.getYear()-1),a=n.valueOf()/1e3|0),"ALL_TIME"===t&&(a=0),!(e.timestamp.data>a)))},startNewLog:function(){var e=this,t=Math.floor(new Date/1e3).toString();this.$store.dispatch("initializeLog",{type:{data:"farm_activity",changed:t},timestamp:{data:t,changed:t}}).then((function(t){return e.$router.push({path:"/logs/"+t})}))}}}},RmFW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n("4d7F"),o=(a=r)&&a.__esModule?a:{default:a};t.default=[{version:1,onUpgrade:function(e){return new o.default((function(t,n){var a=e.target.result;try{a.createObjectStore("equipment",{keyPath:"id"}),t()}catch(e){n(e)}}))}}]},RnhZ:function(e,t,n){var a={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-SG":"zavE","./en-SG.js":"zavE","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="RnhZ"},Rrcy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(n("QbLZ")),r=d(n("jWXv")),o=d(n("rfXi")),s=d(n("vzJi")),i=d(n("mEwK")),u=d(n("8jTM")),l=d(n("t6MY")),c=n("fC+r");function d(e){return e&&e.__esModule?e:{default:e}}var f=function(){var e=localStorage.getItem("host"),t=localStorage.getItem("username"),n=localStorage.getItem("password");return(0,s.default)(e,t,n)};t.default={getters:{logFilters:function(e,t,n){return n.shell.modules.filter((function(e){return e.name===n.shell.currentModule})).reduce((function(e,t){if(!t.filters||!t.filters.log)return null;var a=void 0,r=void 0,o=void 0;return"ALL"===t.filters.log?{log_owner:a,type:r,done:o}:(a="SELF"===t.filters.log.log_owner?n.shell.user.uid:"number"==typeof t.filters.log.log_owner?t.filters.log.log_owner:void 0,r=t.filters&&t.filters.log&&Array.isArray(t.filters.log.type)?t.filters.log.type:void 0,{log_owner:a,done:o=0===t.filters.log.done||!1===t.filters.log.done?0:1===t.filters.log.done||!0===t.filters.log.done?1:void 0,type:r})}),{})}},actions:{updateAreas:function(e){var t=e.commit;return f().area.get().then((function(e){t("deleteAllAreas");var n=e.list.map((function(e){return{tid:e.tid,name:e.name,geofield:e.geofield}}));t("addAreas",n)}))},updateAssets:function(e){var t=e.commit;return f().asset.get().then((function(e){t("deleteAllAssets");var n=e.list.map((function(e){return{id:e.id,name:e.name,type:e.type}}));t("addAssets",n)}))},updateUnits:function(e){var t=e.commit;return f().term.get("farm_quantity_units").then((function(e){t("deleteAllUnits");var n=e.list.map((function(e){return{tid:e.tid,name:e.name}}));t("addUnits",n)}))},updateCategories:function(e){var t=e.commit;return f().term.get("farm_log_categories").then((function(e){t("deleteAllCategories");var n=e.list.map((function(e){return{tid:e.tid,name:e.name}}));t("addCategories",n)}))},updateEquipment:function(e){var t=e.commit;return f().asset.get().then((function(e){t("deleteAllEquipment");var n=e.list.map((function(e){return{id:e.id,name:e.name,type:e.type}})).filter((function(e){return"equipment"===e.type}));t("addEquipment",n)}))},sendLogs:function(e,t){var n=e.commit,a=e.rootState;return i.default.allSettled(t.map((function(e){var t=l.default.toServer(a.farm.logs[e]);return f().log.send(t,localStorage.getItem("token"))}))).then((function(e){var a=e.reduce((function(e,a,r){return"rejected"===a.status?e.concat({index:t[r],status:parseInt(a.reason.message.substr(-3),10),message:a.reason.response.data}):("fulfilled"===a.status&&(o=a.value,s=t[r],n("updateLog",{index:s,props:{id:o.id,remoteUri:o.uri,wasPushedToServer:!0,isReadyToSync:!1,isCachedLocally:!1}})),e);var o,s}),[]);if(a.length>0)throw new c.SyncError({responses:a})}))},getServerLogs:function(e){var t=e.commit,n=e.getters,s=e.dispatch,i=e.rootState,u=localStorage.getItem("syncDate"),l=i.farm.logs;return f().log.get(n.logFilters).then((function(e){return e.list.map((function(e){var n=(0,c.checkLog)(e,l,u),d=n.log?(0,o.default)(new r.default(n.log.modules.concat(i.shell.currentModule))):[i.shell.currentModule];if(!n.serverChange&&n.localId&&t("updateLog",{index:n.storeIndex,props:{modules:d,isCachedLocally:!1}}),n.serverChange&&n.localId){var f=(0,c.processLog)(e,n,u);t("updateLog",{index:n.storeIndex,props:(0,a.default)({},f,{modules:d})})}if(null===n.localId){var m=(0,c.processLog)(e,n,u);s("initializeLog",(0,a.default)({},m,{modules:d}))}return e.id}))})).then((function(e){var t=l.filter((function(t){return t.id&&!e.some((function(e){return t.id===e}))})).map((function(e){return e.id}));return f().log.get(t)})).then((function(e){e.list.forEach((function(e){var n=(0,c.checkLog)(e,l,u);if(n.serverChange){var a=(0,c.processLog)(e,n,u);t("updateLog",{index:n.storeIndex,props:a})}}))})).catch((function(e){throw e.response?new c.SyncError({responses:[{status:e.response.status,message:e.response.statusText}]}):new c.SyncError({responses:[{message:e}]})}))},syncAllLogs:function(e){var t=e.rootState,n=e.commit,r=e.dispatch;function o(e,a,r){return void 0!==a.isReadyToSync&&JSON.parse(a.isReadyToSync)&&!JSON.parse(a.wasPushedToServer)&&function(e,a){var r={message:"",level:"warning",show:!0};if("farm_seeding"===e.type.data){var o=t.farm.assets,s=[];if(e.asset.data.forEach((function(e){o.forEach((function(t){t.id===e.id&&"planting"===t.type&&s.push(t.id)}))})),s.length<1)return r.message="Could not sync "+e.name.data+" because seeding logs must have at least one planting asset.",n("logError",r),n("updateLog",{index:a,props:{isReadyToSync:!1}}),!1}return!0}(a,r)?e.concat(r):e}localStorage.getItem("token")?(n("updateAllLogs",(function(e){return(0,a.default)({},e,{isReadyToSync:!0})})),r("getServerLogs").then((function(){localStorage.setItem("syncDate",(Date.now()/1e3).toFixed(0));var e=t.farm.logs.reduce(o,[]);return r("sendLogs",e)})).catch((function(e){n("updateAllLogs",(function(e){return(0,a.default)({},e,{isReadyToSync:!1})}));var r="";e.responses.forEach((function(e){if(401===e.status||403===e.status||404===e.status)u.default.push("/login");else if(void 0===e.status)r+=e.message;else if(void 0===e.index)r+=e.status+" error: "+e.message;else{var n=t.farm.logs[e.index].name.data;r+='Error while syncing "'+n+'": '+e.message+" <br>"}})),""!==r&&n("logError",{message:r,errorCode:"",level:"warning",show:!0})}))):u.default.push("/login")}}}},RtUe:function(e,t,n){"use strict";n.r(t);var a=n("GuV8"),r=n("tElN");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,null,null);t.default=i.exports},SJym:function(e,t,n){"use strict";n.r(t);var a=n("WXfM"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},SLuX:function(e,t,n){"use strict";n.r(t);var a=n("FmYw"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},Sseh:function(e,t,n){"use strict";n.r(t);var a=n("rYdS"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},TbpJ:function(e,t,n){},"Tk+X":function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}}),t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})])}),[],!1,null,null,null);t.default=r.exports},UiWD:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid"},[n("br"),e._v(" "),n("h4",[e._v("Date")]),e._v(" "),n("div",{staticClass:"form-item form-group"},[n("div",{staticClass:"form-check"},[n("input",{attrs:{type:"radio",name:"date"},domProps:{value:"TODAY",checked:"TODAY"===e.logDisplayFilters.date},on:{input:function(t){return e.setDateFilter(t.target.value)}}}),e._v(" "),n("label",{class:{selected:"TODAY"===e.logDisplayFilters.date},attrs:{for:"date"},on:{click:function(t){return e.setDateFilter("TODAY")}}},[e._v("\n        Today\n      ")])]),e._v(" "),n("div",{staticClass:"form-check"},[n("input",{attrs:{type:"radio",name:"date"},domProps:{value:"THIS_WEEK",checked:"THIS_WEEK"===e.logDisplayFilters.date},on:{input:function(t){return e.setDateFilter(t.target.value)}}}),e._v(" "),n("label",{class:{selected:"THIS_WEEK"===e.logDisplayFilters.date},attrs:{for:"date"},on:{click:function(t){return e.setDateFilter("THIS_WEEK")}}},[e._v("\n        This Week\n      ")])]),e._v(" "),n("div",{staticClass:"form-check"},[n("input",{attrs:{type:"radio",name:"date"},domProps:{value:"THIS_MONTH",checked:"THIS_MONTH"===e.logDisplayFilters.date},on:{input:function(t){return e.setDateFilter(t.target.value)}}}),e._v(" "),n("label",{class:{selected:"THIS_MONTH"===e.logDisplayFilters.date},attrs:{for:"date"},on:{click:function(t){return e.setDateFilter("THIS_MONTH")}}},[e._v("\n        This Month\n      ")])]),e._v(" "),n("div",{staticClass:"form-check"},[n("input",{attrs:{type:"radio",name:"date"},domProps:{value:"THIS_YEAR",checked:"THIS_YEAR"===e.logDisplayFilters.date},on:{input:function(t){return e.setDateFilter(t.target.value)}}}),e._v(" "),n("label",{class:{selected:"THIS_YEAR"===e.logDisplayFilters.date},attrs:{for:"date"},on:{click:function(t){return e.setDateFilter("THIS_YEAR")}}},[e._v("\n        This Year\n      ")])]),e._v(" "),n("div",{staticClass:"form-check"},[n("input",{attrs:{type:"radio",name:"date"},domProps:{value:"ALL_TIME",checked:"ALL_TIME"===e.logDisplayFilters.date},on:{input:function(t){return e.setDateFilter(t.target.value)}}}),e._v(" "),n("label",{class:{selected:"ALL_TIME"===e.logDisplayFilters.date},attrs:{for:"date"},on:{click:function(t){return e.setDateFilter("ALL_TIME")}}},[e._v("\n        All Time\n      ")])])]),e._v(" "),n("h4",[e._v("Log Type")]),e._v(" "),n("div",{staticClass:"form-item form-group"},[n("div",{staticClass:"form-check"},[n("input",{attrs:{type:"checkbox",id:"type-farm-activity",name:"log-types"},domProps:{checked:!e.logDisplayFilters.excludedTypes.includes("farm_activity")},on:{input:function(t){return e.updateExcludedLogType("farm_activity",t.target.checked)}}}),e._v(" "),n("label",{class:{selected:!e.logDisplayFilters.excludedTypes.includes("farm_activity")},attrs:{for:"log-types"},on:{click:function(t){e.updateExcludedLogType("farm_activity",e.checkChecked("type-farm-activity"))}}},[e._v("\n        Activity\n      ")])]),e._v(" "),n("div",{staticClass:"form-check"},[n("input",{attrs:{type:"checkbox",id:"type-farm-harvest",name:"log-types"},domProps:{checked:!e.logDisplayFilters.excludedTypes.includes("farm_harvest")},on:{input:function(t){return e.updateExcludedLogType("farm_harvest",t.target.checked)}}}),e._v(" "),n("label",{class:{selected:!e.logDisplayFilters.excludedTypes.includes("farm_harvest")},attrs:{for:"log-types"},on:{click:function(t){e.updateExcludedLogType("farm_harvest",e.checkChecked("type-farm-harvest"))}}},[e._v("\n        Harvest\n      ")])]),e._v(" "),n("div",{staticClass:"form-check"},[n("input",{attrs:{type:"checkbox",id:"type-farm-input",name:"log-types"},domProps:{checked:!e.logDisplayFilters.excludedTypes.includes("farm_input")},on:{input:function(t){return e.updateExcludedLogType("farm_input",t.target.checked)}}}),e._v(" "),n("label",{class:{selected:!e.logDisplayFilters.excludedTypes.includes("farm_input")},attrs:{for:"log-types"},on:{click:function(t){e.updateExcludedLogType("farm_input",e.checkChecked("type-farm-input"))}}},[e._v("\n        Input\n      ")])]),e._v(" "),n("div",{staticClass:"form-check"},[n("input",{attrs:{type:"checkbox",id:"type-farm-observation",name:"log-types"},domProps:{checked:!e.logDisplayFilters.excludedTypes.includes("farm_observation")},on:{input:function(t){return e.updateExcludedLogType("farm_observation",t.target.checked)}}}),e._v(" "),n("label",{class:{selected:!e.logDisplayFilters.excludedTypes.includes("farm_observation")},attrs:{for:"log-types"},on:{click:function(t){e.updateExcludedLogType("farm_observation",e.checkChecked("type-farm-observation"))}}},[e._v("\n        Observation\n      ")])]),e._v(" "),n("div",{staticClass:"form-check"},[n("input",{attrs:{type:"checkbox",id:"type-farm-seeding",name:"log-types"},domProps:{checked:!e.logDisplayFilters.excludedTypes.includes("farm_seeding")},on:{input:function(t){return e.updateExcludedLogType("farm_seeding",t.target.checked)}}}),e._v(" "),n("label",{class:{selected:!e.logDisplayFilters.excludedTypes.includes("farm_seeding")},attrs:{for:"log-types"},on:{click:function(t){e.updateExcludedLogType("farm_seeding",e.checkChecked("type-farm-seeding"))}}},[e._v("\n        Seeding\n      ")])])]),e._v(" "),n("h4",[e._v("Log Category")]),e._v(" "),n("div",{staticClass:"form-item form-group"},[n("div",{staticClass:"form-check"},[n("input",{attrs:{type:"checkbox",id:"category-none",name:"log-categories"},domProps:{checked:!e.logDisplayFilters.excludedCategories.includes(-1)},on:{input:function(t){return e.updateExcludedLogCategory(-1,t.target.checked)}}}),e._v(" "),n("label",{class:{selected:!e.logDisplayFilters.excludedCategories.includes(-1)},attrs:{for:"log-categories"},on:{click:function(t){e.updateExcludedLogCategory(-1,e.checkChecked("category-none"))}}},[e._v("\n        No Category\n      ")])]),e._v(" "),e._l(e.categories,(function(t){return n("div",{staticClass:"form-check"},[n("input",{attrs:{type:"checkbox",id:"category-"+t.tid,name:"log-categories"},domProps:{checked:!e.logDisplayFilters.excludedCategories.includes(t.tid)},on:{input:function(n){return e.updateExcludedLogCategory(t.tid,n.target.checked)}}}),e._v(" "),n("label",{class:{selected:!e.logDisplayFilters.excludedCategories.includes(t.tid)},attrs:{for:"log-categories"},on:{click:function(n){e.updateExcludedLogCategory(t.tid,e.checkChecked("category-"+t.tid))}}},[e._v("\n        "+e._s(t.name)+"\n      ")])])}))],2)])},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},Vq29:function(e,t,n){"use strict";n.r(t);var a=n("Blcz"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},Vtdi:function(e,t,n){"use strict";n("27D/");var a=o(n("+gRR")),r=o(n("YMwY"));function o(e){return e&&e.__esModule?e:{default:e}}(0,a.default)("#app",[r.default]),"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/service-worker.js")}))},WICp:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"card-group"},[e.logs.length<1?n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("h4",{staticClass:"card-title"},[e._v("Let's Get Started!")]),e._v(" "),n("p",{staticClass:"card-text"},[e._v("\n          You don't have any logs to display yet. Logs are records of events\n          in farmOS. You can add some by clicking the "),n("IconAddCircle",{staticClass:"inline-svg"}),e._v("\n          icon below, or you can get uncompleted tasks from the server by\n          clicking the "),n("IconCloudUpload",{staticClass:"inline-svg"}),e._v(" icon above.\n        ")],1)])]):e._e(),e._v(" "),e._l(e.logs,(function(t,a){return e.logs.length>0&&e.passesFilters(t)?n("div",{key:"card-"+e.logs.indexOf(t),staticClass:"card"},[n("router-link",{attrs:{to:{path:"/logs/"+t.localID}}},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-row-1"},[t.done.data?n("icon-assignment-done",{staticClass:"assignment done"}):e._e(),e._v(" "),!t.done.data&&1e3*t.timestamp.data>(new Date).valueOf()?n("icon-assignment",{staticClass:"assignment"}):e._e(),e._v(" "),!t.done.data&&1e3*t.timestamp.data<(new Date).valueOf()?n("icon-assignment-late",{staticClass:"assignment late"}):e._e(),e._v(" "),n("div",{staticClass:"log-name"},[n("h5",[e._v(e._s(t.name.data))])]),e._v(" "),t.wasPushedToServer?n("icon-cloud-done",{staticClass:"sync-status"}):t.isReadyToSync?n("div",{staticClass:"spin sync-status",attrs:{"aria-hidden":"true"}},[n("icon-sync")],1):n("icon-cloud-upload",{staticClass:"sync-status"})],1),e._v(" "),n("div",{staticClass:"card-row-2"},[n("p",[e._v(e._s(t.notes.data))])]),e._v(" "),n("div",{staticClass:"card-row-3"},[n("div",{staticClass:"date-and-type"},[n("span",{staticClass:"log-type"},[e._v(e._s(e.getLogType(t.type.data).toUpperCase()))]),e._v(" "),n("span",[e._v(e._s(e.showDate(t.timestamp.data)))])]),e._v(" "),n("div",{staticClass:"tags"},[e._l(e.mapTidsToAreas(t),(function(t){return n("span",{staticClass:"tag tag-area"},[e._v("\n                "+e._s(t.name)+"\n              ")])})),e._v(" "),e._l(e.mapIdsToAssets(t),(function(t){return n("span",{staticClass:"tag tag-asset"},[e._v("\n                "+e._s(t.name)+"\n              ")])}))],2)])])])],1):e._e()}))],2),e._v(" "),n("div",{staticClass:"add-circle",on:{click:e.startNewLog}},[n("div",{staticClass:"background-circle"}),e._v(" "),n("icon-add-circle")],1)])},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},WWDh:function(e,t,n){},WXfM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["label","labelPosition","checked"]}},Wcwp:function(e,t,n){},X4Sr:function(e,t,n){"use strict";n.r(t);var a=n("2mNX"),r=n("Sseh");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("JlXC");var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,"7c880edf",null);t.default=i.exports},"XKk/":function(e,t,n){"use strict";var a=n("cXsh");n.n(a).a},XRp1:function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"}})])}),[],!1,null,null,null);t.default=r.exports},Y4wU:function(e,t,n){"use strict";n.r(t);var a=n("vR1B"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},YMwY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(n("cC/z"));function r(e){return e&&e.__esModule?e:{default:e}}var o=(0,r(n("6JTb")).default)(a.default);t.default=o},ZTW0:function(e,t,n){"use strict";n.r(t);var a=n("MzHl"),r=n("6nSO");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("9jqQ");var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,"3634e6e8",null);t.default=i.exports},ZZju:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("wkee")),r=o(n("8HxT"));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:"AllLogsMenuBar",components:{MenuBar:a.default,IconArrowBack:r.default},data:function(){return{showMore:!1}},methods:{resetDisplayFilters:function(){this.$emit("resetDisplayFilters")}}}},aAIx:function(e,t,n){"use strict";var a=n("kmPS");n.n(a).a},"aG/g":function(e,t,n){"use strict";n.r(t);var a=n("6NWd"),r=n("Y4wU");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("aAIx");var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,"463693a8",null);t.default=i.exports},b0Aw:function(e,t,n){"use strict";var a=n("7jTW");n.n(a).a},"cC/z":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("NVlx")),r=o(n("Ffyi"));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:"my-logs",drawer:r.default,filters:{log:{log_owner:"SELF",type:["farm_activity","farm_observation","farm_harvest","farm_input","farm_seeding"],done:!1}},routes:a.default}},cXsh:function(e,t,n){},cvQL:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("menu-bar",{scopedSlots:e._u([{key:"left-menu",fn:function(){return[n("li",{on:{click:function(t){return e.$emit("toggleDrawer")}}},[n("icon-menu")],1),e._v(" "),n("li",[e._v("My Logs")])]},proxy:!0},{key:"right-menu",fn:function(){return[n("router-link",{staticClass:"filter",attrs:{to:{name:"filter-logs"},tag:"li"}},[n("icon-filter")],1),e._v(" "),n("li",{on:{click:function(t){return e.$emit("syncAll")}}},[n("icon-cloud-upload")],1)]},proxy:!0},{key:"more-menu",fn:function(){return[n("li",{on:{click:function(t){return e.$emit("syncAll")}}},[e._v("Sync all logs")]),e._v(" "),n("router-link",{staticClass:"filter",attrs:{to:{name:"filter-logs"},tag:"li"}},[e._v("\n      Filter logs\n    ")])]},proxy:!0}])})},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},dHxB:function(e,t,n){"use strict";n.r(t);var a=n("5BCv"),r=n("QYYL");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("XKk/");var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,"3038dde2",null);t.default=i.exports},duu2:function(e,t,n){"use strict";n.r(t);var a=n("pUgF"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},eUst:function(e,t,n){"use strict";n.r(t);var a=n("eosD"),r=n("SJym");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("M6Kt");var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,"0d2f6d4e",null);t.default=i.exports},eWlR:function(e,t,n){},efym:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n("4d7F"),o=(a=r)&&a.__esModule?a:{default:a};t.default=[{version:1,onUpgrade:function(e){return new o.default((function(t,n){var a=e.target.result;try{a.createObjectStore("categories",{keyPath:"tid"}),t()}catch(e){n(e)}}))}}]},enu1:function(e,t,n){"use strict";n.r(t);var a=n("Qsy8"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},eosD:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.label&&"before"===e.labelPosition?n("label",[e._v(e._s(e.label)+" ")]):e._e(),e._v(" "),n("input",{staticClass:"toggle-check",attrs:{type:"checkbox"},domProps:{checked:e.checked},on:{input:function(t){return e.$emit("input",t.target.checked)}}}),e._v(" "),e.label&&"after"===e.labelPosition?n("label",[e._v(e._s(e.label)+" ")]):e._e()])},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},f8sa:function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}})])}),[],!1,null,null,null);t.default=r.exports},"fC+r":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncError=void 0;var a=c(n("GQeE")),r=c(n("QbLZ")),o=c(n("Yz+Y")),s=c(n("iCc5")),i=c(n("FYw3")),u=c(n("mRg0"));t.checkLog=function(e,t,n){var a={localId:null,storeIndex:null,localChange:!0,serverChange:!1,log:null};return t.forEach((function(t,r){t.id&&t.id===e.id&&(a.localId=t.localID,a.storeIndex=r,!0===JSON.parse(t.wasPushedToServer)?a.localChange=!1:a.log=t,+e.changed>+n&&(a.serverChange=!0))})),a},t.processLog=function(e,t,n){if(null===t.localId)return l.default.fromServer((0,r.default)({},e,{wasPushedToServer:!0,isReadyToSync:!1,done:1===parseInt(e.done,10)}));if(!t.localChange&&t.serverChange)return l.default.fromServer((0,r.default)({},e,{wasPushedToServer:!0,isReadyToSync:!1,localID:t.localId,done:1===parseInt(e.done,10)}));var o=t.log,s={},i={},u=l.default.fromServer(e);return(0,a.default)(o).forEach((function(e){o[e].changed&&null!==o[e].changed&&(+o[e].changed<+n?s[e]=u[e]:i[e]=o[e])})),l.default.toStore((0,r.default)({},i,s,{wasPushedToServer:!1,localID:t.localId,id:e.id,done:{changed:Math.floor(Date.now()/1e3),data:1==+e.done},isReadyToSync:!0}))};var l=c(n("t6MY"));function c(e){return e&&e.__esModule?e:{default:e}}t.SyncError=function(e){function t(){var e,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).responses,a=void 0===n?[]:n;(0,s.default)(this,t);for(var r=arguments.length,u=Array(r>1?r-1:0),l=1;l<r;l++)u[l-1]=arguments[l];var c=(0,i.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(u)));return c.name="SyncError",c.responses=a,c}return(0,u.default)(t,e),t}(Error)},fDWo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n("4d7F"),o=(a=r)&&a.__esModule?a:{default:a};t.default=[{version:1,onUpgrade:function(e){return new o.default((function(t,n){var a=e.target.result;try{a.createObjectStore("assets",{keyPath:"id"}),t()}catch(e){n(e)}}))}}]},"fV+d":function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(e,t){return(0,t._c)("ul",{staticClass:"row list-group drawer"},[t._t("default")],2)}),[],!0,null,"5eaf9a68",null);t.default=r.exports},g553:function(e,t,n){"use strict";var a=function(){var e=this.$createElement,t=this._self._c||e;return t("drawer-list",[t("router-link",{attrs:{to:{name:"logs"}}},[t("drawer-list-item",[this._v("My Logs")])],1),this._v(" "),t("drawer-list-item",{on:{click:this.openNewLog}},[this._v("New Log")])],1)},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},gjnb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("L2JU");t.default={name:"Map",data:function(){return{map:{},layers:{wkt:null,geojson:null,mapbox:null},defaultStyles:{height:"100vw"}}},props:{id:String,overrideStyles:Object,drawing:Boolean,options:{type:Object,controls:[Boolean,Array,Function],interactions:[Boolean,Array,Function],units:String,default:function(){return{controls:!0,interactions:!0,units:"us"}}},wkt:{title:String,wkt:String,color:String,visible:Boolean},geojson:{title:String,url:String,color:String,visible:Boolean}},computed:(0,a.mapState)({mapboxAPIKey:function(e){return e.shell.mapboxAPIKey}}),mounted:function(){var e=this;if(this.map=window.farmOS.map.create(this.id,this.options),this.geojson.url&&(this.layers.geojson=this.map.addLayer("geojson",this.geojson)),!this.drawing&&this.wkt.wkt&&"GEOMETRYCOLLECTION EMPTY"!==this.wkt.wkt&&(this.layers.wkt=this.map.addLayer("wkt",this.wkt),this.map.zoomToLayer(this.layers.wkt)),!this.geojson.url||this.wkt.wkt&&"GEOMETRYCOLLECTION EMPTY"!==this.wkt.wkt||this.layers.geojson.getSource().once("change",(function(){e.map.zoomToVectors()})),this.drawing&&(this.wkt.wkt&&"GEOMETRYCOLLECTION EMPTY"!==this.wkt.wkt?(this.layers.wkt=this.map.addLayer("wkt",this.wkt),this.map.enableDraw({layer:this.layers.wkt}),this.map.zoomToLayer(this.layers.wkt)):this.map.enableDraw(),this.map.edit.wktOn("drawend",(function(t){e.$emit("update-wkt",t)})),this.map.edit.wktOn("modifyend",(function(t){e.$emit("update-wkt",t)})),this.map.edit.wktOn("translateend",(function(t){e.$emit("update-wkt",t)})),this.map.edit.wktOn("delete",(function(t){e.$emit("update-wkt",t)}))),this.mapboxAPIKey){var t={title:"MapBox Satellite",url:"https://api.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}.png?access_token="+this.mapboxAPIKey,group:"Base layers",base:!0,visible:!0};this.layers.mapbox=this.map.addLayer("xyz",t)}},beforeDestroy:function(){window.farmOS.map.destroy(this.id),this.map=null},watch:{wkt:function(e){this.drawing||(this.layers.wkt&&(this.map.map.removeLayer(this.layers.wkt),this.layers.wkt=null),this.wkt.wkt&&"GEOMETRYCOLLECTION EMPTY"!==this.wkt.wkt?(this.layers.wkt=this.map.addLayer("wkt",e),this.map.zoomToLayer(this.layers.wkt)):this.map.zoomToVectors())}}}},hKAu:function(e,t,n){"use strict";n.r(t);var a=n("8PM6"),r=n("Vq29");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,null,null);t.default=i.exports},hcZS:function(e,t,n){"use strict";var a=n("AzjE");n.n(a).a},hdPq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n("4d7F"),o=(a=r)&&a.__esModule?a:{default:a};t.default=[{version:1,onUpgrade:function(e){return new o.default((function(t,n){var a=e.target.result;try{a.createObjectStore("units",{keyPath:"tid"}),t()}catch(e){n(e)}}))}}]},i1sA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n("4d7F"),o=(a=r)&&a.__esModule?a:{default:a};t.default={actions:{getPhotoFromCamera:function(e,t){var n=e.commit,a=e.rootState;new o.default((function(e,t){var n={quality:50,destinationType:Camera.DestinationType.DATA_URL};navigator.camera.getPicture((function(t){e(t)}),(function(e){t(e)}),n)})).then((function(e){var r=a.farm.logs[t],o="data:image/jpeg;base64,"+e,s=(Date.now()/1e3).toFixed(0),i={images:{data:r.images.data.concat(o),changed:s},isCachedLocally:!1,wasPushedToServer:!1};n("updateLog",{index:t,props:i})}),(function(e){}))},loadPhotoBlob:function(e,t){var n=e.commit,a=e.rootState,r=t.file,s=t.index,i=a.farm.logs[s],u=(Date.now()/1e3).toFixed(0);(function(e){return new o.default((function(t,n){var a=new FileReader;a.onloadend=function(){return t(a.result)},a.onerror=function(){return n(a.error)},a.readAsDataURL(e)}))})(r).then((function(e){var t={images:{data:i.images.data.concat(e),changed:u},isCachedLocally:!1,wasPushedToServer:!1};n("updateLog",{index:s,props:t})}))}}}},iUy7:function(e,t,n){"use strict";n.r(t);var a=n("5FMb"),r=n("+mU5");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,"a1dead7e",null);t.default=i.exports},iVBF:function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",width:"24",height:"24","xml:space":"preserve"}},[t("polygon",{attrs:{points:"222.949,302.964 222.949,512 289.051,467.933 289.051,302.964 \t\t"}}),this._v(" "),t("rect",{attrs:{x:"2.612",width:"506.776",height:"49.576"}}),this._v(" "),t("polygon",{attrs:{points:"19.137,82.627 206.424,269.913 305.576,269.913 492.863,82.627 \t\t"}})])}),[],!1,null,null,null);t.default=r.exports},jHBc:function(e,t,n){},jqhR:function(e,t,n){"use strict";n.r(t);var a=n("mP8r"),r=n("oTXw");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,null,null);t.default=i.exports},kS0b:function(e,t,n){"use strict";n.r(t);var a=n("pvwr"),r=n("SLuX");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("8IFN");var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,"9489da38",null);t.default=i.exports},kiQV:function(e){e.exports=JSON.parse('{"name":"farmos-client","version":"0.4.10","description":"Client app for farmOS!","author":"farmOS team","license":"GPLv3","private":true,"scripts":{"dev":"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js","start":"npm run dev","lint":"eslint --color --ext .js,.vue src test/unit | less -R","lint-files":"node --eval \'process.argv.reduce((acc, cur) => `${acc} ${cur}`, ``)\' | eslint --color","build:web":"node build/build.js","build:native":"node build/build.js --native","test":"mocha-webpack --webpack-config build/webpack.test.conf.js --require test-setup.js src/**/*.test.js --watch"},"dependencies":{"@turf/turf":"^5.1.6","cordova-android":"^8.1.0","cordova-ios":"^4.5.5","cordova-plugin-camera":"^4.1.0","cordova-plugin-file":"^6.0.2","cordova-plugin-geolocation":"^4.0.2","cordova-plugin-ios-camera-permissions":"^1.2.0","cordova-plugin-network-information":"^2.0.2","cordova-plugin-splashscreen":"^5.0.3","cordova-plugin-whitelist":"^1.3.4","core-js-pure":"^3.4.7","farmOS-map":"github:farmOS/farmOS-map#22c2ca2","farmos":"0.0.6","moment":"^2.24.0","vue":"^2.6.10","vue-router":"^3.1.3","vuex":"^3.1.2","wellknown":"^0.5.0"},"devDependencies":{"@vue/test-utils":"^1.0.0-beta.30","autoprefixer":"^7.1.2","babel-core":"^6.26.3","babel-eslint":"^8.2.6","babel-helper-vue-jsx-merge-props":"^2.0.3","babel-loader":"^7.1.5","babel-plugin-syntax-jsx":"^6.18.0","babel-plugin-transform-runtime":"^6.22.0","babel-plugin-transform-vue-jsx":"^3.7.0","babel-preset-env":"^1.7.0","babel-preset-stage-2":"^6.22.0","chalk":"^2.4.2","commander":"^2.20.3","copy-webpack-plugin":"^4.6.0","css-loader":"^3.2.1","eslint":"^4.19.1","eslint-config-airbnb-base":"^13.2.0","eslint-friendly-formatter":"^3.0.0","eslint-import-resolver-webpack":"^0.10.1","eslint-loader":"^1.7.1","eslint-plugin-import":"^2.18.2","eslint-plugin-node":"^5.2.0","eslint-plugin-promise":"^3.8.0","eslint-plugin-vue":"^4.7.1","expect":"^24.9.0","file-loader":"^1.1.11","friendly-errors-webpack-plugin":"^1.7.0","html-webpack-plugin":"^3.2.0","jsdom":"^15.2.1","jsdom-global":"^3.0.2","mini-css-extract-plugin":"^0.5.0","mocha":"^6.2.2","mocha-webpack":"^2.0.0-beta.0","node-notifier":"^5.4.3","optimize-css-assets-webpack-plugin":"^5.0.3","ora":"^1.2.0","portfinder":"^1.0.25","postcss-import":"^11.1.0","postcss-loader":"^2.1.6","postcss-url":"^7.3.2","rimraf":"^2.7.1","semver":"^5.7.1","shelljs":"^0.7.6","url-loader":"^1.1.2","vue-loader":"^15.7.2","vue-style-loader":"^3.0.1","vue-template-compiler":"^2.6.10","webpack":"^4.41.2","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.10","webpack-dev-server":"^3.9.0","webpack-merge":"^4.2.2","webpack-node-externals":"^1.7.2","workbox-webpack-plugin":"^4.3.1"},"engines":{"node":">= 6.0.0","npm":">= 3.0.0"},"browserslist":["> 1%","last 2 versions","not ie <= 8"],"cordova":{"plugins":{"cordova-plugin-whitelist":{},"cordova-plugin-network-information":{},"cordova-plugin-camera":{"CAMERA_USAGE_DESCRIPTION":"farmOS would like access to the camera","PHOTOLIBRARY_USAGE_DESCRIPTION":"farmOS would like access to the camera"},"cordova-plugin-ios-camera-permissions":{"CAMERA_USAGE_DESCRIPTION":"This app needs camera access","MICROPHONE_USAGE_DESCRIPTION":"This app needs microphone access","PHOTOLIBRARY_ADD_USAGE_DESCRIPTION":"This app needs write-access to photo library","PHOTOLIBRARY_USAGE_DESCRIPTION":"This app needs read/write-access photo library access"},"cordova-plugin-file":{},"cordova-plugin-geolocation":{},"cordova-plugin-splashscreen":{}},"platforms":["ios","android"]}}')},kmPS:function(e,t,n){},mP8r:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("menu-bar",{scopedSlots:e._u([{key:"left-menu",fn:function(){return[n("router-link",{attrs:{to:{name:"logs"},tag:"li"}},[n("icon-arrow-back")],1),e._v(" "),n("li",[e._v("Log Filters")])]},proxy:!0},{key:"more-menu",fn:function(){return[n("li",{on:{click:e.resetDisplayFilters}},[e._v("Reset filters")])]},proxy:!0}])})},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},nav2:function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}}),t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})])}),[],!1,null,null,null);t.default=r.exports},o83v:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n("gDS+"),o=(a=r)&&a.__esModule?a:{default:a};t.default={name:"Logs",data:function(){return{showDeleteDialog:!1,logIndexToDelete:null,logDisplayFilters:{date:"ALL_TIME",excludedTypes:[],excludedCategories:[]}}},props:["useGeolocation","userId","systemOfMeasurement","logs","areas","assets","units","categories","equipment"],created:function(){this.clearDisplayFilters(),this.loadCachedDisplayFilters()},methods:{openDeleteDialog:function(e){this.showDeleteDialog=!0,this.logIndexToDelete=e},cancelDelete:function(){this.showDeleteDialog=!1},confirmDelete:function(){var e=this.logs[this.logIndexToDelete],t={index:this.logIndexToDelete,localID:e.localID,id:e.id,remoteUri:e.remoteUri,name:e.name.data,type:e.type.data};this.$store.commit("deleteLog",t),this.showDeleteDialog=!1,"edit-log"===this.$route.name&&this.$router.push({path:"/logs"})},syncAll:function(){this.$store.dispatch("syncAllLogs"),this.$store.dispatch("updateAssets"),this.$store.dispatch("updateAreas"),this.$store.dispatch("updateUnits"),this.$store.dispatch("updateCategories"),this.$store.dispatch("updateEquipment")},addToExcludedTypes:function(e){var t=this.logDisplayFilters.excludedTypes.concat(e);this.logDisplayFilters.excludedTypes=t,localStorage.setItem("excludedTypes",(0,o.default)(t))},removeFromExcludedTypes:function(e){var t=this.logDisplayFilters.excludedTypes.filter((function(t){return e!==t}));this.logDisplayFilters.excludedTypes=t,localStorage.setItem("excludedTypes",(0,o.default)(t))},addToExcludedCategories:function(e){var t=this.logDisplayFilters.excludedCategories.concat(e);this.logDisplayFilters.excludedCategories=t,localStorage.setItem("excludedCategories",(0,o.default)(t))},removeFromExcludedCategories:function(e){var t=this.logDisplayFilters.excludedCategories.filter((function(t){return e!==t}));this.logDisplayFilters.excludedCategories=t,localStorage.setItem("excludedCategories",(0,o.default)(t))},setDateFilter:function(e){this.logDisplayFilters.date=e,localStorage.setItem("dateFilter",e)},clearDisplayFilters:function(){this.logDisplayFilters={date:"ALL_TIME",excludedTypes:[],excludedCategories:[]}},loadCachedDisplayFilters:function(){var e=this,t=JSON.parse(localStorage.getItem("excludedTypes")),n=JSON.parse(localStorage.getItem("excludedCategories")),a=localStorage.getItem("dateFilter");null!==t&&t.forEach((function(t){return e.addToExcludedTypes(t)})),null!==n&&n.forEach((function(t){return e.addToExcludedCategories(t)})),null!==a&&this.setDateFilter(a)},resetDisplayFilters:function(){this.clearDisplayFilters(),localStorage.setItem("excludedTypes","[]"),localStorage.setItem("excludedCategories","[]"),localStorage.setItem("dateFilter","ALL_TIME")}}}},oL7M:function(e,t,n){"use strict";n.r(t);var a=n("6Luc"),r=n("QNn5");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,null,null);t.default=i.exports},oTXw:function(e,t,n){"use strict";n.r(t);var a=n("ZZju"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},oi19:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-item form-item-name form-group"},[n("label",{staticClass:"control-label",attrs:{for:"search"}},[e._v(e._s(e.label))]),e._v(" "),n("input",{staticClass:"form-control",attrs:{placeholder:"Enter text to search",type:"text"},domProps:{value:e.search},on:{focus:e.openResults,input:function(t){return e.doSearch(t.target.value)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.onArrowDown(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.onArrowUp(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter(t)}]}}),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.isOpen&&e.search.length>0,expression:"isOpen && search.length > 0"}],staticClass:"list-group search-results"},[0===e.searchResults.length?n("li",{staticClass:"list-group-item empty"},[e._t("empty",[e._v("No Results")])],2):e._l(e.searchResults,(function(t,a){return n("li",{key:"result-"+a+"-"+Math.floor(1e6*Math.random()),staticClass:"list-group-item",class:{"is-active":a===e.counter},on:{click:function(n){return e.selectSearchResult(t[e.searchId])}}},[e._v("\n      "+e._s(t[e.searchKey])+"\n    ")])}))],2)])},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},oqYx:function(e,t,n){"use strict";n.r(t);n("Gq5i");var a=n("KHd+"),r=Object(a.a)({},(function(e,t){return(0,t._c)("li",{staticClass:"list-group-item",class:{clickable:void 0===t.props.clickable||t.props.clickable}},[t._t("default")],2)}),[],!0,null,"b1c4e8a4",null);t.default=r.exports},pUgF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("fV+d")),r=o(n("oqYx"));function o(e){return e&&e.__esModule?e:{default:e}}t.default={components:{DrawerList:a.default,DrawerListItem:r.default},methods:{openNewLog:function(){var e=this,t=Math.floor(new Date/1e3).toString();this.$store.dispatch("initializeLog",{type:{data:"farm_activity",changed:t},timestamp:{data:t,changed:t},modules:["my-logs"]}).then((function(t){return e.$router.push({path:"/logs/"+t})}))}}}},pvwr:function(e,t,n){"use strict";var a=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container-fluid"},[this._m(0),this._v(" "),t("div",{staticClass:"row justify-content-sm-center"},[t("div",{staticClass:"col col-sm-auto",attrs:{id:"go-back"}},[t("button",{staticClass:"btn btn-lg btn-success",attrs:{type:"button",name:"button"},on:{click:this.goBack}},[this._v("\n        Go Back\n      ")])]),this._v(" "),t("div",{staticClass:"col col-sm-auto"},[t("button",{staticClass:"btn btn-lg btn-primary",attrs:{type:"button",name:"button"},on:{click:this.logout}},[this._v("\n        Logout\n      ")])])])])},r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row",attrs:{id:"first-row"}},[t("div",{staticClass:"col"},[t("div",{staticClass:"card text-primary border-primary mb-3"},[t("div",{staticClass:"card-body"},[t("h4",{staticClass:"card-title"},[this._v("WARNING!")]),this._v(" "),t("p",{staticClass:"card-text"},[this._v("\n            Logging out will permanently delete all logs stored on this device.\n            You will not be able to recover logs which have not been synced with\n            your farmOS server. Go back to sync any unsaved logs, or proceed to\n            logout and clear all data from this device.\n          ")])])])])])}];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},qF9E:function(e,t,n){"use strict";var a=n("Wcwp");n.n(a).a},qWsX:function(e,t,n){"use strict";n.r(t);var a=n("cvQL"),r=n("FhkT");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("7faE");var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,"07c5a29f",null);t.default=i.exports},rYdS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{id:String,selected:Boolean,label:String,small:Boolean},methods:{checkChecked:function(e){return!document.getElementById(this.id).checked}}}},sXfw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n("QbLZ"),o=(a=r)&&a.__esModule?a:{default:a};t.default={state:{errors:[],user:{name:"",email:"",uid:null,isLoggedIn:!1},farmInfo:{name:"",url:""},systemOfMeasurement:"metric",currentModule:"",modules:[],mapboxAPIKey:"",settings:{useGeolocation:!0}},mutations:{logError:function(e,t){e.errors=e.errors.concat([t])},dismissError:function(e,t){var n=(0,o.default)({},e.errors[t],{show:!1});e.errors.splice(t,1,n)},changeUsername:function(e,t){e.user.name=t},changeEmail:function(e,t){e.user.email=t},changeUid:function(e,t){e.user.uid=t},changeFarmName:function(e,t){e.farmInfo.name=t},changeFarmUrl:function(e,t){e.farmInfo.url=t},changeMapboxAPIKey:function(e,t){e.mapboxAPIKey=t},changeSystemOfMeasurement:function(e,t){e.systemOfMeasurement=t},setLoginStatus:function(e,t){e.user.isLoggedIn=t},setUseGeolocation:function(e,t){e.settings.useGeolocation=t},updateModule:function(e,t){var n=e.modules.findIndex((function(e){return e.name===t.name}));n>-1?e.modules.splice(n,1,t):e.modules.push(t)},setCurrentModule:function(e,t){e.currentModule=t}}}},sdek:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(n("QbLZ")),r=u(n("sk9p")),o=u(n("t6MY")),s=n("CN6I"),i=u(n("5FK+"));function u(e){return e&&e.__esModule?e:{default:e}}var l=(0,r.default)(i.default.stores,6),c=l[0],d=l[1],f=l[2],m=l[3],h=l[4],g=l[5];t.default={actions:{createCachedLog:function(e,t){var n=e.commit,a=o.default.toIdb(t);(0,s.openDatabase)().then((function(e){return(0,s.saveRecord)(e,c.name,a)})).then((function(){return n("updateLog",{props:{localID:t.localID,isCachedLocally:!0}})})).catch(console.error)},loadCachedLogs:function(e){var t=e.commit,n=e.getters,r=e.rootState,i=n.logFilters,u=function(e){var t=void 0;if(null===i)t=!1;else{var n=i.type,a=i.done,o=void 0===i.log_owner||0===e.log_owner.data.length||e.log_owner.data.some((function(e){return+e.id==+i.log_owner})),s=void 0===n||n.includes(e.type.data),u=void 0===a||e.done.data===!!a;t=o&&s&&u}return!!e.modules&&e.modules.includes(r.shell.currentModule)||t};(0,s.openDatabase)().then((function(e){return(0,s.getRecords)(e,c.name,u)})).then((function(e){var n=e.map((function(e){return o.default.create((0,a.default)({},e,{isCachedLocally:!0}))}));t("addLogs",n)})).catch(console.error)},generateLogID:function(){return(0,s.openDatabase)().then((function(e){return(0,s.generateLocalID)(e,c.name)})).catch(console.error)},updateCachedLog:function(e,t){var n=e.commit,r=e.rootState,i=t.props,u=void 0!==t.index?t.index:r.farm.logs.findIndex((function(e){return e.localID===i.localID})),l=o.default.toIdb((0,a.default)({},r.farm.logs[u],i));(0,s.openDatabase)().then((function(e){return(0,s.saveRecord)(e,c.name,l)})).then((function(e){return n("updateLog",{index:u,props:{isCachedLocally:!0,localID:e}})}))},deleteCachedLog:function(e,t){var n=t.localID;(0,s.openDatabase)().then((function(e){return(0,s.deleteRecord)(e,c.name,n)})).catch(console.error)},deleteAllCachedLogs:function(){(0,s.openDatabase)().then((function(e){return(0,s.clearStore)(e,c.name)})).catch(console.error)},createCachedAsset:function(e,t){(0,s.openDatabase)().then((function(e){return(0,s.saveRecord)(e,d.name,t)})).catch(console.error)},updateCachedAsset:function(e,t){(0,s.openDatabase)().then((function(e){return(0,s.saveRecord)(e,d.name,t)})).catch(console.error)},deleteAllCachedAssets:function(){(0,s.openDatabase)().then((function(e){return(0,s.clearStore)(e,d.name)})).catch(console.error)},loadCachedAssets:function(e){var t=e.commit;(0,s.openDatabase)().then((function(e){return(0,s.getRecords)(e,d.name)})).then((function(e){t("addAssets",e)})).catch(console.error)},createCachedArea:function(e,t){(0,s.openDatabase)().then((function(e){return(0,s.saveRecord)(e,f.name,t)})).catch(console.error)},updateCachedArea:function(e,t){(0,s.openDatabase)().then((function(e){return(0,s.saveRecord)(e,f.name,t)})).catch(console.error)},deleteAllCachedAreas:function(){(0,s.openDatabase)().then((function(e){return(0,s.clearStore)(e,f.name)})).catch(console.error)},loadCachedAreas:function(e){var t=e.commit;(0,s.openDatabase)().then((function(e){return(0,s.getRecords)(e,f.name)})).then((function(e){t("addAreas",e)})).catch(console.error)},createCachedUnit:function(e,t){(0,s.openDatabase)().then((function(e){return(0,s.saveRecord)(e,m.name,t)})).catch(console.error)},updateCachedUnit:function(e,t){(0,s.openDatabase)().then((function(e){return(0,s.saveRecord)(e,m.name,t)})).catch(console.error)},deleteAllCachedUnits:function(){(0,s.openDatabase)().then((function(e){return(0,s.clearStore)(e,m.name)})).catch(console.error)},loadCachedUnits:function(e){var t=e.commit;(0,s.openDatabase)().then((function(e){return(0,s.getRecords)(e,m.name)})).then((function(e){t("addUnits",e)})).catch(console.error)},createCachedCategory:function(e,t){(0,s.openDatabase)().then((function(e){return(0,s.saveRecord)(e,h.name,t)})).catch(console.error)},updateCachedCategory:function(e,t){(0,s.openDatabase)().then((function(e){return(0,s.saveRecord)(e,h.name,t)})).catch(console.error)},deleteAllCachedCategories:function(){(0,s.openDatabase)().then((function(e){return(0,s.clearStore)(e,h.name)})).catch(console.error)},loadCachedCategories:function(e){var t=e.commit;(0,s.openDatabase)().then((function(e){return(0,s.getRecords)(e,h.name)})).then((function(e){t("addCategories",e)})).catch(console.error)},createCachedEquipment:function(e,t){(0,s.openDatabase)().then((function(e){return(0,s.saveRecord)(e,g.name,t)})).catch(console.error)},updateCachedEquipment:function(e,t){(0,s.openDatabase)().then((function(e){return(0,s.saveRecord)(e,g.name,t)})).catch(console.error)},deleteAllCachedEquipment:function(){(0,s.openDatabase)().then((function(e){return(0,s.clearStore)(e,g.name)})).catch(console.error)},loadCachedEquipment:function(e){var t=e.commit;(0,s.openDatabase)().then((function(e){return(0,s.getRecords)(e,g.name)})).then((function(e){t("addEquipment",e)})).catch(console.error)}}}},ssaN:function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}}),t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})])}),[],!1,null,null,null);t.default=r.exports},t6MY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("GQeE")),r=o(n("EJiy"));function o(e){return e&&e.__esModule?e:{default:e}}var s="FARMOS_SERVER",i="VUEX_STORE",u="INDEXEDDB",l=(Date.now()/1e3).toFixed(0);function c(e){if("object"===(void 0===e?"undefined":(0,r.default)(e))){var t=[];return Array.isArray(e)?e.forEach((function(e){"string"==typeof e?t.push(e):(0,a.default)(e).forEach((function(n){e[n].id?t.push(""+e[n].id):t.push(e[n])}))})):(0,a.default)(e).forEach((function(n){t.push(e[n])})),t}if("string"==typeof e)return""===e?[]:[].concat(e);throw new Error(e+" cannot be parsed as an image array")}function d(e){if("object"===(void 0===e?"undefined":(0,r.default)(e)))return e;if("string"==typeof e)return JSON.parse(e);throw new Error(e+" cannot be parsed as an object array")}function f(e){return Array.isArray(e)?e.map((function(e){return"d"===e.charAt(0)?e:{fid:e}})):e}function m(e){return void 0!==e.value&&""!==e.value&&null!==e.value?e.value.slice(3,-5):""}var h=function(e,t){if(e===i||void 0===e)return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.log_owner,a=void 0===n?{changed:null,data:[]}:n,r=e.quantity,o=void 0===r?{changed:null,data:[]}:r,l=e.log_category,m=void 0===l?{changed:null,data:[]}:l,h=e.equipment,g=void 0===h?{changed:null,data:[]}:h,p=e.id,v=e.localID,y=e.name,_=void 0===y?{changed:null,data:""}:y,b=e.type,w=void 0===b?{changed:null,data:""}:b,C=e.timestamp,x=void 0===C?{changed:null,data:""}:C,k=e.images,I=void 0===k?{changed:null,data:[]}:k,L=e.done,S=void 0===L?{changed:null,data:!0}:L,j=e.isCachedLocally,D=void 0!==j&&j,M=e.isReadyToSync,A=void 0!==M&&M,E=e.wasPushedToServer,O=void 0!==E&&E,T=e.remoteUri,P=void 0===T?"":T,F=e.asset,U=void 0===F?{changed:null,data:[]}:F,R=e.area,H=void 0===R?{changed:null,data:[]}:R,q=e.geofield,N=void 0===q?{changed:null,data:[]}:q,z=e.notes,$=void 0===z?{changed:null,data:""}:z,G=e.movement,B=void 0===G?{changed:null,data:{area:[],geometry:""}}:G,Y=e.modules,K=void 0===Y?[]:Y,V=void 0;return t!==i&&void 0!==t||(V={log_owner:a,notes:$,quantity:{data:d(o.data),changed:o.changed},log_category:{data:d(m.data),changed:m.changed},equipment:{data:d(g.data),changed:g.changed},id:p,localID:v,name:_,type:w,timestamp:x,images:{data:c(I.data),changed:I.changed},done:{data:JSON.parse(S.data),changed:S.changed},isCachedLocally:JSON.parse(D),isReadyToSync:JSON.parse(A),wasPushedToServer:JSON.parse(O),remoteUri:P,asset:{data:d(U.data),changed:U.changed},movement:{data:d(B.data),changed:B.changed},modules:K},"farm_seeding"!==w.data&&H&&(V.area={data:d(H.data),changed:H.changed}),"farm_seeding"!==w.data&&N&&(V.geofield={data:d(N.data),changed:N.changed})),t===s&&(V={notes:{format:"farm_format",value:$.data},name:_.data,done:S.data?1:0,type:w.data,timestamp:x.data,images:f(I.data),asset:U.data,quantity:o.data,log_category:m.data,equipment:g.data,movement:B.data},p&&(V.id=p),"farm_seeding"!==w.data&&H&&(V.area=H.data),"farm_seeding"!==w.data&&N&&(V.geofield=N.data)),t===u&&(V={log_owner:a,notes:$,quantity:o,log_category:m,equipment:g,id:p,name:_,type:w,timestamp:x,images:I,done:S,wasPushedToServer:O,remoteUri:P,asset:U,movement:B,modules:K},v&&(V.localID=v),"farm_seeding"!==w.data&&H&&(V.area=H),"farm_seeding"!==w.data&&N&&(V.geofield=N)),V};if(e===s)return function(e){var t=e.log_owner,n=e.quantity,a=e.log_category,r=e.equipment,o=e.id,s=e.localID,i=e.name,u=e.type,c=e.timestamp,d=e.images,f=e.done,h=e.url,g=e.asset,p=e.area,v=e.geofield,y=e.notes,_=e.movement,b={log_owner:{data:t,changed:l},notes:{data:m(y),changed:l},quantity:{data:n,changed:l},log_category:{data:a,changed:l},equipment:{data:r,changed:l},localID:s,name:{data:i,changed:l},type:{data:u,changed:l},timestamp:{data:c,changed:l},images:{data:d,changed:l},done:{data:f,changed:l},isCachedLocally:!1,wasPushedToServer:!0,remoteUri:h,asset:{data:g,changed:l},movement:{data:_,changed:l}};return"farm_seeding"!==u&&p&&(b.area={data:p,changed:l}),"farm_seeding"!==u&&v&&(b.geofield={data:v,changed:l}),o&&(b.id=o),b};throw new Error("Incorrect parameters passed to makeLog")};t.default={create:h(),toStore:h(i,i),toIdb:h(i,u),toServer:h(i,s),fromServer:h(s,i)}},tElN:function(e,t,n){"use strict";n.r(t);var a=n("3sS4"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},tGHH:function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"}})])}),[],!1,null,null,null);t.default=r.exports},"tuT/":function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM10 17l-3.5-3.5 1.41-1.41L10 14.17 15.18 9l1.41 1.41L10 17z"}})])}),[],!1,null,null,null);t.default=r.exports},uwuV:function(e,t,n){"use strict";n.r(t);var a=n("oi19"),r=n("LauP");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("w/f3");var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,"2cb58a2b",null);t.default=i.exports},vR1B:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n("oCYn")),r=n("L2JU"),o=n("kiQV"),s=c(n("HQ1J")),i=c(n("8HxT")),u=c(n("fV+d")),l=c(n("oqYx"));function c(e){return e&&e.__esModule?e:{default:e}}var d=a.default.component("module-menu-items",{render:function(e){var t=this;return e("div",this.modules.map((function(n){return e(n.name+"-drawer-items",{nativeOn:{click:function(){t.$store.commit("setCurrentModule",n.name),t.$store.commit("filterLogs",(function(e){return e.modules.includes(n.name)})),t.$store.dispatch("loadCachedLogs")}}})})))},props:{modules:{type:Array,required:!0}}});t.default={name:"App",components:{ModuleMenuItems:d,IconMenu:s.default,IconArrowBack:i.default,DrawerList:u.default,DrawerListItem:l.default},data:function(){return{showDrawer:!1,version:o.version}},created:function(){this.$store.commit("setCurrentModule",this.$route.meta.module),this.$store.dispatch("loadCachedUserAndSiteInfo"),this.$store.dispatch("updateUserAndSiteInfo"),this.$store.dispatch("loadCachedLogs"),this.$store.dispatch("loadCachedAssets"),this.$store.dispatch("loadCachedAreas"),this.$store.dispatch("loadCachedUnits"),this.$store.dispatch("loadCachedCategories"),this.$store.dispatch("loadCachedEquipment")},computed:(0,r.mapState)({errors:function(e){return e.shell.errors},username:function(e){return e.shell.user.name},userId:function(e){return e.shell.user.uid},isLoggedIn:function(e){return e.shell.user.isLoggedIn},useGeolocation:function(e){return e.shell.settings.useGeolocation},systemOfMeasurement:function(e){return e.shell.systemOfMeasurement},farmName:function(e){return e.shell.farmInfo.name},farmUrl:function(e){return""===e.shell.farmInfo.url?"example.farmos.net":e.shell.farmInfo.url},modules:function(e){return e.shell.modules},logs:function(e){return e.farm.logs},areas:function(e){return e.farm.areas},assets:function(e){return e.farm.assets},units:function(e){return e.farm.units},categories:function(e){return e.farm.categories},equipment:function(e){return e.farm.equipment}}),watch:{showDrawer:function(e){e?document.querySelector("body").setAttribute("style","overflow-y: hidden"):document.querySelector("body").setAttribute("style","overflow-y: visible")},$route:function(e){this.$store.commit("setCurrentModule",e.meta.module)}},methods:{closeError:function(e){this.$store.commit("dismissError",e)},setUseGeolocation:function(e){this.$store.commit("setUseGeolocation",e)}}}},"w/f3":function(e,t,n){"use strict";var a=n("w9LB");n.n(a).a},w9LB:function(e,t,n){},wWkD:function(e,t,n){"use strict";var a=n("7XZL");n.n(a).a},wkee:function(e,t,n){"use strict";n.r(t);var a=n("OuTb"),r=n("8DBe");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("5N10");var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,"e49bd1d8",null);t.default=i.exports},x2qs:function(e,t,n){"use strict";n.r(t);var a=n("WICp"),r=n("enu1");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("NYZL");var s=n("KHd+"),i=Object(s.a)(r.default,a.a,a.b,!1,null,"0c70fa83",null);t.default=i.exports},xpj1:function(e,t,n){},"yI/5":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterAndSort=t.sortByVersion=t.runUpgrades=void 0;var a,r=n("4d7F"),o=(a=r)&&a.__esModule?a:{default:a};t.runUpgrades=function e(t){return function(n){if(n.length>0){var a=n.slice(1);return o.default.resolve(n[0].onUpgrade(t)).then((function(){return e(t)(a)}))}}};var s=t.sortByVersion=function e(t,n){if(!n)return t;var a=t[t.length-1],r=t.slice(0,t.length-1);return t.length<1||n.version>a.version?t.concat(n):e(r,n).concat(a)};t.filterAndSort=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t,n){return n.version>e?s(t,n):t}}},"z+16":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return function(t){var n=t.type,a=t.payload;"addLogs"===n&&!1===a.isCachedLocally&&e.dispatch("createCachedLog",a),"updateLog"===n&&!1===a.props.isCachedLocally&&e.dispatch("updateCachedLog",a),"deleteLog"===n&&e.dispatch("deleteCachedLog",a),"addAssets"===n&&a.forEach((function(t){e.dispatch("createCachedAsset",t)})),"deleteAllAssets"===n&&e.dispatch("deleteAllCachedAssets"),"addAreas"===n&&a.forEach((function(t){e.dispatch("createCachedArea",t)})),"deleteAllAreas"===n&&e.dispatch("deleteAllCachedAreas"),"addUnits"===n&&a.forEach((function(t){e.dispatch("createCachedUnit",t)})),"deleteAllUnits"===n&&e.dispatch("deleteAllCachedUnits"),"addCategories"===n&&a.forEach((function(t){e.dispatch("createCachedCategory",t)})),"deleteAllCategories"===n&&e.dispatch("deleteAllCachedCategories"),"addEquipment"===n&&a.forEach((function(t){e.dispatch("createCachedEquipment",t)})),"deleteAllEquipment"===n&&e.dispatch("deleteAllCachedEquipment"),"setUseGeolocation"===n&&localStorage.setItem("useGeolocation",a)}}},"zBQ/":function(e,t,n){"use strict";n.r(t);var a=n("KHd+"),r=Object(a.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}}),t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})])}),[],!1,null,null,null);t.default=r.exports},"zuT/":function(e,t,n){}});