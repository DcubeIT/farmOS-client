webpackJsonp([1],{"4gun":function(t,e){},"8zGy":function(t,e){},I2fZ:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("iFzj"),o=s("gRE1"),a=s.n(o),r=s("fZjL"),i=s.n(r),l=s("mvHQ"),c=s.n(l),u=s("//Fk"),d=s.n(u),m=s("Dd8w"),h=s.n(m),f=s("pFYg"),g=s.n(f),v="WEBSQL",p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.log_owner,s=void 0===e?"":e,n=t.notes,o=void 0===n?"":n,a=t.quantity,r=void 0===a?"":a,i=t.id,l=t.local_id,u=t.name,d=void 0===u?"":u,m=t.type,h=void 0===m?"":m,f=t.timestamp,p=void 0===f?"":f,C=t.images,b=void 0===C?[]:C,A=t.done,y=void 0===A||A,L=t.isCachedLocally,E=void 0!==L&&L,I=t.wasPushedToServer,S=void 0!==I&&I,_=t.remoteUri,k=void 0===_?"":_,j=t.field_farm_asset,x=void 0===j?[]:j,R=t.field_farm_area,O=void 0===R?[]:R,T=t.field_farm_geofield,U=void 0===T?[]:T,D=arguments[1],F=void 0;("VUEX_STORE"!==D&&void 0!==D||(F={log_owner:s,notes:o,quantity:r,id:i,local_id:l,name:d,type:h,timestamp:p,images:function(t){if("object"===(void 0===t?"undefined":g()(t)))return t;if("string"==typeof t)return""===t?[]:[].concat(t);throw new Error(t+" cannot be parsed as an image array")}(b),done:JSON.parse(y),isCachedLocally:JSON.parse(E),wasPushedToServer:JSON.parse(S),remoteUri:k,field_farm_asset:w(x),field_farm_area:w(O),field_farm_geofield:w(U)}),"FARMOS_SERVER"===D)&&(F={field_farm_notes:{format:"farm_format",value:"<p>"+o+"</p>\n"},name:d,done:y,type:h,timestamp:p,field_farm_images:b,field_farm_asset:x.map(function(t){return{id:t.id}}),field_farm_area:O.map(function(t){return{id:t.tid}}),field_farm_geofield:U},i&&(F.id=i));return D===v&&(F={log_owner:s,notes:o,quantity:r,id:i,name:d,type:h,timestamp:p,images:b,done:y,wasPushedToServer:S,remoteUri:k,field_farm_asset:c()(x),field_farm_area:c()(O),field_farm_geofield:c()(U)},l&&(F.local_id=l)),F};function w(t){if("object"===(void 0===t?"undefined":g()(t)))return t;if("string"==typeof t)return JSON.parse(t);throw new Error(t+" cannot be parsed as an image array")}var C={actions:{createLog:function(t,e){var s=t.commit,n=p(e,v);b().then(function(t){return y(t,"log",n)}).then(function(t){return L(t,"log",n)}).then(function(t){return s("updateCurrentLog",{local_id:t.insertId,isCachedLocally:!0})})},loadCachedLogs:function(t){var e=t.commit;b().then(function(t){return E(t,"log")}).then(function(t){var s=t.map(function(t){return p(h()({},t,{isCachedLocally:!0}),"VUEX_STORE")});e("addLogs",s)}).catch(console.error)},updateLog:function(t,e){var s=t.commit,n=t.rootState,o=p(h()({},n.farm.logs[n.farm.currentLogIndex],e),v);b().then(function(t){return A(t,"log")}).then(function(t){return L(t,"log",o)}).then(function(){return s("updateCurrentLog",{isCachedLocally:!0})})},deleteLog:function(t,e){var s=e.local_id,n=e.name;console.log("deleteRecord() action dispatched on ",n),b().then(function(t){return A(t,"log")}).then(function(t){return function(t,e,s,n){return new d.a(function(o,a){var r=void 0;r=void 0===n?"DELETE FROM "+e+" WHERE local_id = "+s:"DELETE FROM "+e+" WHERE "+n+" = "+s,t.executeSql(r,[],function(t,e){return o(e)},function(t,e){return a(e)})})}(t,"log",s)}).then(console.log).catch(console.error)},deleteAllCachedLogs:function(){console.log("Deleting all logs"),b().then(function(t){return A(t,"log")}).then(function(t){return I(t,"log")}).then(console.log).catch(console.error)},createCachedAsset:function(t,e){b().then(function(t){return y(t,"asset",e,"id")}).then(function(t){return L(t,"asset",e)})},updateCachedAsset:function(t,e){b().then(function(t){return A(t,"asset","id")}).then(function(t){return L(t,"asset",e)})},deleteAllCachedAssets:function(){console.log("Deleting all assets"),b().then(function(t){return A(t,"asset")}).then(function(t){return I(t,"asset")}).then(console.log).catch(console.error)},loadCachedAssets:function(t){var e=t.commit;return new d.a(function(t,s){b().then(function(t){return E(t,"asset")}).then(function(s){console.log("Cached Assets: ",s),e("addAssets",s),t()}).catch(s)})},createCachedArea:function(t,e){b().then(function(t){return y(t,"area",e,"tid")}).then(function(t){return L(t,"area",e)})},updateCachedArea:function(t,e){b().then(function(t){return A(t,"area","tid")}).then(function(t){return L(t,"area",e)})},deleteAllCachedAreas:function(){console.log("Deleting all areas"),b().then(function(t){return A(t,"area")}).then(function(t){return I(t,"area")}).then(console.log).catch(console.error)},loadCachedAreas:function(t){var e=t.commit;return new d.a(function(t,s){b().then(function(t){return E(t,"area")}).then(function(s){console.log("Cached Areas: ",s),e("addAreas",s),t()}).catch(s)})}}};function b(){return new d.a(function(t){console.log("opening database"),t(window.openDatabase("farmOSLocalDB","1.0","farmOS Local Database",2e5))})}function A(t,e,s){return new d.a(function(n,o){function a(t,e){console.log("Get TX success. Result: ",e),n(t)}function r(t,e){console.log("Get TX error: ",e.message),o(t)}var i=void 0;i=void 0===s?"CREATE TABLE IF NOT EXISTS "+e+" (id INTEGER PRIMARY KEY AUTOINCREMENT, blankColumn TEXT)":"CREATE TABLE IF NOT EXISTS "+e+" ("+s+" INTEGER PRIMARY KEY, blankColumn TEXT)",t.transaction(function(t){t.executeSql(i,null,a,r)})})}function y(t,e,s,n){return new d.a(function(o,a){console.log("making table with name "+e+" and the following data template: "+c()(s)),t.transaction(function(t){var r="";i()(s).forEach(function(t){if(t!==n){var e="";e="number"==typeof s[t]?" INT, ":"boolean"==typeof s[t]?" BOOLEAN, ":" VARCHAR(150), ",r=r+t+e}}),r=r.substring(0,r.length-2);var l=void 0;l=void 0===n?"CREATE TABLE IF NOT EXISTS "+e+" ( local_id INTEGER PRIMARY KEY AUTOINCREMENT, "+r+")":"CREATE TABLE IF NOT EXISTS "+e+" (\n          "+n+" INTEGER PRIMARY KEY,\n           "+r+"\n         )",t.executeSql(l,null,function(t,e){console.log("Make table success. Result: ",e),o(t)},function(t,e){console.log("Make table error: "+e.message),a(t)})})})}function L(t,e,s){return new d.a(function(n,o){console.log("SAVING THE FOLLOWING RECORDS:"),console.log(s);var r="",l="",c=i()(s),u=a()(s);c.forEach(function(t){r=r+t+", ",l+="?, "}),r=r.substring(0,r.length-2),l=l.substring(0,l.length-2),console.log("add record strings"),console.log(r),console.log(l),console.log(u);var d="INSERT OR REPLACE INTO "+e+" ("+r+") VALUES ("+l+")";t.executeSql(d,u,function(t,e){console.log("INSERT success"),n(e)},function(t,e){console.log("INSERT error: "+e.message),o(e.message)})})}function E(t,e){return new d.a(function(s){function n(t,e){for(var n=[],o=0;o<e.rows.length;o+=1){var a=e.rows.item(o);console.log("RAW GETRECORDS RESULT "+o+": "+c()(a)),n.push(a)}s(n)}function o(){console.log("No old logs found in cache."),s([])}t.transaction(function(t){var s="SELECT * FROM "+e;t.executeSql(s,[],n,o)})})}function I(t,e){return new d.a(function(s,n){var o="DROP TABLE "+e;t.executeSql(o,[],function(t,e){return s(e)},function(t,e){return n(e)})})}var S=function(t,e,s){function n(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.method,o=void 0===n?"GET":n,a=s.payload,r=void 0===a?"":a,i=s.token,l=void 0===i?"":i,u=s.auth,m=void 0!==u&&u,h=t+e,f={method:o,headers:{"Content-Type":"application/json",Accept:"json"},credentials:"include"};return"POST"!==o||m||(f.headers["X-CSRF-Token"]=l,f.body=c()(r)),m&&(f.headers["Content-Type"]="application/x-www-form-urlencoded"),"POST"===o&&m&&(f.body="name="+r.name+"&pass="+r.pass+"&form_id="+r.form_id),new d.a(function(t,e){fetch(h,f).then(function(t){if(!t.ok)throw t;return m?t.text():t.json()}).then(t).catch(e)})}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new d.a(function(a,r){return n(t+"&page="+e).then(function(n){var i=+new URL(n.last).searchParams.get("page");if(e===i)return console.log("Requesting last page, "+e),void a(s.concat(n.list));console.log("Requesting page "+e+", "+(i-e)+" more to go.");var l=s.concat(n.list);o(t,e+1,l).then(a).catch(r)}).catch(r)})}var a=function(t){return t?"/"+t+".json":".json"},r=function(t){return t.list.find(function(t){return"farm_areas"===t.machine_name}).vid};return{authenticate:function(){return n("/user/login",{method:"POST",payload:{form_id:"user_login",name:e,pass:s},auth:!0}).then(function(){return n("/restws/session/token",{auth:!0}).then(function(t){return t}).catch(function(t){throw t})}).catch(function(t){throw t})},area:{delete:function(t,e){return n("/taxonomy_vocabulary.json").then(function(s){return n("/taxonomy_term.json?vocabulary="+r(s)+a(t),{method:"DELETE",token:e})})},get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("/taxonomy_vocabulary.json").then(function(e){if("number"==typeof t)return n("/taxonomy_term.json?vocabulary="+r(e)+"&tid="+t);var s=t.page,a=void 0===s?null:s,i=t.type,l=void 0===i?"":i,c=""!==l?"field_farm_area_type="+l:"",u=null!==a?"page="+a:"";return null===a?o("/taxonomy_term.json?vocabulary="+r(e)+"&"+c):n("/taxonomy_term.json?vocabulary="+r(e)+"&"+c+"&"+u)})},send:function(t,e,s){return n("/taxonomy_vocabulary.json").then(function(o){return n("/taxonomy_term.json?vocabulary="+r(o)+a(e),{method:"POST",payload:t,token:s})})}},asset:{delete:function(t,e){return n("/farm_asset/"+t+".json",{method:"DELETE",token:e})},get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("number"==typeof t)return n("/farm_asset/"+t+".json");var e=t.type,s=void 0===e?"":e,a=t.archived,r=void 0!==a&&a,i=t.page,l=void 0===i?null:i,c=""!==s?"type="+s:"",u=r?"":"&archived=0",d=null!==l?"&page="+l:"";return null===l?o("/farm_asset.json?"+c+u):n("/farm_asset.json?"+c+u+d)},send:function(t,e,s){return n("/farm_asset"+a(e),{method:"POST",payload:t,token:s})}},info:function(){return n("/farm.json")},log:{delete:function(t,e){return n("/log/"+t+".json",{method:"DELETE",token:e})},get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("number"==typeof t)return n("/log/"+t+".json");var e=t.page,s=void 0===e?null:e,a=t.type,r=void 0===a?"":a,i=""!==r?"type="+r:"",l=null!==s?"page="+s:"";return null===s?o("/log.json?"+i):n("/log.json?"+i+"&"+l)},send:function(t,e){return n("/log",{method:"POST",payload:t,token:e})}},user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("number"==typeof t)return n("/user.json?uid="+t);if("string"==typeof t)return t.indexOf("@")>-1?n("/user.json?email="+t):n("/user.json?name="+t);var e=t.active,s=void 0===e||e,o=t.email,a=void 0===o?"":o,r=t.name,i=void 0===r?"":r,l=t.uid,c=void 0===l?null:l;return n("/user.json?"+(s?"status=1":"")+(""!==a?"&mail="+a:"")+(""!==i?"&name="+i:"")+(null!==c?"&uid="+c:""))}}},_=function(){var t=localStorage.getItem("host"),e=localStorage.getItem("username"),s=localStorage.getItem("password");return S(t,e,s)},k={actions:{updateAreas:function(t){var e=t.commit;return _().area.get().then(function(t){e("deleteAllAreas");var s=t.map(function(t){return{tid:t.tid,name:t.name,field_farm_geofield:t.field_farm_geofield}});e("addAreas",s),console.log("Finished updating areas!")}).catch(function(t){throw t})},updateAssets:function(t){var e=t.commit;return _().asset.get().then(function(t){e("deleteAllAssets");var s=t.map(function(t){return{id:t.id,name:t.name}});e("addAssets",s),console.log("Finished updating assets!")}).catch(function(t){throw t})},sendLogs:function(t,e){var s=t.commit,n=t.rootState;localStorage.getItem("token")?e.indices.map(function(t){var o=p(n.farm.logs[t],"FARMOS_SERVER");return _().log.send(o,localStorage.getItem("token")).then(function(e){return function(t,e){s("updateLogs",{indices:[e],mapper:function(e){return p(h()({},e,{id:t.id,wasPushedToServer:!0,remoteUri:t.uri}))}})}(e,t)}).catch(function(o){return function(t,o){if("object"===(void 0===t?"undefined":g()(t))&&void 0===t.status){var a={message:'Unable to sync "'+n.farm.logs[o].name+'" because the network is currently unavailable. Please try syncing again later.',errorCode:t.statusText,level:"warning",show:!0};s("logError",a)}else if(401===t.status||403===t.status)e.router.push("/login");else{var r={message:t.status+' error while syncing "'+n.farm.logs[o].name+'": '+t.statusText,errorCode:t.statusText,level:"warning",show:!0};s("logError",r)}s("updateLogs",{indices:[o],mapper:function(t){return p(h()({},t,{isReadyToSync:!1}))}})}(o,t)})}):e.router.push("/login")}}},j={actions:{getPhotoLoc:function(t){var e=t.commit,s=t.rootState;new d.a(function(t,e){console.log("GETTING IMAGE FROM CAMERA");var s={quality:50,destinationType:Camera.DestinationType.DATA_URL};navigator.camera.getPicture(function(e){console.log("RETRIEVED THE FOLLOWING IMAGE: "+e),t(e)},function(t){console.log("FAILED TO RETRIEVE IMAGE BECAUSE: "+t),e(t)},s)}).then(function(t){var n="data:image/jpeg;base64,"+t,o={images:s.farm.logs[s.farm.currentLogIndex].images.concat(n),isCachedLocally:!1};e("updateCurrentLog",o)},function(t){})},loadPhotoBlob:function(t,e){var s=t.commit,n=t.rootState,o=n.farm.logs[n.farm.currentLogIndex];(function(t){return new d.a(function(e,s){var n=new FileReader;n.onloadend=function(){return e(n.result)},n.onerror=function(){return s(n.error)},n.readAsDataURL(t)})})(e).then(function(t){var e={images:o.images.concat(t),isCachedLocally:!1};s("updateCurrentLog",e)})}}};function x(t,e,s){return e.isReadyToSync&&!e.wasPushedToServer?t.concat(s):t}var R={install:function(t,e){var s=e.store,n=e.router;s.registerModule("data",C),s.registerModule("http",k),s.registerModule("camera",j),n.beforeEach(function(t,e,n){"/logs"===t.path&&(s.commit("clearLogs"),s.commit("clearAssets"),s.commit("clearAreas"),s.dispatch("loadCachedUserAndSiteInfo"),s.dispatch("loadCachedLogs"),s.dispatch("loadCachedAssets").then(function(){return s.dispatch("updateAssets")}),s.dispatch("loadCachedAreas").then(function(){return s.dispatch("updateAreas")}),n()),n()}),s.subscribe(function(t){if("addLogAndMakeCurrent"===t.type&&s.dispatch("createLog",t.payload),"updateCurrentLog"!==t.type||t.payload.isCachedLocally||s.dispatch("updateLog",t.payload),"updateAllLogs"===t.type){var e=s.state.farm.logs.reduce(x,[]);s.dispatch("sendLogs",{indices:e,router:n})}"updateLogs"===t.type&&t.payload.indices.forEach(function(t){s.dispatch("updateLog",s.state.farm.logs[t])}),"deleteLog"===t.type&&s.dispatch("deleteLog",t.payload),"addAssets"===t.type&&t.payload.forEach(function(t){s.dispatch("createCachedAsset",t)}),"updateAsset"===t.type&&s.dispatch("updateCachedAsset",t.payload),"deleteAllAssets"===t.type&&s.dispatch("deleteAllCachedAssets"),"deleteAllAreas"===t.type&&s.dispatch("deleteAllCachedAreas"),"addAreas"===t.type&&t.payload.forEach(function(t){s.dispatch("createCachedArea",t)}),"updateArea"===t.type&&s.dispatch("updateCachedArea",t.payload)}),s.subscribeAction(function(t){if("forceSyncAssetsAndAreas"===t.type){if(null!==localStorage.getItem("host"))return s.dispatch("updateAssets").then().catch(function(t){if(403!==t.status&&401!==t.status){var e={message:t.status+" error while syncing assets: "+t.statusText,errorCode:t.statusText,level:"warning",show:!0};s.commit("logError",e)}else n.push("/login")}),void s.dispatch("updateAreas").then().catch(function(t){if(403!==t.status&&401!==t.status){var e={message:t.status+" error while syncing areas: "+t.statusText,errorCode:t.statusText,level:"warning",show:!0};s.commit("logError",e)}else n.push("/login")});n.push("/login")}})}},O=(s("NYxO"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticClass:"spinner",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[e("g",[e("circle",{staticClass:"path",attrs:{cx:"12",cy:"12",r:"10",fill:"none","stroke-width":"3"}})])])},staticRenderFns:[]});var T={components:{iconSpinner:s("VU/8")(null,O,!1,function(t){s("fHiE")},"data-v-40d7c23d",null).exports},name:"Login",data:function(){return{valuesEntered:!1,authPending:!1,username:"",password:"",farmosUrl:""}},methods:{checkValues:function(){var t=""!==this.username,e=""!==this.username,s=""!==this.password;t&&e&&s&&(this.valuesEntered=!0)},submitCredentials:function(){var t=this,e={farmosUrl:this.farmosUrl,username:this.username,password:this.password,router:this.$router};this.authPending=!0,this.$store.dispatch("didSubmitCredentials",e).then(function(){t.authPending=!1,t.$store.commit("setLoginStatus",!0),t.$store.dispatch("updateUserInfo"),t.$store.dispatch("updateSiteInfo")})},onDeviceReady:function(){console.log("RECEIVED DEVICEREADY"),this.loadUserInfo()},loadUserInfo:function(){this.farmosUrl=window.localStorage.getItem("host").replace(/(^\w+:|^)\/\//,""),this.username=window.localStorage.getItem("username"),this.password=window.localStorage.getItem("password"),this.checkValues()}},created:function(){console.log("VUE IS READY"),document.addEventListener("deviceready",this.onDeviceReady(),!1),this.loadUserInfo()}},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"login"}},[s("div",{staticClass:"input-group"},[t._m(0),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.farmosUrl,expression:"farmosUrl"}],staticClass:"form-control",attrs:{placeholder:"Enter your farmOS URL",autofocus:"",type:"text",autocomplete:"url"},domProps:{value:t.farmosUrl},on:{input:[function(e){e.target.composing||(t.farmosUrl=e.target.value)},t.checkValues]}})]),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{placeholder:"Enter your username",type:"text",autocomplete:"username"},domProps:{value:t.username},on:{input:[function(e){e.target.composing||(t.username=e.target.value)},t.checkValues]}})]),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{placeholder:"Enter your password",type:"password",autocomplete:"current-password"},domProps:{value:t.password},on:{input:[function(e){e.target.composing||(t.password=e.target.value)},t.checkValues]}})]),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"input-group login-submit"},[t.authPending?s("div",[s("icon-spinner")],1):s("button",{staticClass:"btn btn-success btn-navbar",attrs:{disabled:!this.valuesEntered,title:"Submit credentials",type:"button"},on:{click:t.submitCredentials}},[t._v("\n      Submit credentials\n    ")])]),t._v(" "),s("br"),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("https://")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Need a server? Check out "),e("a",{attrs:{href:"https://farmos.org/hosting/"}},[this._v("hosting options")]),this._v(".")])}]};var D=s("VU/8")(T,U,!1,function(t){s("g8oO")},"data-v-2fa39efd",null).exports,F={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid"},[this._m(0),this._v(" "),e("div",{staticClass:"row justify-content-sm-center"},[e("div",{staticClass:"col col-sm-auto",attrs:{id:"go-back"}},[e("button",{staticClass:"btn btn-lg btn-success",attrs:{type:"button",name:"button"},on:{click:this.goBack}},[this._v("\n        Go Back\n      ")])]),this._v(" "),e("div",{staticClass:"col col-sm-auto"},[e("button",{staticClass:"btn btn-lg btn-primary",attrs:{type:"button",name:"button"},on:{click:this.logout}},[this._v("\n        Logout\n      ")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row",attrs:{id:"first-row"}},[e("div",{staticClass:"col"},[e("div",{staticClass:"card text-primary border-primary mb-3"},[e("div",{staticClass:"card-body"},[e("h4",{staticClass:"card-title"},[this._v("WARNING!")]),this._v(" "),e("p",{staticClass:"card-text"},[this._v("\n            Logging out will permanently delete all logs stored on this device.\n            You will not be able to recover logs which have not been synced with\n            your farmOS server. Go back to sync any unsaved logs, or proceed to\n            logout and clear all data from this device.\n          ")])])])])])}]};var B=s("VU/8")({name:"Logout",methods:{goBack:function(){this.$router.back()},logout:function(){this.$store.commit("clearLogs"),this.$store.commit("clearAssets"),this.$store.commit("clearAreas"),this.$store.commit("changeUsername",""),this.$store.commit("changeEmail",""),this.$store.commit("changeUid",""),this.$store.commit("changeFarmName",""),this.$store.commit("changeFarmUrl",""),this.$store.dispatch("deleteAllCachedLogs"),this.$store.dispatch("deleteAllCachedAssets"),this.$store.dispatch("deleteAllCachedAreas"),this.$store.dispatch("deleteCachedUserAndSiteInfo"),this.$store.commit("setLoginStatus",!1),this.$router.push({path:"/login"})}}},F,!1,function(t){s("j6JK")},"data-v-7cb95982",null).exports,Y=function(){var t=localStorage.getItem("host"),e=localStorage.getItem("username"),s=localStorage.getItem("password");return S(t,e,s)},M={actions:{didSubmitCredentials:function(t,e){var s=t.commit;console.log("RUNNING didSubmitCredentials");var n="https://"+e.farmosUrl,o=e.username,a=e.password,r=e.router,i=window.localStorage;return new d.a(function(t){S(n,o,a).authenticate().then(function(e){if(i.setItem("host",n),i.setItem("username",o),i.setItem("password",a),i.setItem("token",e),window.history.length>1)return window.history.back(),void t();r.push("/"),t()}).catch(function(){var l="http://"+e.farmosUrl;S(l,o,a).authenticate().then(function(e){if(i.setItem("host",l),i.setItem("username",o),i.setItem("password",a),i.setItem("token",e),window.history.length>1)return window.history.back(),void t();r.push("/"),t()}).catch(function(e){!function(t){if(403===t.status){var e={message:'The username or password you entered was incorrect. Please try again, or <a href="'+n+'/user/password">reset your password</a>.',errorCode:t.statusText,level:"warning",show:!0};s("logError",e)}else{var o={message:"Unable to reach the server. Please check that you have the correct URL and that your device has a network connection. Status: "+t.status,errorCode:t.statusText,level:"warning",show:!0};console.log("Server response: "+t.status),s("logError",o)}}(e),t()})})})},updateUserInfo:function(t){var e=t.commit,s=localStorage.getItem("username");Y().user(s).then(function(t){e("changeUsername",t.list[0].name),e("changeEmail",t.list[0].mail),e("changeUid",t.list[0].uid),e("setLoginStatus",!0),localStorage.setItem("username",t.list[0].name),localStorage.setItem("email",t.list[0].mail),localStorage.setItem("uid",t.list[0].uid),localStorage.setItem("isLoggedIn",!0)})},updateSiteInfo:function(t){var e=t.commit,s=localStorage.getItem("username");Y().info(s).then(function(t){e("changeFarmName",t.name),e("changeFarmUrl",t.url),localStorage.setItem("farmName",t.name)})},loadCachedUserAndSiteInfo:function(t){var e=t.commit;e("changeUsername",localStorage.getItem("username")),e("changeEmail",localStorage.getItem("email")),e("changeUid",localStorage.getItem("username")),e("setLoginStatus",localStorage.getItem("isLoggedIn")),e("changeFarmName",localStorage.getItem("farmName")),e("changeFarmUrl",localStorage.getItem("host"))},deleteCachedUserAndSiteInfo:function(){localStorage.removeItem("username"),localStorage.removeItem("email"),localStorage.removeItem("username"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("farmName"),localStorage.removeItem("host")}}},V={install:function(t,e){var s=e.router,n=e.store,o=t.component(D.name,D),a=t.component(B.name,B);s.addRoutes([{path:"/login",name:"Login",component:o},{path:"/logout",name:"Logout",component:a}]),s.beforeEach(function(t,e,s){"/login"===e.path&&"/logout"===t.path&&s("/"),s()}),n.registerModule("auth",M)}};Object(n.a)(R,V)},X2il:function(t,e,s){"use strict";var n=s("NYxO"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}})])},staticRenderFns:[]},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}})])},staticRenderFns:[]},r={name:"App",components:{IconMenu:s("VU/8")(null,o,!1,null,null,null).exports,IconArrowBack:s("VU/8")(null,a,!1,null,null,null).exports},data:function(){return{showDrawer:!1}},computed:Object(n.b)({errors:function(t){return t.shell.errors},username:function(t){return t.shell.user.name},isLoggedIn:function(t){return t.shell.user.isLoggedIn},farmName:function(t){return t.farm.name},farmUrl:function(t){return""===t.farm.url?"example.farmos.net":t.farm.url}}),watch:{showDrawer:function(t){t?document.querySelector("body").setAttribute("style","overflow-y: hidden"):document.querySelector("body").setAttribute("style","overflow-y: visible")}},methods:{closeError:function(t){this.$store.commit("dismissError",t)}}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"html",attrs:{id:"app"}},[n("transition",{attrs:{name:"filter"}},[t.showDrawer?n("div",{staticClass:"modal-filter",on:{click:function(e){t.showDrawer=!t.showDrawer}}}):t._e()]),t._v(" "),n("header",{staticClass:"navbar navbar-light fixed-top bg-light"},[n("div",{staticClass:"menu",on:{click:function(e){t.showDrawer=!t.showDrawer}}},[n("icon-menu")],1),t._v(" "),n("img",{staticClass:"logo",attrs:{src:s("ouVi"),alt:"farmOS"}})]),t._v(" "),n("transition",{attrs:{name:"drawer"}},[t.showDrawer?n("div",{staticClass:"drawer container-fluid"},[n("header",{staticClass:"drawer-header row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"arrow-back",on:{click:function(e){t.showDrawer=!t.showDrawer}}},[n("icon-arrow-back")],1),t._v(" "),t.isLoggedIn?n("div",{staticClass:"user-info"},[n("h2",[t._v(t._s(t.farmName))]),t._v(" "),n("p",[t._v(t._s(t.farmUrl.replace(/(^\w+:|^)\/\//,"")))]),t._v(" "),n("p",[t._v(t._s(t.username))])]):n("div",{staticClass:"user-info"},[n("h2",[t._v("Welcome to farmOS")]),t._v(" "),n("p",[t._v("Login for more options.")])])])]),t._v(" "),n("ul",{staticClass:"row list-group",on:{click:function(e){t.showDrawer=!t.showDrawer}}},[n("router-link",{attrs:{to:{name:"logs"}}},[n("li",{staticClass:"list-group-item"},[t._v("All Logs")])]),t._v(" "),n("router-link",{attrs:{to:{name:"edit-log",params:{type:"farm_activity"}}}},[n("li",{staticClass:"list-group-item"},[t._v("New Activity")])]),t._v(" "),n("router-link",{attrs:{to:{name:"edit-log",params:{type:"farm_harvest"}}}},[n("li",{staticClass:"list-group-item"},[t._v("New Harvest")])]),t._v(" "),n("router-link",{attrs:{to:{name:"edit-log",params:{type:"farm_input"}}}},[n("li",{staticClass:"list-group-item"},[t._v("New Input")])]),t._v(" "),n("router-link",{attrs:{to:{name:"edit-log",params:{type:"farm_observation"}}}},[n("li",{staticClass:"list-group-item"},[t._v("New Observation")])])],1),t._v(" "),n("ul",{staticClass:"row list-group"},[n("li",{staticClass:"list-group-item"},[n("label",{attrs:{for:"location-switch"}},[t._v("Share My Location ")]),t._v(" "),n("input",{staticClass:"toggle-check",attrs:{id:"location-switch",type:"checkbox"}})]),t._v(" "),t.isLoggedIn?t._e():n("router-link",{attrs:{to:"/login"}},[n("li",{staticClass:"list-group-item",on:{click:function(e){t.showDrawer=!t.showDrawer}}},[t._v("Login")])]),t._v(" "),t.isLoggedIn?n("router-link",{attrs:{to:"/logout"}},[n("li",{staticClass:"list-group-item",on:{click:function(e){t.showDrawer=!t.showDrawer}}},[t._v("Logout")])]):t._e()],1)]):t._e()]),t._v(" "),n("div",{staticClass:"main-container container-fluid"},[n("div",{staticClass:"row"},[n("section",{staticClass:"col-sm-12"},[t._l(t.errors,function(e,s){return n("div",{key:"err-"+t.errors.indexOf(e)},[e.show?n("div",{staticClass:"alert alert-warning alert-dismissable"},[n("span",{domProps:{innerHTML:t._s(e.message)}}),t._v(" "),n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.closeError(s)}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]):t._e()])}),t._v(" "),n("div",{staticClass:"region region-content"},[n("div",{staticClass:"block block-system"},[n("router-view")],1)])],2)])])],1)},staticRenderFns:[]};var l=s("VU/8")(r,i,!1,function(t){s("h+Tg")},"data-v-62ad285a",null);e.a=l.exports},f003:function(t,e){},fHiE:function(t,e){},g8oO:function(t,e){},"h+Tg":function(t,e){},j6JK:function(t,e){},ouVi:function(t,e){t.exports="data:image/png;base64,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"},p0q4:function(t,e){},s0vR:function(t,e,s){"use strict";var n=s("Dd8w"),o=s.n(n),a=s("PJh5"),r=s.n(a),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}}),e("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})])},staticRenderFns:[]},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}}),e("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})])},staticRenderFns:[]},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}}),e("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})])},staticRenderFns:[]},u={props:["logs"],components:{IconSync:s("VU/8")(null,i,!1,null,null,null).exports,IconEdit:s("VU/8")(null,l,!1,null,null,null).exports,IconDelete:s("VU/8")(null,c,!1,null,null,null).exports},data:function(){return{showDeleteDialog:!1,logIndexToDelete:null}},methods:{syncTime:function(t){return r.a.unix(t).format("YYYY-MM-DD")},showDate:function(t){return r.a.unix(t).format("MMM DD YYYY")},openDeleteDialog:function(t){this.showDeleteDialog=!0,this.logIndexToDelete=t},cancelDelete:function(){this.showDeleteDialog=!1},confirmDelete:function(){var t=this.logs[this.logIndexToDelete];console.log("Log to be deleted: ",t);var e={index:this.logIndexToDelete,local_id:t.local_id,id:t.id,remoteUri:t.remoteUri,name:t.name,type:t.type};this.$store.commit("deleteLog",e),this.showDeleteDialog=!1,console.log('Deleting log "'+e.name+'"...')},syncAll:function(){this.$store.commit("updateAllLogs",function(t){return o()({},t,{isReadyToSync:!0})})}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",[t._v("Logs")]),t._v(" "),s("div",{staticClass:"btn-wrapper"},[s("router-link",{attrs:{to:"/logs/edit"}},[s("button",{staticClass:"btn btn-success btn-navbar",attrs:{type:"button"}},[t._v("\n        Create log\n      ")])]),t._v(" "),s("button",{staticClass:"btn btn-info btn-navbar navbar-right",attrs:{type:"button"},on:{click:t.syncAll}},[t._v("\n      Sync all to farmOS\n    ")])],1),t._v(" "),s("div",{staticClass:"card-deck"},[t.logs.length<1?s("div",{staticClass:"card"},[t._m(0)]):t._e(),t._v(" "),t._l(t.logs,function(e,n){return t.logs.length>0?s("div",{key:"card-"+t.logs.indexOf(e),staticClass:"card"},[s("div",{staticClass:"card-body"},[s("p",[t._v("\n          "+t._s(t.showDate(e.timestamp))+"\n          "),e.wasPushedToServer?s("span",{staticClass:"sync-status"},[s("a",{attrs:{href:e.remoteUri}},[t._v("synced")]),t._v("\n            ("+t._s(t.syncTime(e.timestamp))+")\n          ")]):e.isReadyToSync?s("span",{staticClass:"sync-status"},[s("div",{staticClass:"spin",attrs:{"aria-hidden":"true"}},[s("icon-sync")],1)]):s("span",{staticClass:"sync-status"},[t._v("\n            unsynced\n          ")])]),t._v(" "),s("h5",[t._v(t._s(e.name))]),t._v(" "),e.wasPushedToServer?t._e():s("router-link",{staticClass:"edit-btn",attrs:{to:{name:"edit-log",params:{index:n}}}},[s("icon-edit")],1),t._v(" "),s("div",{staticClass:"del-btn",on:{click:function(e){t.openDeleteDialog(n)}}},[s("icon-delete")],1)],1)]):t._e()})],2),t._v(" "),t.showDeleteDialog?s("div",{staticClass:"modal",attrs:{id:"delete-dialog",tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-filter"}),t._v(" "),s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Confirm Deletion")]),t._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.cancelDelete}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),s("div",{staticClass:"modal-body"},[t._v("\n          Are sure you'd like to delete the log \""+t._s(t.logs[t.logIndexToDelete].name)+'"? \n          '),t.logs[t.logIndexToDelete].wasPushedToServer?s("span",[t._v("\n            Deleting it on this device will not remove the log from the server.\n          ")]):s("span",[t._v("\n            It has not yet been synced to the server and cannot be recovered after it's deleted.\n          ")])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.cancelDelete}},[t._v("\n          Cancel\n        ")]),t._v(" "),s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){t.confirmDelete()}}},[t._v("\n          Delete\n        ")])])])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-body"},[e("h4",{staticClass:"card-title"},[this._v("Let's Get Started!")]),this._v(" "),e("p",{staticClass:"card-text"},[this._v('\n          You don\'t have any logs to display yet, but you add them here by clicking\n          "Create Log" above.\n        ')])])}]};var m=s("VU/8")(u,d,!1,function(t){s("vprh")},"data-v-5f31782b",null);e.a=m.exports},uslO:function(t,e,s){var n={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function o(t){return s(a(t))}function a(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}o.keys=function(){return Object.keys(n)},o.resolve=a,t.exports=o,o.id="uslO"},vprh:function(t,e){},wtY5:function(t,e){},x6k4:function(t,e,s){"use strict";var n=s("bOdI"),o=s.n(n),a=s("PJh5"),r=s.n(a),i={props:["objects","searchKey","searchId","label"],data:function(){return{search:"",searchResults:[],counter:0,isOpen:!1}},methods:{openResults:function(){this.isOpen=!0},doSearch:function(t){var e=[];if(""!==t)for(var s=t.toLowerCase(),n=0;n<this.objects.length;n+=1){var o=this.objects[n];o.name.toLowerCase().includes(s)&&e.length<10&&e.push(o)}this.searchResults=e,this.search=t},selectSearchResult:function(t){""!==t&&(this.$emit("results",t),this.search="",this.doSearch(this.search))},onArrowDown:function(){this.counter<this.searchResults.length-1&&(this.counter=this.counter+1)},onArrowUp:function(t){t.preventDefault(),this.counter>0&&(this.counter=this.counter-1)},onEnter:function(){var t=this.searchResults[this.counter][this.searchId];this.selectSearchResult(t)},handleClickOutside:function(t){this.$el.contains(t.target)||(this.isOpen=!1,this.arrowCounter=-1)}},mounted:function(){document.addEventListener("click",this.handleClickOutside)},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-item form-item-name form-group"},[s("label",{staticClass:"control-label",attrs:{for:"search"}},[t._v(t._s(t.label))]),t._v(" "),s("input",{staticClass:"form-control",attrs:{placeholder:"Enter text to search",type:"text"},domProps:{value:t.search},on:{focus:t.openResults,input:function(e){t.doSearch(e.target.value)},keydown:[function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?t.onArrowDown(e):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?t.onArrowUp(e):null},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onEnter(e):null}]}}),t._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.isOpen&&t.search.length>0,expression:"isOpen && search.length > 0"}],staticClass:"list-group search-results"},[0===t.searchResults.length?s("li",{staticClass:"list-group-item empty"},[t._t("empty",[t._v("No Results")])],2):t._l(t.searchResults,function(e,n){return s("li",{key:"result-"+n+"-"+Math.floor(1e6*Math.random()),staticClass:"list-group-item",class:{"is-active":n===t.counter},on:{click:function(s){t.selectSearchResult(e[t.searchId])}}},[t._v("\n      "+t._s(e[t.searchKey])+"\n    ")])})],2)])},staticRenderFns:[]};var c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticClass:"spinner",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[e("g",[e("circle",{staticClass:"path",attrs:{cx:"12",cy:"12",r:"10",fill:"none","stroke-width":"3"}})])])},staticRenderFns:[]};var u={components:{Autocomplete:s("VU/8")(i,l,!1,function(t){s("p0q4")},"data-v-583e2106",null).exports,IconSpinner:s("VU/8")(null,c,!1,function(t){s("I2fZ")},"data-v-6844f4b3",null).exports},data:function(){return{imageUrls:[],attachGeo:!1,useLocalAreas:!1,addedArea:!1,isWorking:!1}},props:["logs","areas","assets","currentLogIndex","statusText","photoLoc","geolocation","localArea"],created:function(){if("number"==typeof this.$route.params.index)this.$store.commit("setCurrentLogIndex",this.$route.params.index);else{var t=this.$route.params.type?this.$route.params.type:"farm_observation";this.$store.dispatch("initializeLog",t)}},methods:{convertOutOfUnix:function(t){return r.a.unix(t).format("YYYY-MM-DD")},convertIntoUnix:function(t){return Math.floor(new Date(t).getTime()/1e3).toString()},forceSync:function(){this.$store.dispatch("forceSyncAssetsAndAreas")},updateCurrentLog:function(t,e){var s,n=(s={},o()(s,t,e),o()(s,"isCachedLocally",!1),s);this.$store.commit("updateCurrentLog",n),console.log("WROTE THE FOLLOWING TO CURRENT LOG WITH updateCurrentLog"),console.log(n)},addAsset:function(t){var e=this.assets.find(function(e){return e.id===t}),s=this.logs[this.currentLogIndex].field_farm_asset.concat(e);this.updateCurrentLog("field_farm_asset",s)},addArea:function(t){if(""!==t){var e=this.areas.find(function(e){return e.tid===t}),s=this.logs[this.currentLogIndex].field_farm_area.concat(e);this.updateCurrentLog("field_farm_area",s),this.checkAreas()}this.checkAreas()},removeAsset:function(t){var e=this.logs[this.currentLogIndex].field_farm_asset.filter(function(e){return e.id!==t.id});this.updateCurrentLog("field_farm_asset",e)},removeArea:function(t){var e=this.logs[this.currentLogIndex].field_farm_area.filter(function(e){return e.tid!==t.tid});this.updateCurrentLog("field_farm_area",e)},getPhoto:function(){return this.$store.dispatch("getPhotoLoc")},loadPhoto:function(t){for(var e=0;e<t.length;e+=1)this.imageUrls.push(window.URL.createObjectURL(t[e])),this.$store.dispatch("loadPhotoBlob",t[e])},addLocation:function(){if(void 0==this.geolocation.Longitude&&(this.$store.dispatch("getGeolocation"),this.attachGeo=!0,this.isWorking=!0),void 0!==this.geolocation.Longitude){this.attachGeo=!0;var t=JSON.parse('[{"geom":"POINT ('+this.geolocation.Longitude+" "+this.geolocation.Latitude+')"}]');console.log("ATTACH GEOLOCATION: "+t),this.updateCurrentLog("field_farm_geofield",t)}},checkAreas:function(){var t=this;console.log("CALLED CHECKAREAS; DOING CHECKINSIDE");this.filteredAreas.forEach(function(e){if(void 0!==e.field_farm_geofield[0]&&void 0!==t.geolocation.Longitude){var s={point:[t.geolocation.Longitude,t.geolocation.Latitude],area:e,radius:.02};t.$store.dispatch("checkInNear",s)}})}},computed:{filteredAssets:function(){var t=this.logs[this.currentLogIndex].field_farm_asset;return this.assets.filter(function(e){return!t.some(function(t){return e.id===t.id})})},filteredAreas:function(){var t=this.logs[this.currentLogIndex].field_farm_area;return this.areas.filter(function(e){return!t.some(function(t){return e.tid===t.tid})})}},watch:{photoLoc:function(){console.log("UPDATING CURRENT RECORD PHOTO LOC: "+this.photoLoc),this.updateCurrentLog("images",this.photoLoc)},geolocation:function(){if(this.attachGeo&&void 0!==this.geolocation.Longitude){var t=JSON.parse('[{"geom":"POINT ('+this.geolocation.Longitude+" "+this.geolocation.Latitude+')"}]');console.log("ATTACH GEOLOCATION: "+t),this.updateCurrentLog("field_farm_geofield",t),this.isWorking=!1}this.useLocalAreas&&void 0!==this.geolocation.Longitude&&(this.checkAreas(),this.isWorking=!1)},useLocalAreas:function(){this.useLocalAreas&&(console.log("USELOCALAREAS SET TO TRUE"),void 0==this.geolocation.Longitude&&(this.$store.commit("clearLocalArea"),this.$store.dispatch("getGeolocation"),this.isWorking=!0),void 0!==this.geolocation.Longitude&&(this.$store.commit("clearLocalArea"),this.checkAreas()))}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",[t._v("Edit Log")]),t._v(" "),s("div",{staticClass:"well"},[s("div",{staticClass:"form-item form-item-name form-group"},[s("label",{staticClass:"control-label",attrs:{for:"name"}},[t._v("Name")]),t._v(" "),s("input",{staticClass:"form-control",attrs:{placeholder:"Enter name",type:"text",autofocus:""},domProps:{value:t.logs[t.currentLogIndex].name},on:{input:function(e){t.updateCurrentLog("name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-item form-item-name form-group"},[s("label",{staticClass:"control-label",attrs:{for:"Date"}},[t._v("Date")]),t._v(" "),s("input",{staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.convertOutOfUnix(t.logs[t.currentLogIndex].timestamp)},on:{input:function(e){t.updateCurrentLog("timestamp",t.convertIntoUnix(e.target.value))}}})]),t._v(" "),s("div",{staticClass:"form-item form-item-name form-group"},[s("label",{staticClass:"control-label ",attrs:{for:"type"}},[t._v("Log Type")]),t._v(" "),s("select",{staticClass:"custom-select col-sm-3 ",domProps:{value:t.logs[t.currentLogIndex].type},on:{input:function(e){t.updateCurrentLog("type",e.target.value)}}},[s("option",{attrs:{value:"farm_observation"}},[t._v("Observation")]),t._v(" "),s("option",{attrs:{value:"farm_activity"}},[t._v("Activity")]),t._v(" "),s("option",{attrs:{value:"farm_input"}},[t._v("Input")]),t._v(" "),s("option",{attrs:{value:"farm_harvest"}},[t._v("Harvest")])])]),t._v(" "),s("div",{staticClass:"form-item form-item-name form-group"},[s("label",{staticClass:"control-label ",attrs:{for:"notes"}},[t._v("Notes")]),t._v(" "),s("textarea",{staticClass:"form-control",attrs:{placeholder:"Enter notes",type:"text"},domProps:{value:t.logs[t.currentLogIndex].notes},on:{input:function(e){t.updateCurrentLog("notes",e.target.value)}}})]),t._v(" "),s("h4",[t._v("Assets")]),t._v(" "),s("Autocomplete",{attrs:{objects:t.filteredAssets,searchKey:"name",searchId:"id",label:"Add assets to the log"},on:{results:function(e){t.addAsset(e)}}},[s("template",{slot:"empty"},[s("div",{staticClass:"empty-slot"},[s("em",[t._v("No assets found.")]),t._v(" "),s("br"),t._v(" "),s("button",{staticClass:"btn btn-light",attrs:{type:"button",name:"button"},on:{click:t.forceSync}},[t._v("\n            Sync Now\n          ")])])])],2),t._v(" "),s("div",{staticClass:"form-item form-item-name form-group"},[s("ul",{staticClass:"list-group"},t._l(t.logs[t.currentLogIndex].field_farm_asset,function(e,n){return s("li",{key:"log-"+n+"-"+Math.floor(1e6*Math.random()),staticClass:"list-group-item"},[t._v("\n          "+t._s(e.name)+"\n          "),s("span",{staticClass:"remove-list-item",on:{click:function(s){t.removeAsset(e)}}},[t._v("\n            ✕\n          ")])])}))]),t._v(" "),s("h4",[t._v("Areas & Location")]),t._v(" "),s("div",{staticClass:"form-item form-item-name form-group"},[s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.useLocalAreas,expression:"useLocalAreas"}],staticClass:"form-check-input",attrs:{type:"radio",id:"dontUseGeo",name:"geoRadioGroup",checked:""},domProps:{value:!1,checked:t._q(t.useLocalAreas,!1)},on:{change:function(e){t.useLocalAreas=!1}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"dontUseGeo"}},[t._v("Search areas")])]),t._v(" "),s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.useLocalAreas,expression:"useLocalAreas"}],staticClass:"form-check-input",attrs:{type:"radio",id:"doUseGeo",name:"geoRadioGroup"},domProps:{value:!0,checked:t._q(t.useLocalAreas,!0)},on:{change:function(e){t.useLocalAreas=!0}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"doUseGeo"}},[t._v("Use my location")])])]),t._v(" "),t.useLocalAreas?s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"areaSelector"}},[t._v("Farm areas near your current location")]),t._v(" "),s("select",{staticClass:"form-control",attrs:{name:"areas"},on:{input:function(e){t.addArea(e.target.value)}}},[t.localArea.length<1?s("option",{attrs:{value:""}},[t._v("No other areas nearby")]):t._e(),t._v(" "),t.localArea.length>0?s("option",{attrs:{value:"",selected:""}},[t._v("-- Select an Area --")]):t._e(),t._v(" "),t._l(t.localArea,function(e){return t.localArea.length>0?s("option",{domProps:{value:e.tid}},[t._v("\n          "+t._s(e.name)+"\n        ")]):t._e()})],2)]):t._e(),t._v(" "),t.useLocalAreas?t._e():s("Autocomplete",{attrs:{objects:t.filteredAreas,searchKey:"name",searchId:"tid",label:"Add areas to the log"},on:{results:function(e){t.addArea(e)}}},[s("template",{slot:"empty"},[s("div",{staticClass:"empty-slot"},[s("em",[t._v("No areas found.")]),t._v(" "),s("br"),t._v(" "),s("button",{staticClass:"btn btn-light",attrs:{type:"button",name:"button"},on:{click:t.forceSync}},[t._v("\n            Sync Now\n          ")])])])],2),t._v(" "),s("div",{staticClass:"form-item form-item-name form-group"},[s("ul",{staticClass:"list-group"},t._l(t.logs[t.currentLogIndex].field_farm_area,function(e,n){return s("li",{key:"log-"+n+"-"+Math.floor(1e6*Math.random()),staticClass:"list-group-item"},[t._v("\n          "+t._s(e.name)+"\n          "),s("span",{staticClass:"remove-list-item",on:{click:function(s){t.removeArea(e)}}},[t._v("\n            ✕\n          ")])])}))]),t._v(" "),s("div",{staticClass:"form-item form-item-name form-group"},[s("button",{staticClass:"btn btn-success btn-navbar",attrs:{disabled:!1,title:"Add my GPS location to the log",type:"button"},on:{click:t.addLocation}},[t._v("\n        Add my GPS location to the log\n      ")])]),t._v(" "),s("div",{staticClass:"form-item form-item-name form-group"},[s("ul",{staticClass:"list-group"},[t.logs[t.currentLogIndex].field_farm_geofield.length>0?s("li",{staticClass:"list-group-item"},[t._v("\n          "+t._s(t.logs[t.currentLogIndex].field_farm_geofield[0].geom)+"\n        ")]):t._e(),t._v(" "),t.attachGeo&&t.isWorking?s("li",{staticClass:"list-item-group"},[s("icon-spinner")],1):t._e()])]),t._v(" "),s("h4",[t._v("Images")]),t._v(" "),s("div",{staticClass:"form-item form-item-name form-group"},[s("button",{staticClass:"btn btn-info btn-navbar navbar-right",attrs:{disabled:!1,title:"Take picture with camera",type:"button"},on:{click:t.getPhoto}},[t._v("\n        Take picture with camera\n      ")])]),t._v(" "),s("div",{staticClass:"form-item form-item-name form-group"},[s("div",{staticClass:"input-group "},[s("label",{staticClass:"custom-file-label",attrs:{for:"customFile"}},[t._v("\n          Select photo from file\n        ")]),t._v(" "),s("input",{ref:"photo",staticClass:"custom-file-input",attrs:{type:"file"},on:{change:function(e){t.loadPhoto(e.target.files)}}})])]),t._v(" "),s("div",{staticClass:"form-item form-item-name form-group"},t._l(t.imageUrls,function(e){return s("img",{key:"preview-"+t.imageUrls.indexOf(e),staticClass:"preview",attrs:{src:e}})})),t._v(" "),s("div",{staticClass:"input-group"},[s("router-link",{attrs:{to:"/logs"}},[s("button",{staticClass:"btn btn-success btn-lg",attrs:{disabled:!1,title:"Done Editing",type:"button"}},[t._v("\n          Done Editing\n        ")])])],1),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"well"})],1)])},staticRenderFns:[]};var m=s("VU/8")(u,d,!1,function(t){s("f003")},"data-v-517133bf",null);e.a=m.exports},zSIY:function(t,e,s){"use strict";var n=s("NYxO"),o={computed:Object(n.b)({logs:function(t){return t.farm.logs},areas:function(t){return t.farm.areas},assets:function(t){return t.farm.assets},currentLogIndex:function(t){return t.farm.currentLogIndex},statusText:function(t){return t.farm.statusText},photoLoc:function(t){return t.farm.photoLoc},geolocation:function(t){return t.farm.geolocation},localArea:function(t){return t.farm.localArea}}),beforeDestroy:function(){this.$store.commit("clearLogs")}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view",{attrs:{logs:this.logs,areas:this.areas,assets:this.assets,currentLogIndex:this.currentLogIndex,photoLoc:this.photoLoc,geolocation:this.geolocation,localArea:this.localArea}})],1)},staticRenderFns:[]};var r=s("VU/8")(o,a,!1,function(t){s("8zGy")},null,null);e.a=r.exports}},["NHnr"]);