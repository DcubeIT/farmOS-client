!function(e){function t(t){for(var n,r,i=t[0],l=t[1],c=t[2],d=0,m=[];d<i.length;d++)r=i[d],s[r]&&m.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);m.length;)m.shift()();return a.push.apply(a,c||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,i=1;i<o.length;i++){var l=o[i];0!==s[l]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=o[0]))}return e}var n={},s={0:0},a=[];function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=n,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;a.push(["Vtdi",1]),o()}({"+XVi":function(e,t){e.exports="data:image/png;base64,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"},"18Nx":function(e,t,o){},"5Nyv":function(e,t,o){"use strict";var n=o("J4qC");o.n(n).a},"8iZO":function(e,t,o){"use strict";var n=o("OgO9");o.n(n).a},"9W5K":function(e,t,o){},"9u7i":function(e,t,o){},CKMK:function(e,t,o){},DeB4:function(e,t,o){},J4qC:function(e,t,o){},OgO9:function(e,t,o){},RnhZ:function(e,t,o){var n={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function s(e){var t=a(e);return o(t)}function a(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=a,e.exports=s,s.id="RnhZ"},Vtdi:function(e,t,o){"use strict";o.r(t);var n=o("oCYn"),s=o("jE9Z"),a=o("L2JU"),r={props:["useGeolocation"],computed:Object(a.b)({logs:function(e){return e.farm.logs},areas:function(e){return e.farm.areas},assets:function(e){return e.farm.assets},currentLogIndex:function(e){return e.farm.currentLogIndex},statusText:function(e){return e.farm.statusText},photoLoc:function(e){return e.farm.photoLoc},geolocation:function(e){return e.farm.geolocation},localArea:function(e){return e.farm.localArea},userId:function(e){return e.shell.user.uid}}),beforeDestroy:function(){this.$store.commit("clearLogs")}},i=o("KHd+"),l=Object(i.a)(r,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("router-view",{attrs:{logs:e.logs,areas:e.areas,assets:e.assets,currentLogIndex:e.currentLogIndex,photoLoc:e.photoLoc,geolocation:e.geolocation,localArea:e.localArea,useGeolocation:e.useGeolocation,userId:e.userId}})],1)},[],!1,null,null,null).exports,c=o("QbLZ"),u=o.n(c),d=o("wd/R"),m=o.n(d),f={props:["logs","userId"],components:{IconSync:Object(i.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}}),t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})])},[],!1,null,null,null).exports,IconEdit:Object(i.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}}),t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})])},[],!1,null,null,null).exports,IconDelete:Object(i.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}}),t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})])},[],!1,null,null,null).exports},data:function(){return{showDeleteDialog:!1,logIndexToDelete:null,readyToGetLogs:!1,logSearchTerms:""}},methods:{syncTime:function(e){return m.a.unix(e).format("YYYY-MM-DD")},showDate:function(e){return m.a.unix(e).format("MMM DD YYYY")},openDeleteDialog:function(e){this.showDeleteDialog=!0,this.logIndexToDelete=e},cancelDelete:function(){this.showDeleteDialog=!1},confirmDelete:function(){var e=this.logs[this.logIndexToDelete];console.log("Log to be deleted: ",e);var t={index:this.logIndexToDelete,local_id:e.local_id,id:e.id,remoteUri:e.remoteUri,name:e.name,type:e.type};this.$store.commit("deleteLog",t),this.showDeleteDialog=!1,console.log('Deleting log "'+t.name+'"...')},syncAll:function(){this.$store.commit("updateAllLogs",function(e){return u()({},e,{isReadyToSync:!0})}),this.readyToGetLogs=!0},getLogs:function(){""===this.logSearchTerms?this.$store.dispatch("getLogs",""):isNaN(this.logSearchTerms)?this.$store.dispatch("getLogs",JSON.parse("{"+this.logSearchTerms+"}")):this.$store.dispatch("getLogs",Number(this.logSearchTerms))}},watch:{logs:{handler:function(){this.readyToGetLogs&&(console.log("SENDING COMPLETE; TIME TO GET!"),this.$store.dispatch("getLogs",{assigned:this.userId,completed:"0",type:["farm_activity","farm_observation","farm_harvest","farm_input","farm_seeding"]}),this.readyToGetLogs=!1)}}}},g=(o("onSx"),Object(i.a)(f,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h1",[e._v("My Logs")]),e._v(" "),o("div",{staticClass:"btn-wrapper"},[o("router-link",{attrs:{to:{name:"edit-log",params:{type:"farm_observation"}}}},[o("button",{staticClass:"btn btn-success btn-navbar",attrs:{type:"button"}},[e._v("\n        Create log\n      ")])]),e._v(" "),o("button",{staticClass:"btn btn-info btn-navbar navbar-right",attrs:{type:"button"},on:{click:e.syncAll}},[e._v("\n      Sync all to farmOS\n    ")])],1),e._v(" "),o("div",{staticClass:"card-deck"},[e.logs.length<1?o("div",{staticClass:"card"},[e._m(0)]):e._e(),e._v(" "),e._l(e.logs,function(t,n){return e.logs.length>0?o("div",{key:"card-"+e.logs.indexOf(t),staticClass:"card"},[o("div",{staticClass:"card-body"},[o("p",[e._v("\n          "+e._s(e.showDate(t.timestamp))+"\n          "),t.wasPushedToServer?o("span",{staticClass:"sync-status"},[o("a",{attrs:{href:t.remoteUri}},[e._v("synced")]),e._v("\n            ("+e._s(e.syncTime(t.timestamp))+")\n          ")]):t.isReadyToSync?o("span",{staticClass:"sync-status"},[o("div",{staticClass:"spin",attrs:{"aria-hidden":"true"}},[o("icon-sync")],1)]):o("span",{staticClass:"sync-status"},[e._v("\n            unsynced\n          ")])]),e._v(" "),o("h5",[e._v(e._s(t.name))]),e._v(" "),o("router-link",{staticClass:"edit-btn",attrs:{to:{name:"edit-log",params:{index:n,type:t.type}}}},[o("icon-edit")],1),e._v(" "),o("div",{staticClass:"del-btn",on:{click:function(t){e.openDeleteDialog(n)}}},[o("icon-delete")],1)],1)]):e._e()})],2),e._v(" "),e.showDeleteDialog?o("div",{staticClass:"modal",attrs:{id:"delete-dialog",tabindex:"-1",role:"dialog"}},[o("div",{staticClass:"modal-filter"}),e._v(" "),o("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header"},[o("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e._v("Confirm Deletion")]),e._v(" "),o("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.cancelDelete}},[o("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]),e._v(" "),o("div",{staticClass:"modal-body"},[e._v("\n          Are sure you'd like to delete the log \""+e._s(e.logs[e.logIndexToDelete].name)+'"? \n          '),e.logs[e.logIndexToDelete].wasPushedToServer?o("span",[e._v("\n            Deleting it on this device will not remove the log from the server.\n          ")]):o("span",[e._v("\n            It has not yet been synced to the server and cannot be recovered after it's deleted.\n          ")])]),e._v(" "),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.cancelDelete}},[e._v("\n          Cancel\n        ")]),e._v(" "),o("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){e.confirmDelete()}}},[e._v("\n          Delete\n        ")])])])])]):e._e()])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-body"},[t("h4",{staticClass:"card-title"},[this._v("Let's Get Started!")]),this._v(" "),t("p",{staticClass:"card-text"},[this._v('\n          You don\'t have any logs to display yet. Logs are records of events\n          in farmOS. You can add some by clicking "Create Log" above.\n        ')])])}],!1,null,"1c5146b6",null).exports),h=o("YEIV"),v=o.n(h),p={props:["objects","searchKey","searchId","label"],data:function(){return{search:"",searchResults:[],counter:0,isOpen:!1}},methods:{openResults:function(){this.isOpen=!0},doSearch:function(e){var t=[];if(""!==e)for(var o=e.toLowerCase(),n=0;n<this.objects.length;n+=1){var s=this.objects[n];s.name.toLowerCase().includes(o)&&t.length<10&&t.push(s)}this.searchResults=t,this.search=e},selectSearchResult:function(e){""!==e&&(this.$emit("results",e),this.search="",this.doSearch(this.search))},onArrowDown:function(){this.counter<this.searchResults.length-1&&(this.counter=this.counter+1)},onArrowUp:function(e){e.preventDefault(),this.counter>0&&(this.counter=this.counter-1)},onEnter:function(){var e=this.searchResults[this.counter][this.searchId];this.selectSearchResult(e)},handleClickOutside:function(e){this.$el.contains(e.target)||(this.isOpen=!1,this.arrowCounter=-1)}},mounted:function(){document.addEventListener("click",this.handleClickOutside)},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)}},A=(o("twv8"),Object(i.a)(p,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"form-item form-item-name form-group"},[o("label",{staticClass:"control-label",attrs:{for:"search"}},[e._v(e._s(e.label))]),e._v(" "),o("input",{staticClass:"form-control",attrs:{placeholder:"Enter text to search",type:"text"},domProps:{value:e.search},on:{focus:e.openResults,input:function(t){e.doSearch(t.target.value)},keydown:[function(t){return"button"in t||!e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?e.onArrowDown(t):null},function(t){return"button"in t||!e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?e.onArrowUp(t):null},function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.onEnter(t):null}]}}),e._v(" "),o("ul",{directives:[{name:"show",rawName:"v-show",value:e.isOpen&&e.search.length>0,expression:"isOpen && search.length > 0"}],staticClass:"list-group search-results"},[0===e.searchResults.length?o("li",{staticClass:"list-group-item empty"},[e._t("empty",[e._v("No Results")])],2):e._l(e.searchResults,function(t,n){return o("li",{key:"result-"+n+"-"+Math.floor(1e6*Math.random()),staticClass:"list-group-item",class:{"is-active":n===e.counter},on:{click:function(o){e.selectSearchResult(t[e.searchId])}}},[e._v("\n      "+e._s(t[e.searchKey])+"\n    ")])})],2)])},[],!1,null,"385432a5",null).exports),C=(o("mRpm"),Object(i.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{staticClass:"spinner",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("g",[t("circle",{staticClass:"path",attrs:{cx:"12",cy:"12",r:"10",fill:"none","stroke-width":"3"}})])])},[],!1,null,"40d7c23d",null).exports),w={props:["label","labelPosition","checked"]},y=(o("5Nyv"),{components:{Autocomplete:A,IconSpinner:C,ToggleCheck:Object(i.a)(w,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.label&&"before"===e.labelPosition?o("label",[e._v(e._s(e.label)+" ")]):e._e(),e._v(" "),o("input",{staticClass:"toggle-check",attrs:{type:"checkbox"},domProps:{checked:e.checked},on:{input:function(t){e.$emit("input",t.target.checked)}}}),e._v(" "),e.label&&"after"===e.labelPosition?o("label",[e._v(e._s(e.label)+" ")]):e._e()])},[],!1,null,"0f9459f7",null).exports},data:function(){return{imageUrls:[],attachGeo:!1,useLocalAreas:!1,addedArea:!1,isWorking:!1,existingLog:!1,logTypes:{farm_observation:"Observation",farm_activity:"Activity",farm_input:"Input",farm_harvest:"Harvest",farm_seeding:"Seeding"}}},props:["logs","areas","assets","currentLogIndex","statusText","photoLoc","geolocation","localArea","useGeolocation","type"],created:function(){"number"==typeof this.$route.params.index?(this.$store.commit("setCurrentLogIndex",this.$route.params.index),console.log("SETTING CURRENT LOG INDEX AS "+this.$route.params.index),this.existingLog=!0):(this.$store.dispatch("initializeLog",this.type),console.log("LOG IS RECEIVING TYPE AS "+this.type))},methods:{convertOutOfUnix:function(e){var t=new Date(1e3*e),o=function(e){return e<10?"0"+e:e},n=o(t.getMonth()+1),s=o(t.getDate());return t.getFullYear()+"-"+n+"-"+s},convertIntoUnix:function(e){var t=+e.split("-")[0],o=+e.split("-")[1]-1,n=+e.split("-")[2];return Math.floor(new Date(t,o,n).getTime()/1e3).toString()},forceSync:function(){this.$store.dispatch("forceSyncAssetsAndAreas")},updateCurrentLog:function(e,t){var o;console.log("CURRENT LOG IS ",this.logs[this.currentLogIndex]);var n=(o={},v()(o,e,t),v()(o,"isCachedLocally",!1),v()(o,"wasPushedToServer",!1),o);this.$store.commit("updateCurrentLog",n),console.log("WROTE THE FOLLOWING TO CURRENT LOG WITH updateCurrentLog"),console.log(n)},addAsset:function(e){var t=this.assets.find(function(t){return t.id===e}),o=this.logs[this.currentLogIndex].field_farm_asset.concat(t);this.updateCurrentLog("field_farm_asset",o)},addArea:function(e){if(""!==e){var t=this.areas.find(function(t){return t.tid===e}),o=this.logs[this.currentLogIndex].field_farm_area.concat(t);this.updateCurrentLog("field_farm_area",o),this.checkAreas()}this.checkAreas()},removeAsset:function(e){var t=this.logs[this.currentLogIndex].field_farm_asset.filter(function(t){return t.id!==e.id});this.updateCurrentLog("field_farm_asset",t)},removeArea:function(e){var t=this.logs[this.currentLogIndex].field_farm_area.filter(function(t){return t.tid!==e.tid});this.updateCurrentLog("field_farm_area",t)},getPhoto:function(){return this.$store.dispatch("getPhotoLoc")},loadPhoto:function(e){for(var t=0;t<e.length;t+=1)this.imageUrls.push(window.URL.createObjectURL(e[t])),this.$store.dispatch("loadPhotoBlob",e[t])},addLocation:function(){if(void 0===this.geolocation.Longitude&&(this.$store.dispatch("getGeolocation"),this.attachGeo=!0,this.isWorking=!0),void 0!==this.geolocation.Longitude){this.attachGeo=!0;var e=JSON.parse('[{"geom":"POINT ('+this.geolocation.Longitude+" "+this.geolocation.Latitude+')"}]');console.log("ATTACH GEOLOCATION: "+e),this.updateCurrentLog("field_farm_geofield",e)}},checkAreas:function(){var e=this;console.log("CALLED CHECKAREAS; DOING CHECKINSIDE"),this.filteredAreas.forEach(function(t){if(void 0!==t.field_farm_geofield[0]&&void 0!==e.geolocation.Longitude){var o={point:[e.geolocation.Longitude,e.geolocation.Latitude],area:t,radius:.02};e.$store.dispatch("checkInNear",o)}})}},computed:{filteredAssets:function(){var e=this.logs[this.currentLogIndex].field_farm_asset;return this.assets.filter(function(t){return!e.some(function(e){return t.id===e.id})})},filteredAreas:function(){var e=this.logs[this.currentLogIndex].field_farm_area;return this.areas.filter(function(t){return!e.some(function(e){return t.tid===e.tid})})}},watch:{photoLoc:function(){console.log("UPDATING CURRENT RECORD PHOTO LOC: "+this.photoLoc),this.updateCurrentLog("images",this.photoLoc)},geolocation:function(){if(this.attachGeo&&void 0!==this.geolocation.Longitude){var e=JSON.parse('[{"geom":"POINT ('+this.geolocation.Longitude+" "+this.geolocation.Latitude+')"}]');console.log("ATTACH GEOLOCATION: "+e),this.updateCurrentLog("field_farm_geofield",e),this.isWorking=!1}this.useLocalAreas&&void 0!==this.geolocation.Longitude&&(this.checkAreas(),this.isWorking=!1)},useLocalAreas:function(){this.useLocalAreas&&(console.log("USELOCALAREAS SET TO TRUE"),void 0===this.geolocation.Longitude&&(this.$store.commit("clearLocalArea"),this.$store.dispatch("getGeolocation"),this.isWorking=!0),void 0!==this.geolocation.Longitude&&(this.$store.commit("clearLocalArea"),this.checkAreas()))},$route:function(e){"number"==typeof e.params.index?this.$store.commit("setCurrentLogIndex",this.$route.params.index):(this.$store.dispatch("initializeLog",this.type),console.log("LOG IS RECEIVING TYPE AS "+this.type))}}}),b=(o("iXJI"),Object(i.a)(y,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h1",[e._v("Edit Log")]),e._v(" "),o("div",{staticClass:"well"},[o("div",{staticClass:"form-item form-item-name form-group"},[o("label",{staticClass:"control-label",attrs:{for:"name"}},[e._v("Name")]),e._v(" "),o("input",{staticClass:"form-control",attrs:{placeholder:"Enter name",type:"text",autofocus:""},domProps:{value:e.logs[e.currentLogIndex].name},on:{input:function(t){e.updateCurrentLog("name",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"form-item form-item-name form-group"},[o("label",{staticClass:"control-label",attrs:{for:"Date"}},[e._v("Date")]),e._v(" "),o("input",{staticClass:"form-control",attrs:{type:"date"},domProps:{value:e.convertOutOfUnix(e.logs[e.currentLogIndex].timestamp)},on:{input:function(t){e.updateCurrentLog("timestamp",e.convertIntoUnix(t.target.value))}}})]),e._v(" "),o("div",{staticClass:"form-item form-item-name form-group"},[o("label",{staticClass:"control-label ",attrs:{for:"type"}},[e._v("Log Type")]),e._v(" "),o("div",{staticClass:"input-group"},[o("select",{staticClass:"custom-select col-sm-3 ",domProps:{value:e.logs[e.currentLogIndex].type},on:{input:function(t){e.updateCurrentLog("type",t.target.value)}}},e._l(e.logTypes,function(t,n){return o("option",{key:t+"-"+n,domProps:{value:n}},[e._v("\n              "+e._s(t)+"\n            ")])}))])]),e._v(" "),o("div",{staticClass:"form-item form-item-name form-group"},[o("label",{staticClass:"control-label ",attrs:{for:"notes"}},[e._v("Notes")]),e._v(" "),o("textarea",{staticClass:"form-control",attrs:{placeholder:"Enter notes",type:"text"},domProps:{value:e.logs[e.currentLogIndex].notes},on:{input:function(t){e.updateCurrentLog("notes",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"form-item form-group"},[o("toggle-check",{attrs:{label:"Done",labelPosition:"after",checked:e.logs[e.currentLogIndex].done},on:{input:function(t){e.updateCurrentLog("done",t)}}})],1),e._v(" "),o("h4",[e._v("Assets")]),e._v(" "),o("Autocomplete",{attrs:{objects:e.filteredAssets,searchKey:"name",searchId:"id",label:"Add assets to the log"},on:{results:function(t){e.addAsset(t)}}},[o("template",{slot:"empty"},[o("div",{staticClass:"empty-slot"},[o("em",[e._v("No assets found.")]),e._v(" "),o("br"),e._v(" "),o("button",{staticClass:"btn btn-light",attrs:{type:"button",name:"button"},on:{click:e.forceSync}},[e._v("\n            Sync Now\n          ")])])])],2),e._v(" "),o("div",{staticClass:"form-item form-item-name form-group"},[o("ul",{staticClass:"list-group"},e._l(e.logs[e.currentLogIndex].field_farm_asset,function(t,n){return o("li",{key:"log-"+n+"-"+Math.floor(1e6*Math.random()),staticClass:"list-group-item"},[e._v("\n          "+e._s(t.name)+"\n          "),o("span",{staticClass:"remove-list-item",on:{click:function(o){e.removeAsset(t)}}},[e._v("\n            ✕\n          ")])])}))]),e._v(" "),o("h4",[e._v("Areas & Location")]),e._v(" "),e.useGeolocation?o("div",{staticClass:"form-item form-item-name form-group"},[o("div",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.useLocalAreas,expression:"useLocalAreas"}],staticClass:"form-check-input",attrs:{type:"radio",id:"dontUseGeo",name:"geoRadioGroup",checked:""},domProps:{value:!1,checked:e._q(e.useLocalAreas,!1)},on:{change:function(t){e.useLocalAreas=!1}}}),e._v(" "),o("label",{staticClass:"form-check-label",attrs:{for:"dontUseGeo"}},[e._v("Search areas")])]),e._v(" "),o("div",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.useLocalAreas,expression:"useLocalAreas"}],staticClass:"form-check-input",attrs:{type:"radio",id:"doUseGeo",name:"geoRadioGroup"},domProps:{value:!0,checked:e._q(e.useLocalAreas,!0)},on:{change:function(t){e.useLocalAreas=!0}}}),e._v(" "),o("label",{staticClass:"form-check-label",attrs:{for:"doUseGeo"}},[e._v("Use my location")])])]):e._e(),e._v(" "),e.useLocalAreas?o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"areaSelector"}},[e._v("Farm areas near your current location")]),e._v(" "),o("select",{staticClass:"form-control",attrs:{name:"areas"},on:{input:function(t){e.addArea(t.target.value)}}},[e.localArea.length<1?o("option",{attrs:{value:""}},[e._v("No other areas nearby")]):e._e(),e._v(" "),e.localArea.length>0?o("option",{attrs:{value:"",selected:""}},[e._v("-- Select an Area --")]):e._e(),e._v(" "),e._l(e.localArea,function(t){return e.localArea.length>0?o("option",{key:"area-"+t.tid,domProps:{value:t.tid}},[e._v("\n          "+e._s(t.name)+"\n        ")]):e._e()})],2)]):e._e(),e._v(" "),e.useLocalAreas?e._e():o("Autocomplete",{attrs:{objects:e.filteredAreas,searchKey:"name",searchId:"tid",label:"Add areas to the log"},on:{results:function(t){e.addArea(t)}}},[o("template",{slot:"empty"},[o("div",{staticClass:"empty-slot"},[o("em",[e._v("No areas found.")]),e._v(" "),o("br"),e._v(" "),o("button",{staticClass:"btn btn-light",attrs:{type:"button",name:"button"},on:{click:e.forceSync}},[e._v("\n            Sync Now\n          ")])])])],2),e._v(" "),o("div",{staticClass:"form-item form-item-name form-group"},[o("ul",{staticClass:"list-group"},e._l(e.logs[e.currentLogIndex].field_farm_area,function(t,n){return o("li",{key:"log-"+n+"-"+Math.floor(1e6*Math.random()),staticClass:"list-group-item"},[e._v("\n          "+e._s(t.name)+"\n          "),o("span",{staticClass:"remove-list-item",on:{click:function(o){e.removeArea(t)}}},[e._v("\n            ✕\n          ")])])}))]),e._v(" "),e.useGeolocation?o("div",{staticClass:"form-item form-item-name form-group"},[o("button",{staticClass:"btn btn-success btn-navbar",attrs:{disabled:!1,title:"Add my GPS location to the log",type:"button"},on:{click:e.addLocation}},[e._v("\n        Add my GPS location to the log\n      ")])]):e._e(),e._v(" "),o("div",{staticClass:"form-item form-item-name form-group"},[o("ul",{staticClass:"list-group"},[e.logs[e.currentLogIndex].field_farm_geofield.length>0?o("li",{staticClass:"list-group-item"},[e._v("\n          "+e._s(e.logs[e.currentLogIndex].field_farm_geofield[0].geom)+"\n          "),o("span",{staticClass:"remove-list-item",on:{click:function(t){e.updateCurrentLog("field_farm_geofield",[])}}},[e._v("\n            ✕\n          ")])]):e._e(),e._v(" "),e.attachGeo&&e.isWorking?o("li",{staticClass:"list-item-group"},[o("icon-spinner")],1):e._e()])]),e._v(" "),o("h4",[e._v("Images")]),e._v(" "),o("div",{staticClass:"form-item form-item-name form-group"},[o("button",{staticClass:"btn btn-info btn-navbar navbar-right",attrs:{disabled:!1,title:"Take picture with camera",type:"button"},on:{click:e.getPhoto}},[e._v("\n        Take picture with camera\n      ")])]),e._v(" "),o("div",{staticClass:"form-item form-item-name form-group"},[o("div",{staticClass:"input-group "},[o("label",{staticClass:"custom-file-label",attrs:{for:"customFile"}},[e._v("\n          Select photo from file\n        ")]),e._v(" "),o("input",{ref:"photo",staticClass:"custom-file-input",attrs:{type:"file"},on:{change:function(t){e.loadPhoto(t.target.files)}}})])]),e._v(" "),o("div",{staticClass:"form-item form-item-name form-group"},e._l(e.imageUrls,function(t){return o("img",{key:"preview-"+e.imageUrls.indexOf(t),staticClass:"preview",attrs:{src:t}})})),e._v(" "),o("div",{staticClass:"input-group"},[o("router-link",{attrs:{to:"/logs"}},[o("button",{staticClass:"btn btn-success btn-lg",attrs:{disabled:!1,title:"Done Editing",type:"button"}},[e._v("\n          Done Editing\n        ")])])],1),e._v(" "),o("br"),e._v(" "),o("div",{staticClass:"well"})],1)])},[],!1,null,"5eae2f50",null).exports);n.a.use(s.a);var L=new s.a({routes:[{path:"/",redirect:"/logs"},{path:"/logs",component:l,children:[{path:"",name:"logs",component:g},{path:"edit/:type",name:"edit-log",component:b,props:!0}]}]}),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.log_owner,o=void 0===t?"":t,n=e.notes,s=void 0===n?"":n,a=e.quantity,r=void 0===a?"":a,i=e.id,l=void 0===i?null:i,c=e.local_id,u=void 0===c?null:c,d=e.name,m=void 0===d?"":d,f=e.type,g=void 0===f?"":f,h=e.timestamp,v=void 0===h?"":h,p=e.images,A=void 0===p?[]:p,C=e.done,w=void 0===C||C,y=e.isCachedLocally,b=void 0!==y&&y,L=e.wasPushedToServer,E=void 0!==L&&L,S=e.isReadyToSync,I=void 0!==S&&S,_=e.remoteUri,O=void 0===_?"":_,k=e.field_farm_asset,T=void 0===k?[]:k,x=e.field_farm_area,j=void 0===x?[]:x,R=e.field_farm_geofield;return{log_owner:o,notes:s,quantity:r,id:l,local_id:u,name:m,type:g,timestamp:v,images:A,done:w,isCachedLocally:b,wasPushedToServer:E,isReadyToSync:I,remoteUri:O,field_farm_asset:T,field_farm_area:j,field_farm_geofield:void 0===R?[]:R}},S=o("WVt+"),I={actions:{getGeolocation:function(e){var t=e.commit,o={};navigator.geolocation.getCurrentPosition(function(e){o.Latitude=e.coords.latitude,o.Longitude=e.coords.longitude,o.Altitude=e.coords.altitude,o.Accuracy=e.coords.accuracy,o.AltitudeAccuracy=e.coords.altitudeAccuracy,o.Heading=e.coords.heading,o.Speed=e.coords.speed,o.Timestamp=e.timestamp,console.log("SETTING GEOLOCATION AS:"),console.log(o),t("setGeoloc",o)},function(e){console.log("Code: "+e.code+" Message: "+e.message)})},checkInNear:function(e,t){var o=e.commit;function n(e){var t=e.split(", "),o=[];return t.forEach(function(e){var t=e.split(" ");o.push([Number(t[0]),Number(t[1])])}),o}var s=function(e){var t=[];return e.includes("GEOMETRY")?e.slice(30,-3).split(")), POLYGON ((").forEach(function(e){t.push(n(e))}):t.push(n(e.slice(10,-2))),t}(t.area.field_farm_geofield[0].geom),a=S.circle(t.point,t.radius,{units:"kilometers"}),r=S.polygon(s),i=S.inside(t.point,r),l=null!==S.intersect(a,r);console.log(t.area.name+" ISINSIDE RESULTS: "+i+"; ISNEAR RESULTS: "+l),(i||l)&&o("addLocalArea",t.area)}}};n.a.use(a.a);var _={state:{errors:[],user:{name:"",email:"",uid:null,isLoggedIn:!1},settings:{useGeolocation:!0}},mutations:{logError:function(e,t){e.errors=e.errors.concat([t])},dismissError:function(e,t){var o=u()({},e.errors[t],{show:!1});e.errors.splice(t,1,o)},changeUsername:function(e,t){e.user.name=t},changeEmail:function(e,t){e.user.email=t},changeUid:function(e,t){e.user.uid=t},setLoginStatus:function(e,t){e.user.isLoggedIn=t},setUseGeolocation:function(e,t){e.settings.useGeolocation=t}}},O={state:{name:"",url:"",logs:[],assets:[],areas:[],currentLogIndex:0,photoLoc:"",geolocation:{},localArea:[]},mutations:{changeFarmName:function(e,t){e.name=t},changeFarmUrl:function(e,t){e.url=t},addLogs:function(e,t){e.logs=e.logs.concat(t)},addAssets:function(e,t){e.assets=e.assets.concat(t)},addAreas:function(e,t){e.areas=e.areas.concat(t)},addLogAndMakeCurrent:function(e,t){e.currentLogIndex=e.logs.push(t)-1},addLogFromServer:function(e,t){var o=e.logs.push(t)-1;this.dispatch("serverLogToDb",{index:o,log:t})},setCurrentLogIndex:function(e,t){e.currentLogIndex=t},updateCurrentLog:function(e,t){var o=E(u()({},e.logs[e.currentLogIndex],t));e.logs.splice(e.currentLogIndex,1,o)},updateLogFromServer:function(e,t){e.logs.splice(t.index,1,t.log)},updateAllLogs:function(e,t){e.logs=e.logs.map(function(e){return t(e)})},updateLogs:function(e,t){t.indices.map(function(o){return e.logs.splice(o,1,t.mapper(e.logs[o]))})},updateAsset:function(e,t){var o=e.assets.findIndex(function(e){return e.id===t.id});e.assets.splice(o,1,t)},updateArea:function(e,t){var o=e.areas.findIndex(function(e){return e.id===t.id});e.areas.splice(o,1,t)},deleteLog:function(e,t){var o=t.index;e.logs.splice(o,1)},deleteAllAssets:function(e){e.assets=[]},deleteAllAreas:function(e){e.areas=[]},clearLogs:function(e){e.logs.splice(0,e.logs.length)},clearAssets:function(e){e.assets.splice(0,e.assets.length)},clearAreas:function(e){e.areas.splice(0,e.areas.length)},setPhotoLoc:function(e,t){e.photoLoc=t},setGeoloc:function(e,t){e.geolocation=t},addLocalArea:function(e,t){e.localArea.push(t)},clearLocalArea:function(e){e.localArea=[]}},actions:{initializeLog:function(e,t){var o=e.commit,n=new Date,s=Math.floor(n/1e3).toString(),a=n.toLocaleTimeString("en-US"),r=n.toLocaleDateString("en-US");o("addLogAndMakeCurrent",E({type:t,name:r+" - "+a,timestamp:s}))},forceSyncAssetsAndAreas:function(){},getLogs:function(e,t){e.commit},serverLogToDb:function(e,t){e.commit}}},k=new a.a.Store({modules:{shell:_,farm:O,geo:I}}),T={name:"App",components:{IconMenu:Object(i.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}})])},[],!1,null,null,null).exports,IconArrowBack:Object(i.a)({},function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}})])},[],!1,null,null,null).exports},data:function(){return{showDrawer:!1}},computed:Object(a.b)({errors:function(e){return e.shell.errors},username:function(e){return e.shell.user.name},isLoggedIn:function(e){return e.shell.user.isLoggedIn},useGeolocation:function(e){return e.shell.settings.useGeolocation},farmName:function(e){return e.farm.name},farmUrl:function(e){return""===e.farm.url?"example.farmos.net":e.farm.url}}),watch:{showDrawer:function(e){e?document.querySelector("body").setAttribute("style","overflow-y: hidden"):document.querySelector("body").setAttribute("style","overflow-y: visible")}},methods:{closeError:function(e){this.$store.commit("dismissError",e)},setUseGeolocation:function(e){this.$store.commit("setUseGeolocation",e)}}},x=(o("8iZO"),Object(i.a)(T,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"html",attrs:{id:"app"}},[n("transition",{attrs:{name:"filter"}},[e.showDrawer?n("div",{staticClass:"modal-filter",on:{click:function(t){e.showDrawer=!e.showDrawer}}}):e._e()]),e._v(" "),n("header",{staticClass:"navbar navbar-light fixed-top bg-light"},[n("div",{staticClass:"menu",on:{click:function(t){e.showDrawer=!e.showDrawer}}},[n("icon-menu")],1),e._v(" "),n("img",{staticClass:"logo",attrs:{src:o("+XVi"),alt:"farmOS"}})]),e._v(" "),n("transition",{attrs:{name:"drawer"}},[e.showDrawer?n("div",{staticClass:"drawer container-fluid"},[n("header",{staticClass:"drawer-header row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"arrow-back",on:{click:function(t){e.showDrawer=!e.showDrawer}}},[n("icon-arrow-back")],1),e._v(" "),e.isLoggedIn?n("div",{staticClass:"user-info"},[n("h2",[e._v(e._s(e.farmName))]),e._v(" "),n("p",[e._v(e._s(e.farmUrl.replace(/(^\w+:|^)\/\//,"")))]),e._v(" "),n("p",[e._v(e._s(e.username))])]):n("div",{staticClass:"user-info"},[n("h2",[e._v("Welcome to farmOS")]),e._v(" "),n("p",[e._v("Login for more options.")])])])]),e._v(" "),n("ul",{staticClass:"row list-group",on:{click:function(t){e.showDrawer=!e.showDrawer}}},[n("router-link",{attrs:{to:{name:"logs"}}},[n("li",{staticClass:"list-group-item"},[e._v("All Logs")])]),e._v(" "),n("router-link",{attrs:{to:{name:"edit-log",params:{type:"farm_activity"}}}},[n("li",{staticClass:"list-group-item"},[e._v("New Activity")])]),e._v(" "),n("router-link",{attrs:{to:{name:"edit-log",params:{type:"farm_harvest"}}}},[n("li",{staticClass:"list-group-item"},[e._v("New Harvest")])]),e._v(" "),n("router-link",{attrs:{to:{name:"edit-log",params:{type:"farm_input"}}}},[n("li",{staticClass:"list-group-item"},[e._v("New Input")])]),e._v(" "),n("router-link",{attrs:{to:{name:"edit-log",params:{type:"farm_observation"}}}},[n("li",{staticClass:"list-group-item"},[e._v("New Observation")])]),e._v(" "),n("router-link",{attrs:{to:{name:"edit-log",params:{type:"farm_seeding"}}}},[n("li",{staticClass:"list-group-item"},[e._v("New Seeding")])])],1),e._v(" "),n("ul",{staticClass:"row list-group"},[n("li",{staticClass:"list-group-item"},[n("label",{attrs:{for:"location-switch"}},[e._v("Share My Location ")]),e._v(" "),n("input",{staticClass:"toggle-check",attrs:{id:"location-switch",type:"checkbox"},domProps:{checked:e.useGeolocation},on:{input:function(t){e.setUseGeolocation(t.target.checked)}}})]),e._v(" "),e.isLoggedIn?e._e():n("router-link",{attrs:{to:"/login"}},[n("li",{staticClass:"list-group-item",on:{click:function(t){e.showDrawer=!e.showDrawer}}},[e._v("Login")])]),e._v(" "),e.isLoggedIn?n("router-link",{attrs:{to:"/logout"}},[n("li",{staticClass:"list-group-item",on:{click:function(t){e.showDrawer=!e.showDrawer}}},[e._v("Logout")])]):e._e()],1)]):e._e()]),e._v(" "),n("div",{staticClass:"main-container container-fluid"},[n("div",{staticClass:"row"},[n("section",{staticClass:"col-sm-12"},[e._l(e.errors,function(t,o){return n("div",{key:"err-"+e.errors.indexOf(t)},[t.show?n("div",{staticClass:"alert alert-warning alert-dismissable"},[n("span",{domProps:{innerHTML:e._s(t.message)}}),e._v(" "),n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){e.closeError(o)}}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]):e._e()])}),e._v(" "),n("div",{staticClass:"region region-content"},[n("div",{staticClass:"block block-system"},[n("router-view",{attrs:{useGeolocation:e.useGeolocation}})],1)])],2)])])],1)},[],!1,null,"ba28f0bc",null).exports);o("qQ/H"),o("oGNR");n.a.config.productionTip=!1;var j=o("/f1G"),R=o.n(j),D=o("GQeE"),U=o.n(D),G=o("gDS+"),N=o.n(G),Y=o("4d7F"),M=o.n(Y),P=o("EJiy"),B=o.n(P),F="WEBSQL",W="VUEX_STORE",V="VUEX_STORE_FROM_SERVER",J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.log_owner,o=void 0===t?"":t,n=e.notes,s=void 0===n?"":n,a=e.quantity,r=void 0===a?"":a,i=e.id,l=e.local_id,c=e.name,u=void 0===c?"":c,d=e.type,m=void 0===d?"":d,f=e.timestamp,g=void 0===f?"":f,h=e.images,v=void 0===h?[]:h,p=e.done,A=void 0===p||p,C=e.isCachedLocally,w=void 0!==C&&C,y=e.wasPushedToServer,b=void 0!==y&&y,L=e.remoteUri,E=void 0===L?"":L,S=e.field_farm_asset,I=void 0===S?[]:S,_=e.field_farm_area,O=void 0===_?[]:_,k=e.field_farm_geofield,T=void 0===k?[]:k,x=e.field_farm_notes,j=void 0===x?{value:"",format:"farm_format"}:x,R=arguments[1],D=void 0;if(R!==W&&void 0!==R||(D={log_owner:o,notes:s,quantity:r,id:i,local_id:l,name:u,type:m,timestamp:g,images:X(v),done:JSON.parse(A),isCachedLocally:JSON.parse(w),wasPushedToServer:JSON.parse(b),remoteUri:E,field_farm_asset:H(I),field_farm_area:H(O),field_farm_geofield:H(T)}),R===V&&(D={log_owner:o,notes:z(j),quantity:r,id:i,local_id:l,name:u,type:m,timestamp:g,images:X(v),done:JSON.parse(A),isCachedLocally:JSON.parse(w),wasPushedToServer:JSON.parse(b),remoteUri:E,field_farm_asset:H(I),field_farm_area:H(O),field_farm_geofield:H(T)}),"FARMOS_SERVER"===R){var U=I.map(function(e){return{id:e.id}}),G=O.map(function(e){return{id:e.tid}});console.log("SENDING NOTES AS ",s),D={field_farm_notes:{format:"farm_format",value:s},name:u,done:A,type:m,timestamp:g,field_farm_images:v,field_farm_asset:U,field_farm_area:G,field_farm_geofield:T},i&&(D.id=i)}return R===F&&(D={log_owner:o,notes:s,quantity:r,id:i,name:u,type:m,timestamp:g,images:v,done:A,wasPushedToServer:b,remoteUri:E,field_farm_asset:N()(I),field_farm_area:N()(O),field_farm_geofield:N()(T)},l&&(D.local_id=l)),D};function X(e){if("object"===(void 0===e?"undefined":B()(e)))return e;if("string"==typeof e)return""===e?[]:[].concat(e);throw new Error(e+" cannot be parsed as an image array")}function H(e){if("object"===(void 0===e?"undefined":B()(e)))return e;if("string"==typeof e)return JSON.parse(e);throw new Error(e+" cannot be parsed as an image array")}function z(e){return void 0!==e.value&&""!==e.value&&null!==e.value?(console.log("NOTE VALUE: "+e.value),e.value.slice(3,-5)):""}var q={actions:{createLog:function(e,t){var o=e.commit,n=J(t,F);K().then(function(e){return Q(e,"log",n)}).then(function(e){return $(e,"log",n)}).then(function(e){return o("updateCurrentLog",{local_id:e.insertId,isCachedLocally:!0})})},createLogFromServer:function(e,t){var o=e.commit,n=J(t.log,F);console.log("CREATING THE FOLLOWING LOG IN DBMODULE:",n),K().then(function(e){return Q(e,"log",n)}).then(function(e){return $(e,"log",n)}).then(function(e){o("updateLogFromServer",{index:t.index,log:J(u()({},t.log,{local_id:e.insertId,isCachedLocally:!0}),W)})})},loadCachedLogs:function(e){var t=e.commit;K().then(function(e){return ee(e,"log")}).then(function(e){var o=e.map(function(e){return J(u()({},e,{isCachedLocally:!0}),W)});t("addLogs",o)}).catch(console.error)},updateLog:function(e,t){var o=e.commit,n=e.rootState,s=J(u()({},n.farm.logs[n.farm.currentLogIndex],t),F);K().then(function(e){return Z(e,"log")}).then(function(e){return $(e,"log",s)}).then(function(){return o("updateCurrentLog",{isCachedLocally:!0})})},updateLogAtIndex:function(e,t){var o=e.commit,n=e.rootState;console.log("UPDATELOGATINDEX WITH log: ",t.log);var s=J(u()({},n.farm.logs[t.index],t.log),F);K().then(function(e){return Z(e,"log")}).then(function(e){return $(e,"log",s)}).then(function(){return o("updateLogFromServer",{index:t.index,log:J(u()({},t.log,{isCachedLocally:!0}),W)})})},deleteLog:function(e,t){var o=t.local_id,n=t.name;console.log("deleteRecord() action dispatched on ",n),K().then(function(e){return Z(e,"log")}).then(function(e){return function(e,t,o,n){return new M.a(function(s,a){var r=void 0;r=void 0===n?"DELETE FROM "+t+" WHERE local_id = "+o:"DELETE FROM "+t+" WHERE "+n+" = "+o,e.executeSql(r,[],function(e,t){return s(t)},function(e,t){return a(t)})})}(e,"log",o)}).then(console.log).catch(console.error)},deleteAllCachedLogs:function(){console.log("Deleting all logs"),K().then(function(e){return Z(e,"log")}).then(function(e){return te(e,"log")}).then(console.log).catch(console.error)},createCachedAsset:function(e,t){K().then(function(e){return Q(e,"asset",t,"id")}).then(function(e){return $(e,"asset",t)})},updateCachedAsset:function(e,t){K().then(function(e){return Z(e,"asset","id")}).then(function(e){return $(e,"asset",t)})},deleteAllCachedAssets:function(){console.log("Deleting all assets"),K().then(function(e){return Z(e,"asset")}).then(function(e){return te(e,"asset")}).then(console.log).catch(console.error)},loadCachedAssets:function(e){var t=e.commit;return new M.a(function(e,o){K().then(function(e){return ee(e,"asset")}).then(function(o){console.log("Cached Assets: ",o),t("addAssets",o),e()}).catch(o)})},createCachedArea:function(e,t){K().then(function(e){return Q(e,"area",t,"tid")}).then(function(e){return $(e,"area",t)})},updateCachedArea:function(e,t){K().then(function(e){return Z(e,"area","tid")}).then(function(e){return $(e,"area",t)})},deleteAllCachedAreas:function(){console.log("Deleting all areas"),K().then(function(e){return Z(e,"area")}).then(function(e){return te(e,"area")}).then(console.log).catch(console.error)},loadCachedAreas:function(e){var t=e.commit;return new M.a(function(e,o){K().then(function(e){return ee(e,"area")}).then(function(o){console.log("Cached Areas: ",o),t("addAreas",o),e()}).catch(o)})}}};function K(){return new M.a(function(e){console.log("opening database"),e(window.openDatabase("farmOSLocalDB","1.0","farmOS Local Database",2e5))})}function Z(e,t,o){return new M.a(function(n,s){function a(e,t){console.log("Get TX success. Result: ",t),n(e)}function r(e,t){console.log("Get TX error: ",t.message),s(e)}var i=void 0;i=void 0===o?"CREATE TABLE IF NOT EXISTS "+t+" (id INTEGER PRIMARY KEY AUTOINCREMENT, blankColumn TEXT)":"CREATE TABLE IF NOT EXISTS "+t+" ("+o+" INTEGER PRIMARY KEY, blankColumn TEXT)",e.transaction(function(e){e.executeSql(i,null,a,r)})})}function Q(e,t,o,n){return new M.a(function(s,a){console.log("making table with name "+t+" and the following data template: "+N()(o)),e.transaction(function(e){var r="";U()(o).forEach(function(e){if(e!==n){var t="";t="number"==typeof o[e]?" INT, ":"boolean"==typeof o[e]?" BOOLEAN, ":" VARCHAR(150), ",r=r+e+t}}),r=r.substring(0,r.length-2);var i=void 0;i=void 0===n?"CREATE TABLE IF NOT EXISTS "+t+" ( local_id INTEGER PRIMARY KEY AUTOINCREMENT, "+r+")":"CREATE TABLE IF NOT EXISTS "+t+" (\n          "+n+" INTEGER PRIMARY KEY,\n           "+r+"\n         )",e.executeSql(i,null,function(e,t){console.log("Make table success. Result: ",t),s(e)},function(e,t){console.log("Make table error: "+t.message),a(e)})})})}function $(e,t,o){return new M.a(function(n,s){console.log("SAVING THE FOLLOWING RECORDS:"),console.log(o);var a="",r="",i=U()(o),l=R()(o);i.forEach(function(e){a=a+e+", ",r+="?, "}),a=a.substring(0,a.length-2),r=r.substring(0,r.length-2),console.log("add record strings"),console.log(a),console.log(r),console.log(l);var c="INSERT OR REPLACE INTO "+t+" ("+a+") VALUES ("+r+")";e.executeSql(c,l,function(e,t){console.log("INSERT success"),n(t)},function(e,t){console.log("INSERT error: "+t.message),s(t.message)})})}function ee(e,t){return new M.a(function(o){function n(e,t){for(var n=[],s=0;s<t.rows.length;s+=1){var a=t.rows.item(s);console.log("RAW GETRECORDS RESULT "+s+": "+N()(a)),n.push(a)}o(n)}function s(){console.log("No old logs found in cache."),o([])}e.transaction(function(e){var o="SELECT * FROM "+t;e.executeSql(o,[],n,s)})})}function te(e,t){return new M.a(function(o,n){var s="DROP TABLE "+t;e.executeSql(s,[],function(e,t){return o(t)},function(e,t){return n(t)})})}var oe=function(e,t,o){function n(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.method,s=void 0===n?"GET":n,a=o.payload,r=void 0===a?"":a,i=o.token,l=void 0===i?"":i,c=o.auth,u=void 0!==c&&c,d=e+t,m={method:s,headers:{"Content-Type":"application/json",Accept:"json"},credentials:"include",mode:"cors"};return"POST"!==s&&"PUT"!==s||u||(m.headers["X-CSRF-Token"]=l,m.body=N()(r)),u&&(m.headers["Content-Type"]="application/x-www-form-urlencoded"),"POST"===s&&u&&(m.body="name="+r.name+"&pass="+r.pass+"&form_id="+r.form_id),new M.a(function(e,t){fetch(d,m).then(function(e){if(!e.ok)throw e;return u?e.text():e.json()}).then(e).catch(t)})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new M.a(function(a,r){return n(e+"&page="+t).then(function(n){var i=+new URL(n.last).searchParams.get("page");if(t===i)return console.log("Requesting last page, "+t),void a(o.concat(n.list));console.log("Requesting page "+t+", "+(i-t)+" more to go.");var l=o.concat(n.list);s(e,t+1,l).then(a).catch(r)}).catch(r)})}var a=function(e){return e?"/"+e+".json":".json"},r=function(e){return e.list.find(function(e){return"farm_areas"===e.machine_name}).vid};return{authenticate:function(){return n("/user/login",{method:"POST",payload:{form_id:"user_login",name:t,pass:o},auth:!0}).then(function(){return n("/restws/session/token",{auth:!0}).then(function(e){return e}).catch(function(e){throw e})}).catch(function(e){throw e})},area:{delete:function(e,t){return n("/taxonomy_vocabulary.json").then(function(o){return n("/taxonomy_term.json?vocabulary="+r(o)+a(e),{method:"DELETE",token:t})})},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("/taxonomy_vocabulary.json").then(function(t){if(console.log("TAXONOMY TERMS ARE SORTED BY VOCABULARY OBJECT WITH "+r(t)),"number"==typeof e)return n("/taxonomy_term.json?vocabulary="+r(t)+"&tid="+e);var o=e.page,a=void 0===o?null:o,i=e.type,l=void 0===i?"":i,c=""!==l?"field_farm_area_type="+l:"",u=null!==a?"page="+a:"";return null===a?s("/taxonomy_term.json?vocabulary="+r(t)+"&"+c):n("/taxonomy_term.json?vocabulary="+r(t)+"&"+c+"&"+u)})},send:function(e,t,o){return n("/taxonomy_vocabulary.json").then(function(s){return n("/taxonomy_term.json?vocabulary="+r(s)+a(t),{method:"POST",payload:e,token:o})})}},asset:{delete:function(e,t){return n("/farm_asset/"+e+".json",{method:"DELETE",token:t})},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("number"==typeof e)return n("/farm_asset/"+e+".json");var t=e.type,o=void 0===t?"":t,a=e.archived,r=void 0!==a&&a,i=e.page,l=void 0===i?null:i,c=""!==o?"type="+o:"",u=r?"":"&archived=0",d=null!==l?"&page="+l:"";return null===l?s("/farm_asset.json?"+c+u):n("/farm_asset.json?"+c+u+d)},send:function(e,t,o){return n("/farm_asset"+a(t),{method:"POST",payload:e,token:o})}},info:function(){return n("/farm.json")},log:{delete:function(e,t){return n("/log/"+e+".json",{method:"DELETE",token:t})},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("number"==typeof e)return n("/log/"+e+".json");console.log("GETTING LOGS WITH THE FOLLOWING ",e);var t=e.page,o=void 0===t?null:t,s=e.type,a=void 0===s?[]:s,r=e.assigned,i=void 0===r?"":r,l=e.completed,c=void 0===l?"":l,u="/log.json?";return a.forEach(function(e,t){u=(u="?"!==u.slice(-1)?u+"&":u)+"type["+t+"]="+e}),u="?"!==u.slice(-1)&&""!==i?u+"&":u,u="?"!==(u=""!==i?u+"field_farm_log_owner="+i:u).slice(-1)&&null!==o?u+"&":u,u="?"!==(u=null!==o?u+"page="+o:u).slice(-1)&&""!==c?u+"&":u,u=""!==c?u+"done="+c:u,console.log("DOING REQUEST WITH QUERYSTRING: "+u),n(u)},send:function(e,t){return n("/log",{method:"POST",payload:e,token:t})},update:function(e,t){return console.log("SENDING TO NODE ID "+e.id),n("/log/"+e.id,{method:"PUT",payload:e,token:t})}}}},ne=function(){var e=localStorage.getItem("host"),t=localStorage.getItem("username"),o=localStorage.getItem("password");return oe(e,t,o)},se={actions:{updateAreas:function(e){var t=e.commit;return ne().area.get().then(function(e){t("deleteAllAreas");var o=e.map(function(e){return{tid:e.tid,name:e.name,field_farm_geofield:e.field_farm_geofield}});t("addAreas",o),console.log("Finished updating areas!")}).catch(function(e){throw e})},updateAssets:function(e){var t=e.commit;return ne().asset.get().then(function(e){t("deleteAllAssets");var o=e.map(function(e){return{id:e.id,name:e.name}});t("addAssets",o),console.log("Finished updating assets!")}).catch(function(e){throw e})},sendLogs:function(e,t){var o=e.commit,n=(e.dispatch,e.rootState);function s(e,t){var n=null;n=t.logId?t.logId:e.id,o("updateLogs",{indices:[t.logIndex],mapper:function(t){return J(u()({},t,{id:n,wasPushedToServer:!0,remoteUri:e.uri}))}})}function a(e,s){if("object"===(void 0===e?"undefined":B()(e))&&void 0===e.status){var a={message:'Unable to sync "'+n.farm.logs[s].name+'" because the network is currently unavailable. Please try syncing again later.',errorCode:e.statusText,level:"warning",show:!0};o("logError",a)}else if(401===e.status||403===e.status)t.router.push("/login");else{var r={message:e.status+' error while syncing "'+n.farm.logs[s].name+'": '+e.statusText,errorCode:e.statusText,level:"warning",show:!0};o("logError",r)}o("updateLogs",{indices:[s],mapper:function(e){return J(u()({},e,{isReadyToSync:!1}))}})}localStorage.getItem("token")?t.indices.map(function(e){var t=J(n.farm.logs[e],"FARMOS_SERVER");if("farm_seeding"===t.type&&(delete t.field_farm_area,delete t.field_farm_geofield),!n.farm.logs[e].wasPushedToServer)return console.log("SENDING UNSYNCED LOG WITH PAYLOAD: ",t),t.id?ne().log.update(t,localStorage.getItem("token")).then(function(o){return s(o,{logIndex:e,logId:t.id})}).catch(function(t){return a(t,e)}):ne().log.send(t,localStorage.getItem("token")).then(function(t){return s(t,{logIndex:e})}).catch(function(t){return a(t,e)})}):t.router.push("/login")},getServerLogs:function(e,t){var o=e.commit,n=e.rootState;return console.log("GET SERVER LOGS CALLED IN HTTPMODULE WITH",t),ne().log.get(t,localStorage.getItem("token")).then(function(e){function t(e,t,o,n){if(e[t]){var s=[];return o.forEach(function(o){e[t].forEach(function(e){o[n]===e.id&&s.push(o)})}),s}}function s(e){var s,a,r,i=n.farm.areas,l=n.farm.assets,c=(s=e,a=n.farm.logs,r={localId:null,storeIndex:null,localChange:!0},a.forEach(function(e,t){e.id&&e.id===s.id&&(r.localId=e.local_id,r.storeIndex=t,e.wasPushedToServer&&(r.localChange=!1))}),r),d=t(e,"field_farm_asset",l,"id"),m=t(e,"field_farm_area",i,"tid");if(null===c.localId)console.log("ADDING LOG WITH PARAMS: ",e),o("addLogFromServer",J(u()({},e,{wasPushedToServer:!0,field_farm_area:m,field_farm_asset:d}),V));else if(c.localChange)console.log("LOG "+e.name+" HAS BEEN CHANGED LOCALLY; WILL NOT BE UPDATED FROM THE SERVER");else{console.log("UPDATING UNCHANGED LOG "+e.name);var f={index:c.storeIndex,log:J(u()({},e,{wasPushedToServer:!0,local_id:c.localId,field_farm_area:m,field_farm_asset:d}),V)};o("updateLogFromServer",f)}}console.log("LOGS RECEIVED AS ",e),e.list?e.list.forEach(function(e){return s(e)}):s(e)}).catch(function(e){throw e})}}},ae={actions:{getPhotoLoc:function(e){var t=e.commit,o=e.rootState;new M.a(function(e,t){console.log("GETTING IMAGE FROM CAMERA");var o={quality:50,destinationType:Camera.DestinationType.DATA_URL};navigator.camera.getPicture(function(t){console.log("RETRIEVED THE FOLLOWING IMAGE: "+t),e(t)},function(e){console.log("FAILED TO RETRIEVE IMAGE BECAUSE: "+e),t(e)},o)}).then(function(e){var n="data:image/jpeg;base64,"+e,s={images:o.farm.logs[o.farm.currentLogIndex].images.concat(n),isCachedLocally:!1};t("updateCurrentLog",s)},function(e){})},loadPhotoBlob:function(e,t){var o=e.commit,n=e.rootState,s=n.farm.logs[n.farm.currentLogIndex];(function(e){return new M.a(function(t,o){var n=new FileReader;n.onloadend=function(){return t(n.result)},n.onerror=function(){return o(n.error)},n.readAsDataURL(e)})})(t).then(function(e){var t={images:s.images.concat(e),isCachedLocally:!1};o("updateCurrentLog",t)})}}};function re(e,t,o){return t?e.concat(o):e}var ie,le,ce={install:function(e,t){var o=t.store,n=t.router;o.registerModule("data",q),o.registerModule("http",se),o.registerModule("camera",ae),n.beforeEach(function(e,t,n){"/logs/"!==e.path&&"/logs"!==e.path||(o.commit("clearLogs"),o.dispatch("loadCachedUserAndSiteInfo"),o.dispatch("loadCachedLogs"),o.dispatch("getLogs",{assigned:o.state.shell.user.uid,completed:!1}),o.commit("clearAssets"),o.commit("clearAreas"),o.dispatch("loadCachedAssets").then(function(){return o.dispatch("updateAssets")}),o.dispatch("loadCachedAreas").then(function(){return o.dispatch("updateAreas")}),n()),e.path.includes("/logs/edit")&&(o.dispatch("loadCachedUserAndSiteInfo"),o.commit("clearAssets"),o.commit("clearAreas"),o.dispatch("loadCachedAssets").then(function(){return o.dispatch("updateAssets")}),o.dispatch("loadCachedAreas").then(function(){return o.dispatch("updateAreas")}),n()),n()}),o.subscribe(function(e){if("addLogAndMakeCurrent"===e.type&&o.dispatch("createLog",e.payload),"updateCurrentLog"!==e.type||e.payload.isCachedLocally||o.dispatch("updateLog",e.payload),"updateLogFromServer"!==e.type||e.payload.log.isCachedLocally||o.dispatch("updateLogAtIndex",e.payload),"updateAllLogs"===e.type){var t=o.state.farm.logs.reduce(re,[]);o.dispatch("sendLogs",{indices:t,router:n})}"updateLogs"===e.type&&e.payload.indices.forEach(function(e){o.dispatch("updateLog",o.state.farm.logs[e])}),"deleteLog"===e.type&&o.dispatch("deleteLog",e.payload),"addAssets"===e.type&&e.payload.forEach(function(e){o.dispatch("createCachedAsset",e)}),"updateAsset"===e.type&&o.dispatch("updateCachedAsset",e.payload),"deleteAllAssets"===e.type&&o.dispatch("deleteAllCachedAssets"),"deleteAllAreas"===e.type&&o.dispatch("deleteAllCachedAreas"),"addAreas"===e.type&&e.payload.forEach(function(e){o.dispatch("createCachedArea",e)}),"updateArea"===e.type&&o.dispatch("updateCachedArea",e.payload),"setUseGeolocation"===e.type&&localStorage.setItem("useGeolocation",e.payload)}),o.subscribeAction(function(e){if("forceSyncAssetsAndAreas"===e.type){if(null!==localStorage.getItem("host"))return o.dispatch("updateAssets").then().catch(function(e){if(403!==e.status&&401!==e.status){var t={message:e.status+" error while syncing assets: "+e.statusText,errorCode:e.statusText,level:"warning",show:!0};o.commit("logError",t)}else n.push("/login")}),void o.dispatch("updateAreas").then().catch(function(e){if(403!==e.status&&401!==e.status){var t={message:e.status+" error while syncing areas: "+e.statusText,errorCode:e.statusText,level:"warning",show:!0};o.commit("logError",t)}else n.push("/login")});n.push("/login")}"getLogs"===e.type&&o.dispatch("getServerLogs",e.payload).then().catch(function(e){if(403!==e.status&&401!==e.status){var t={message:e.status+" error while syncing areas: "+e.statusText,errorCode:e.statusText,level:"warning",show:!0};o.commit("logError",t)}else n.push("/login")}),"serverLogToDb"===e.type&&o.dispatch("createLogFromServer",e.payload)})}},ue={components:{iconSpinner:C},name:"Login",data:function(){return{valuesEntered:!1,authPending:!1,username:"",password:"",farmosUrl:""}},methods:{checkValues:function(){var e=""!==this.username,t=""!==this.username,o=""!==this.password;e&&t&&o&&(this.valuesEntered=!0)},submitCredentials:function(){var e=this,t={farmosUrl:this.farmosUrl,username:this.username,password:this.password,router:this.$router};this.authPending=!0,this.$store.dispatch("didSubmitCredentials",t).then(function(){e.authPending=!1,e.$store.commit("setLoginStatus",!0),e.$store.dispatch("updateUserAndSiteInfo")})},onDeviceReady:function(){console.log("RECEIVED DEVICEREADY"),this.loadUserInfo()},loadUserInfo:function(){this.farmosUrl=window.localStorage.getItem("host").replace(/(^\w+:|^)\/\//,""),this.username=window.localStorage.getItem("username"),this.password=window.localStorage.getItem("password"),this.checkValues()}},created:function(){console.log("VUE IS READY"),document.addEventListener("deviceready",this.onDeviceReady(),!1),this.loadUserInfo()}},de=(o("f4dE"),Object(i.a)(ue,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"login"}},[o("div",{staticClass:"input-group"},[e._m(0),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.farmosUrl,expression:"farmosUrl"}],staticClass:"form-control",attrs:{placeholder:"Enter your farmOS URL",autofocus:"",type:"text",autocomplete:"url"},domProps:{value:e.farmosUrl},on:{input:[function(t){t.target.composing||(e.farmosUrl=t.target.value)},e.checkValues]}})]),e._v(" "),o("br"),e._v(" "),o("div",{staticClass:"input-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{placeholder:"Enter your username",type:"text",autocomplete:"username"},domProps:{value:e.username},on:{input:[function(t){t.target.composing||(e.username=t.target.value)},e.checkValues]}})]),e._v(" "),o("br"),e._v(" "),o("div",{staticClass:"input-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{placeholder:"Enter your password",type:"password",autocomplete:"current-password"},domProps:{value:e.password},on:{input:[function(t){t.target.composing||(e.password=t.target.value)},e.checkValues]}})]),e._v(" "),o("br"),e._v(" "),o("div",{staticClass:"input-group login-submit"},[e.authPending?o("div",[o("icon-spinner")],1):o("button",{staticClass:"btn btn-success btn-navbar",attrs:{disabled:!this.valuesEntered,title:"Submit credentials",type:"button"},on:{click:e.submitCredentials}},[e._v("\n      Submit credentials\n    ")])]),e._v(" "),o("br"),e._v(" "),e._m(1)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("https://")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Need a server? Check out "),t("a",{attrs:{href:"https://farmos.org/hosting/"}},[this._v("hosting options")]),this._v(".")])}],!1,null,"64df7624",null).exports),me={name:"Logout",methods:{goBack:function(){this.$router.back()},logout:function(){this.$store.commit("clearLogs"),this.$store.commit("clearAssets"),this.$store.commit("clearAreas"),this.$store.commit("changeUsername",""),this.$store.commit("changeEmail",""),this.$store.commit("changeUid",""),this.$store.commit("changeFarmName",""),this.$store.commit("changeFarmUrl",""),this.$store.dispatch("deleteAllCachedLogs"),this.$store.dispatch("deleteAllCachedAssets"),this.$store.dispatch("deleteAllCachedAreas"),this.$store.dispatch("deleteCachedUserAndSiteInfo"),this.$store.commit("setLoginStatus",!1),this.$router.push({path:"/login"})}}},fe=(o("XwOk"),Object(i.a)(me,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container-fluid"},[this._m(0),this._v(" "),t("div",{staticClass:"row justify-content-sm-center"},[t("div",{staticClass:"col col-sm-auto",attrs:{id:"go-back"}},[t("button",{staticClass:"btn btn-lg btn-success",attrs:{type:"button",name:"button"},on:{click:this.goBack}},[this._v("\n        Go Back\n      ")])]),this._v(" "),t("div",{staticClass:"col col-sm-auto"},[t("button",{staticClass:"btn btn-lg btn-primary",attrs:{type:"button",name:"button"},on:{click:this.logout}},[this._v("\n        Logout\n      ")])])])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row",attrs:{id:"first-row"}},[t("div",{staticClass:"col"},[t("div",{staticClass:"card text-primary border-primary mb-3"},[t("div",{staticClass:"card-body"},[t("h4",{staticClass:"card-title"},[this._v("WARNING!")]),this._v(" "),t("p",{staticClass:"card-text"},[this._v("\n            Logging out will permanently delete all logs stored on this device.\n            You will not be able to recover logs which have not been synced with\n            your farmOS server. Go back to sync any unsaved logs, or proceed to\n            logout and clear all data from this device.\n          ")])])])])])}],!1,null,"7cb95982",null).exports),ge={actions:{didSubmitCredentials:function(e,t){var o=e.commit;console.log("RUNNING didSubmitCredentials");var n="https://"+t.farmosUrl,s=t.username,a=t.password,r=t.router,i=window.localStorage;return new M.a(function(e){oe(n,s,a).authenticate().then(function(t){if(i.setItem("host",n),i.setItem("username",s),i.setItem("password",a),i.setItem("token",t),window.history.length>1)return window.history.back(),void e();r.push("/"),e()}).catch(function(){var l="http://"+t.farmosUrl;oe(l,s,a).authenticate().then(function(t){if(i.setItem("host",l),i.setItem("username",s),i.setItem("password",a),i.setItem("token",t),window.history.length>1)return window.history.back(),void e();r.push("/"),e()}).catch(function(t){!function(e){if(403===e.status){var t={message:'The username or password you entered was incorrect. Please try again, or <a href="'+n+'/user/password">reset your password</a>.',errorCode:e.statusText,level:"warning",show:!0};o("logError",t)}else{var s={message:"Unable to reach the server. Please check that you have the correct URL and that your device has a network connection. Status: "+e.status,errorCode:e.statusText,level:"warning",show:!0};console.log("Server response: "+e.status),o("logError",s)}}(t),e()})})})},updateUserAndSiteInfo:function(e){var t,o,n,s=e.commit;localStorage.getItem("username")&&(t=localStorage.getItem("host"),o=localStorage.getItem("username"),n=localStorage.getItem("password"),oe(t,o,n)).info().then(function(e){s("changeFarmName",e.name),s("changeFarmUrl",e.url),s("changeUsername",e.user.name),s("changeEmail",e.user.mail),s("changeUid",e.user.uid),s("setLoginStatus",!0),localStorage.setItem("farmName",e.name),localStorage.setItem("username",e.user.name),localStorage.setItem("email",e.user.mail),localStorage.setItem("uid",e.user.uid),localStorage.setItem("isLoggedIn",!0)})},loadCachedUserAndSiteInfo:function(e){var t=e.commit;t("changeUsername",localStorage.getItem("username")),t("changeEmail",localStorage.getItem("email")),t("changeUid",localStorage.getItem("uid")),t("setLoginStatus",localStorage.getItem("isLoggedIn")),t("changeFarmName",localStorage.getItem("farmName")),t("changeFarmUrl",localStorage.getItem("host")),localStorage.getItem("useGeolocation")&&("true"===localStorage.getItem("useGeolocation")?t("setUseGeolocation",!0):t("setUseGeolocation",!1))},deleteCachedUserAndSiteInfo:function(){localStorage.removeItem("username"),localStorage.removeItem("email"),localStorage.removeItem("username"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("farmName"),localStorage.removeItem("host"),localStorage.removeItem("useGeolocation")}}};ie=ce,le={install:function(e,t){var o=t.router,n=t.store,s=e.component(de.name,de),a=e.component(fe.name,fe);o.addRoutes([{path:"/login",name:"Login",component:s},{path:"/logout",name:"Logout",component:a}]),o.beforeEach(function(e,t,o){"/login"===t.path&&"/logout"===e.path&&o("/"),o()}),n.registerModule("auth",ge)}},n.a.use(ie,{store:k,router:L}),void 0!==le&&n.a.use(le,{router:L,store:k}),new n.a({el:"#app",store:k,router:L,components:{App:x},template:"<App/>"})},XwOk:function(e,t,o){"use strict";var n=o("CKMK");o.n(n).a},f4dE:function(e,t,o){"use strict";var n=o("xtE3");o.n(n).a},iXJI:function(e,t,o){"use strict";var n=o("18Nx");o.n(n).a},mRpm:function(e,t,o){"use strict";var n=o("9u7i");o.n(n).a},oGNR:function(e,t,o){},onSx:function(e,t,o){"use strict";var n=o("DeB4");o.n(n).a},"qQ/H":function(e,t,o){},twv8:function(e,t,o){"use strict";var n=o("9W5K");o.n(n).a},xtE3:function(e,t,o){}});
//# sourceMappingURL=app.4fe64ab439080931cc0d.js.map